var EJS=function(n){window.EJS_MODULES=n;var o,t={},s=[];function e(o){if(t[o])return t[o].exports;s.push(o);var i=t[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return window.aba=function(){return s.sort(function(e,t){return e>t?1:-1})},!typeof Array.isArray=="function"&&(o={}.toString,Array.isArray=function(e){return"[object Array]"==o.call(e)}),e.m=n,e.c=t,e.d=function(t,n,s){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:s})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o,s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(o in t)e.d(s,o,function(e){return t[e]}.bind(null,o));return s},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p='',e.s=396,e(e.s)}([function(e){e.exports=function(e,t,n){console.warn(e),e&&e.response&&e.response.status===0?t.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;"><a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors">'+n.localization("CORS Error")+"</a></strong>":t.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">'+n.localization("Network Error")+"</strong>"}},null,null,null,null,null,function(e){!function(l){'use strict';var e,t,n,i,r,c,s=function(){},o={getType:function(){return"null"},isSupported:function(){return!1},update:s},a=function(n){var e=this,t=window;this.update=s,this.requestAnimationFrame=n||t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,this.tickFunction=function(){e.update(),e.startTicker()},this.startTicker=function(){e.requestAnimationFrame.apply(t,[e.tickFunction])}};a.prototype.start=function(e){this.update=e||s,this.startTicker()},i=function(){},i.prototype.update=s,i.prototype.start=function(e){this.update=e||s},t=function(e,t){this.listener=e,this.gamepadGetter=t,this.knownGamepads=[]},t.factory=function(s){var n=o,e=window&&window.navigator;return e&&(void 0!==e.getGamepads?n=new t(s,function(){return e.getGamepads()}):void 0!==e.webkitGamepads?n=new t(s,function(){return e.webkitGamepads()}):void 0!==e.webkitGetGamepads&&(n=new t(s,function(){return e.webkitGetGamepads()}))),n},t.getType=function(){return"WebKit"},t.prototype.getType=function(){return t.getType()},t.prototype.isSupported=function(){return!0},t.prototype.update=function(){var e,t,n=Array.prototype.slice.call(this.gamepadGetter(),0);for(e=this.knownGamepads.length-1;e>=0;e--)t=this.knownGamepads[e],n.indexOf(t)<0&&(this.knownGamepads.splice(e,1),this.listener._disconnect(t));for(e=0;e<n.length;e++)(t=n[e])&&this.knownGamepads.indexOf(t)<0&&(this.knownGamepads.push(t),this.listener._connect(t))},n=function(e){this.listener=e,window.addEventListener("gamepadconnected",function(t){e._connect(t.gamepad)}),window.addEventListener("gamepaddisconnected",function(t){e._disconnect(t.gamepad)})},n.factory=function(t){var e=o;return window&&void 0!==window.addEventListener&&(e=new n(t)),e},n.getType=function(){return"Firefox"},n.prototype.getType=function(){return n.getType()},n.prototype.isSupported=function(){return-1!==(window&&window.navigator).userAgent.indexOf("Firefox")},n.prototype.update=s,e=function(e){this.updateStrategy=e||new a,this.gamepads=[],this.listeners={},this.platform=o,this.deadzone=.03,this.maximizeThreshold=.97},e.UpdateStrategies={AnimFrameUpdateStrategy:a,ManualUpdateStrategy:i},e.PlatformFactories=[n.factory,t.factory],e.Type={N64:"n64",PLAYSTATION:"playstation",LOGITECH:"logitech",XBOX:"xbox",ECKA:"ecka",UNKNOWN:"unknown"},e.Event={CONNECTED:"connected",UNSUPPORTED:"unsupported",DISCONNECTED:"disconnected",TICK:"tick",BUTTON_DOWN:"button-down",BUTTON_UP:"button-up",AXIS_CHANGED:"axis-changed"},e.StandardButtons=["BUTTON_1","BUTTON_2","BUTTON_3","BUTTON_4","LEFT_TOP_SHOULDER","RIGHT_TOP_SHOULDER","LEFT_BOTTOM_SHOULDER","RIGHT_BOTTOM_SHOULDER","SELECT_BACK","START_FORWARD","LEFT_STICK","RIGHT_STICK","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT","HOME"],e.StandardAxes=["LEFT_STICK_X","LEFT_STICK_Y","RIGHT_STICK_X","RIGHT_STICK_Y"],c=function(e,t,n){return t<e.length?e[t]:n+(t-e.length+1)},e.StandardMapping={env:{},buttons:{byButton:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},axes:{byAxis:[0,1,2,3]}},e.Mappings=[{env:{platform:n.getType(),type:e.Type.N64},buttons:{byButton:[2,1,3,0,4,5,-1,-1,8,9,-1,-1,12,13,14,15,-1]},axes:{byAxis:[1,2,-1,-1]}},{env:{platform:t.getType(),type:e.Type.N64},buttons:{byButton:[2,1,3,0,4,5,-1,-1,8,9,-1,-1,12,13,14,15,-1]},axes:{byAxis:[0,1,-1,-1]}},{env:{platform:n.getType(),type:e.Type.XBOX},buttons:{byButton:[0,1,2,3,4,5,15,16,9,8,6,7,11,12,13,14,10]},axes:{byAxis:[0,1,2,3]}},{env:{platform:n.getType(),type:e.Type.PLAYSTATION},buttons:{byButton:[14,13,15,12,10,11,8,9,0,3,1,2,4,6,7,5,16]},axes:{byAxis:[0,1,2,3]}},{env:{platform:t.getType(),type:e.Type.LOGITECH},buttons:{byButton:[1,2,0,3,4,5,6,7,8,9,10,11,11,12,13,14,10]},axes:{byAxis:[0,1,2,3]}},{env:{platform:n.getType(),type:e.Type.LOGITECH},buttons:{byButton:[0,1,2,3,4,5,-1,-1,6,7,8,9,11,12,13,14,10],byAxis:[-1,-1,-1,-1,-1,-1,[2,0,1],[2,0,-1]]},axes:{byAxis:[0,1,3,4]}},{env:{platform:t.getType(),type:e.Type.ECKA},buttons:{byButton:[2,1,3,0,4,5,6,7,8,9,10,11,11,12,13,14,10],byAxis:[-1,-1,-1,-1,-1,-1,[2,0,1],[2,0,-1]]},axes:{byAxis:[0,1,3,4]}},{env:{platform:t.getType(),type:e.Type.UNKNOWN},buttons:{byButton:[0,1,2,3,4,5,-1,-1,6,7,8,9,11,12,13,14,15,16,17,10]},axes:{byAxis:[0,1,2,5]}}],e.prototype.init=function(){var t=e.resolvePlatform(this),n=this;return this.platform=t,this.updateStrategy.start(function(){n._update()}),this.buttonState=[],this.extraButtonState=[],t.isSupported()},e.prototype.bind=function(e,t){return void 0===this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t),this},e.prototype.unbind=function(e,n){if(void 0!==e){if(void 0!==n){if(void 0===this.listeners[e])return!1;for(var t=0;t<this.listeners[e].length;t++)if(this.listeners[e][t]===n)return this.listeners[e].splice(t,1),!0;return!1}this.listeners[e]=[]}else this.listeners={}},e.prototype.count=function(){return this.gamepads.length},e.prototype._fire=function(t,e){if(void 0!==this.listeners[t]){for(var s,n=0;n<this.listeners[t].length;n++)this.listeners[t][n].apply(this.listeners[t][n],[e]);s=this,e.gamepad&&e.gamepad.extra_buttons&&e.gamepad.extra_buttons.forEach(function(t,n){s.extraButtonState[e.gamepad.index]||(s.extraButtonState[e.gamepad.index]=[]),s.extraButtonState[e.gamepad.index][n]=t})}},e.getNullPlatform=function(){return Object.create(o)},e.resolvePlatform=function(s){var t,n=o;for(t=0;!n.isSupported()&&t<e.PlatformFactories.length;t++)n=e.PlatformFactories[t](s);return n},e.prototype._connect=function(t){var n,s,o=this._resolveMapping(t);for(t.state={},t.lastState={},t.updater=[],this.buttonState[t.index]||(this.buttonState[t.index]=[]),this.extraButtonState[t.index]||(this.extraButtonState[t.index]=[]),s=o.buttons.byButton.length,n=0;n<s;n++)this._addButtonUpdater(t,o,n);for(s=o.axes.byAxis.length,n=0;n<s;n++)this._addAxisUpdater(t,o,n);if(this.gamepads[t.index]=t,!this.gamepads[t.index].extra_buttons)for(this.gamepads[t.index].extra_buttons=[],n=t.buttons.length;n<16;n++)this.extraButtonState[t.index][n]?this.gamepads[t.index].extra_buttons[n]=this.extraButtonState[t.index][n]:this.gamepads[t.index].extra_buttons[n]={pressed:!1,value:0};this._fire(e.Event.CONNECTED,t)},e.prototype._addButtonUpdater=function(t,l,i){var a,n=c(e.StandardButtons,i,"EXTRA_BUTTON_"),r=this._createButtonGetter(t,l.buttons,i),s=this,o={gamepad:t,control:n,index:i,gamepadIndex:t.index};t.state[n]=0,t.lastState[n]=0,null==this.buttonState[t.index][n]&&(this.buttonState[t.index][n]=0),a=function(){var i=r(),a=t.lastState[n],c=i>.5,l=a>.5;t.state[n]=i,c&&!l?s._fire(e.Event.BUTTON_DOWN,Object.create(o)):!c&&l?s._fire(e.Event.BUTTON_UP,Object.create(o)):s.buttonState[t.index][n]!=i&&s._fire(e.Event.BUTTON_UP,Object.create(o)),0!==i&&1!==i&&i!==a&&s._fireAxisChangedEvent(t,n,i),t.lastState[n]=i,s.buttonState[t.index][n]=i},t.updater.push(a)},e.prototype._addAxisUpdater=function(t,a,o){var i,n=c(e.StandardAxes,o,"EXTRA_AXIS_"),r=this._createAxisGetter(t,a.axes,o),s=this;t.state[n]=0,t.lastState[n]=0,null==this.buttonState[t.index][n]&&(this.buttonState[t.index][n]=0),i=function(){var e=r(),o=s.buttonState[t.index][n];t.state[n]=e,e!==o&&s._fireAxisChangedEvent(t,n,e),t.lastState[n]=e,s.buttonState[t.index][n]=e},t.updater.push(i)},e.prototype._fireAxisChangedEvent=function(t,n,s){var o={gamepad:t,axis:n,value:s};this._fire(e.Event.AXIS_CHANGED,o)},e.prototype._createButtonGetter=(r=function(){return 0},function(t,n,o){var e,i,s=r,a=this;return-1!==(e=n.byButton[o])?"number"==typeof e&&e<t.buttons.length&&(s=function(){var n=t.buttons[e];return"number"==typeof n?n:"number"==typeof n.value?n.value:0}):n.byAxis&&o<n.byAxis.length&&(e=n.byAxis[o],i=e,"[object Array]"===Object.prototype.toString.call(i)&&3==e.length&&e[0]<t.axes.length&&(s=function(s,e,t){var n=r;return e<t?n=function(){var o=t-e,n=s();return(n=(n-e)/o)<0?0:n}:t<e&&(n=function(){var o=e-t,n=s();return(n=(n-t)/o)>1?0:1-n}),n}(s=function(){var n=t.axes[e[0]];return a._applyDeadzoneMaximize(n)},e[1],e[2]))),s}),e.prototype._createAxisGetter=function(){var e=function(){return 0};return function(n,o,i){var t,s=e,a=this;return-1!==(t=o.byAxis[i])&&"number"==typeof t&&t<n.axes.length&&(s=function(){var e=n.axes[t];return a._applyDeadzoneMaximize(e)}),s}}(),e.prototype._disconnect=function(n){var t,s=[];for(void 0!==this.gamepads[n.index]&&delete this.gamepads[n.index],t=0;t<this.gamepads.length;t++)void 0!==this.gamepads[t]&&(s[t]=this.gamepads[t]);this.gamepads=s,this._fire(e.Event.DISCONNECTED,n)},e.prototype._resolveControllerType=function(t){return-1!==(t=t.toLowerCase().replace(/\s+/g," ").replace(/^\s+|\s+$/g,'')).indexOf("playstation")?e.Type.PLAYSTATION:-1!==t.indexOf("logitech")||-1!==t.indexOf("wireless gamepad")?e.Type.LOGITECH:-1!==t.indexOf("xbox")||-1!==t.indexOf("360")?e.Type.XBOX:-1!==t.indexOf("79-6-generic")&&-1!==t.indexOf("joystick")||-1!==t.indexOf("vendor: 0079 product: 0006")&&-1!==t.indexOf("generic usb joystick")?e.Type.N64:"usb joystick (vendor: 0e8f product: 0002)"===t?e.Type.ECKA:e.Type.UNKNOWN},e.prototype._resolveMapping=function(i){var t,n,o=e.Mappings,s=null,a={platform:this.platform.getType(),type:this._resolveControllerType(i.id)};for(t=0;!s&&t<o.length;t++)n=o[t],e.envMatchesFilter(n.env,a)&&(s=n);return s||e.StandardMapping},e.envMatchesFilter=function(t,s){var e,n=!0;for(e in t)t[e]!==s[e]&&(n=!1);return n},e.prototype._update=function(){this.platform.update(),this.gamepads.forEach(function(e){e&&e.updater.forEach(function(e){e()})}),this.gamepads.length>0&&this._fire(e.Event.TICK,this.gamepads)},e.prototype._applyDeadzoneMaximize=function(e,t,n){return t=void 0!==t?t:this.deadzone,n=void 0!==n?n:this.maximizeThreshold,e>=0?e<t?e=0:e>n&&(e=1):e>-t?e=0:e<-n&&(e=-1),e},l.Gamepad=e}(e.exports||window)},null,null,null,null,function(t){var e=function(e,t){var e;try{e=new URL(e)}catch(e){}return e&&!["http:","https:"].includes(e.protocol)?new Promise(async function(s,o){if(t.method==="HEAD"){s({headers:{}});return}try{var n=await fetch(e);if(t.type&&t.type.toLowerCase()==="arraybuffer")n=await n.arrayBuffer();else{n=await n.text();try{n=JSON.parse(n)}catch(e){}}}catch(e){o(e)}s({data:n,headers:{}})}):new Promise(function(s,o){var n=new XMLHttpRequest;n.onload=function(){if(n.readyState===n.DONE){var e=n.response;try{e=JSON.parse(e)}catch(e){}s({data:e,headers:{"content-length":n.getResponseHeader("content-length"),"content-type":n.getResponseHeader("content-type"),"last-modified":n.getResponseHeader("last-modified")}})}},n.responseType=t.type,n.onerror=o,n.open(t.method,e,!0),n.send()})};t.exports={a:{get:async function(n,t){var s=t&&t.responseType?t&&t.responseType:"text",o=e(n,{method:"GET",type:s});return o},head:async function(n,t){var s=t&&t.responseType?t&&t.responseType:"text",o=e(n,{method:"HEAD",type:s});return o}}}},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(m){e=m.exports={};function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function d(e){if(s===setTimeout)return setTimeout(e,0);if((s===l||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:l}catch(e){s=l}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(e){o=c}}();var e,s,o,i,n=[],a=!1,r=-1;function f(){a&&i&&(a=!1,i.length?n=i.concat(n):r=-1,n.length&&u())}function u(){if(!a){var e,t=d(f);a=!0;for(e=n.length;e;){for(i=n,n=[];++r<e;)i&&i[r].run();r=-1,e=n.length}i=null,a=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function h(e,t){this.fun=e,this.array=t}function t(){}e.nextTick=function(s){var e,t=new Array(arguments.length-1);if(arguments.length>1)for(e=1;e<arguments.length;e++)t[e-1]=arguments[e];n.push(new h(s,t)),1!==n.length||a||d(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version='',e.versions={},e.on=t,e.addListener=t,e.once=t,e.off=t,e.removeListener=t,e.removeAllListeners=t,e.emit=t,e.prependListener=t,e.prependOnceListener=t,e.listeners=function(){return[]},e.binding=function(){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(t){function e(t){if(t)return function(t){for(var n in e.prototype)t[n]=e.prototype[n];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},e.prototype.once=function(t,n){function e(){this.off(t,e),n.apply(this,arguments)}return e.fn=n,this.on(t,e),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,s){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e,o,t=this._callbacks["$"+n];if(!t)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(e=0;e<t.length;e++)if((o=t[e])===s||o.fn===s){t.splice(e,1);break}return this},e.prototype.emit=function(s){this._callbacks=this._callbacks||{};var t,n,o=[].slice.call(arguments,1),e=this._callbacks["$"+s];if(e)for(t=0,n=(e=e.slice(0)).length;t<n;++t)e[t].apply(this,o);return this},e.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},e.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(g,e,s){var c,p=s(382),f=s(151),i=s(384),m=s(385),d=s(386);"undefined"!=typeof ArrayBuffer&&(c=s(387));var h="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=h||u;e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},o=p(a),n={type:"error",data:"parser error"},t=s(388);function r(e,s,o){for(var n=new Array(e.length),i=m(e.length,o),a=function(e,t,o){s(t,function(t,s){n[e]=s,o(t,n)})},t=0;t<e.length;t++)a(t,e[t],i)}e.encodePacket=function(n,o,i,s){"function"==typeof o&&(s=o,o=!1),"function"==typeof i&&(s=i,i=null);var c,r=void 0===n.data?void 0:n.data.buffer||n.data;return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function(s,c,o){if(!c)return e.encodeBase64Packet(s,o);var t,i=s.data,r=new Uint8Array(i),n=new Uint8Array(1+i.byteLength);n[0]=a[s.type];for(t=0;t<r.length;t++)n[t+1]=r[t];return o(n.buffer)}(n,o,s):void 0!==t&&r instanceof t?function(n,o,s){if(!o)return e.encodeBase64Packet(n,s);if(l)return function(t,s,o){if(!s)return e.encodeBase64Packet(t,o);var n=new FileReader;return n.onload=function(){e.encodePacket({type:t.type,data:n.result},s,!0,o)},n.readAsArrayBuffer(t.data)}(n,o,s);var r,i=new Uint8Array(1);return i[0]=a[n.type],r=new t([i.buffer,n.data]),s(r)}(n,o,s):r&&r.base64?function(t,n){var s="b"+e.packets[t.type]+t.data.data;return n(s)}(n,s):(c=a[n.type],void 0!==n.data&&(c+=i?d.encode(String(n.data),{strict:!1}):String(n.data)),s(''+c))},e.encodeBase64Packet=function(n,l){if(o="b"+e.packets[n.type],void 0!==t&&n.data instanceof t)return i=new FileReader,i.onload=function(){var e=i.result.split(",")[1];l(o+e)},i.readAsDataURL(n.data);try{a=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(e){for(var o,i,a,r=new Uint8Array(n.data),c=new Array(r.length),s=0;s<r.length;s++)c[s]=r[s];a=String.fromCharCode.apply(null,c)}return o+=btoa(a),l(o)},e.decodePacket=function(s,c,l){if(void 0===s)return n;if("string"==typeof s){if("b"===s.charAt(0))return e.decodeBase64Packet(s.substr(1),c);if(l&&!1===(s=function(e){try{e=d.decode(e,{strict:!1})}catch(e){return!1}return e}(s)))return n;var r,a=s.charAt(0);return Number(a)==a&&o[a]?s.length>1?{type:o[a],data:s.substring(1)}:{type:o[a]}:n}return a=new Uint8Array(s)[0],r=i(s,1),t&&"blob"===c&&(r=new t([r])),{type:o[a],data:r}},e.decodeBase64Packet=function(n,i){var e,s=o[n.charAt(0)];return c?(e=c.decode(n.substr(1)),"blob"===i&&t&&(e=new t([e])),{type:s,data:e}):{type:s,data:{base64:!0,data:n.substr(1)}}},e.encodePayload=function(n,s,o){"function"==typeof s&&(o=s,s=null);var i=f(n);if(s&&i)return t&&!l?e.encodePayloadAsBlob(n,o):e.encodePayloadAsArrayBuffer(n,o);if(!n.length)return o("0:");r(n,function(t,n){e.encodePacket(t,!!i&&s,!1,function(e){n(null,function(e){return e.length+":"+e}(e))})},function(t,e){return o(e.join(''))})},e.decodePayload=function(i,a,t){if("string"!=typeof i)return e.decodePayloadAsBinary(i,a,t);if("function"==typeof a&&(t=a,a=null),''===i)return t(n,0,1);for(var r,c,l,d,s='',o=0,u=i.length;o<u;o++)if(d=i.charAt(o),":"===d){if(''===s||s!=(c=Number(s)))return t(n,0,1);if(s!=(l=i.substr(o+1,c)).length)return t(n,0,1);if(l.length){if(r=e.decodePacket(l,a,!1),n.type===r.type&&n.data===r.data)return t(n,0,1);if(!1===t(r,o+c,u))return}o+=c,s=''}else s+=d;return''!==s?t(n,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){if(!t.length)return n(new ArrayBuffer(0));r(t,function(t,n){e.encodePacket(t,!0,!0,function(e){return n(null,e)})},function(i,s){var o=s.reduce(function(n,e){var t;return n+(t="string"==typeof e?e.length:e.byteLength).toString().length+t+2},0),e=new Uint8Array(o),t=0;return s.forEach(function(o){var n,s,a,r="string"==typeof o,i=o;if(r){for(s=new Uint8Array(o.length),n=0;n<o.length;n++)s[n]=o.charCodeAt(n);i=s.buffer}e[t++]=r?0:1,a=i.byteLength.toString();for(n=0;n<a.length;n++)e[t++]=parseInt(a[n]);e[t++]=255;for(s=new Uint8Array(i),n=0;n<s.length;n++)e[t++]=s[n]}),n(e.buffer)})},e.encodePayloadAsBlob=function(n,s){r(n,function(n,s){e.encodePacket(n,!0,!0,function(e){if(i=new Uint8Array(1),i[0]=1,"string"==typeof e){for(var o,i,a,c,r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);e=r.buffer,i[0]=0}o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),a=new Uint8Array(o.length+1);for(n=0;n<o.length;n++)a[n]=parseInt(o[n]);a[o.length]=255,t&&(c=new t([i.buffer,a.buffer,e]),s(null,c))})},function(n,e){return s(new t(e))})},e.decodePayloadAsBinary=function(m,c,d){"function"==typeof c&&(d=c,c=null);for(t=m,r=[];t.byteLength>0;){for(var t,a,r,u,h,l=new Uint8Array(t),f=0===l[0],s='',o=1;255!==l[o];o++){if(s.length>310)return d(n,0,1);s+=l[o]}if(t=i(t,2+s.length),s=parseInt(s),a=i(t,0,s),f)try{a=String.fromCharCode.apply(null,new Uint8Array(a))}catch(e){u=new Uint8Array(a),a='';for(o=0;o<u.length;o++)a+=String.fromCharCode(u[o])}r.push(a),t=i(t,s)}h=r.length,r.forEach(function(t,n){d(e.decodePacket(t,c,!0),n,h)})}},function(c,e,t){var n,a=t(373),r=t(105),o=t(148),s=t(74)("socket.io-client");c.exports=e=i,n=e.managers={};function i(r,e){"object"==typeof r&&(e=r,r=void 0),e=e||{};var l,t=a(r),c=t.source,i=t.id,d=t.path,u=n[i]&&d in n[i].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?(s("ignoring socket cache for %s",c),l=o(c,e)):(n[i]||(s("new io instance for %s",c),n[i]=o(c,e)),l=n[i]),t.query&&!e.query&&(e.query=t.query),l.socket(t.path,e)}e.protocol=r.protocol,e.connect=i,e.Manager=t(148),e.Socket=t(154)},null,null,null,null,function(t,n,o){var e,s;!function(){'use strict';void 0===(s="function"==typeof(e=function(){var e=function(e){throw e},t=function(){},s={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:e,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},n=function(e,n){for(o in void 0===n&&"function"==typeof e&&(n=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={}),s)this[o]=void 0!==e[o]?e[o]:s[o];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,n&&(this.onStoreReady=n);var o,t="object"==typeof window?window:self,i=this.implementationPreference.filter(function(e){return e in t});this.implementation=i[0],this.idb=t[this.implementation],this.keyRange=t.IDBKeyRange||t.webkitIDBKeyRange||t.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},o={constructor:n,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:'',onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var t=this.idb.open(this.dbName,this.dbVersion),e=!1;t.onerror=function(e){if(function(e){return"error"in e.target?"VersionError"==e.target.error.name:"errorCode"in e.target&&12==e.target.errorCode}(e))this.onError(new Error("The version number provided is lower than the existing one."));else{if(e.target.error)t=e.target.error;else{var t,n="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in e.target&&(n+=" with error code "+e.target.errorCode),t=new Error(n)}this.onError(t)}}.bind(this),t.onsuccess=function(n){if(!e)if(this.db)this.onStoreReady();else if(this.db=n.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var t,s=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=s.objectStore(this.storeName),t=Array.prototype.slice.call(this.getIndexList()),this.indexes.forEach(function(s){var o,n=s.name;if(!n)return e=!0,void this.onError(new Error("Cannot create index: No index name given."));this.normalizeIndexData(s),this.hasIndex(n)?(o=this.store.index(n),this.indexComplies(o,s)||(e=!0,this.onError(new Error('Cannot modify index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),t.splice(t.indexOf(n),1)):(e=!0,this.onError(new Error('Cannot create new index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+".")))},this),t.length&&(e=!0,this.onError(new Error('Cannot delete index(es) "'+t.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),e||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),t.onupgradeneeded=function(n){if(this.db=n.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=n.target.transaction.objectStore(this.storeName);else{var t,s={autoIncrement:this.autoIncrement};null!==this.keyPath&&(s.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,s)}t=Array.prototype.slice.call(this.getIndexList()),this.indexes.forEach(function(n){var o,s=n.name;s||(e=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(n),this.hasIndex(s)?(o=this.store.index(s),this.indexComplies(o,n)||(this.store.deleteIndex(s),this.store.createIndex(s,n.keyPath,{unique:n.unique,multiEntry:n.multiEntry})),t.splice(t.indexOf(s),1)):this.store.createIndex(s,n.keyPath,{unique:n.unique,multiEntry:n.multiEntry})},this),t.length&&t.forEach(function(e){this.store.deleteIndex(e)},this)}.bind(this)},deleteDatabase:function(n,e){if(this.idb.deleteDatabase){this.db.close();var t=this.idb.deleteDatabase(this.dbName);t.onsuccess=n,t.onerror=e}else e(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(r,i,o,n){null!==this.keyPath&&(n=o,o=i,i=r),n||(n=e),o||(o=t);var a,c=!1,l=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);return s.oncomplete=function(){(c?o:n)(l)},s.onabort=n,s.onerror=n,null!==this.keyPath?(this._addIdPropertyIfNeeded(i),a=s.objectStore(this.storeName).put(i)):a=s.objectStore(this.storeName).put(i,r),a.onsuccess=function(e){c=!0,l=e.target.result},a.onerror=n,s},get:function(c,i,n){n||(n=e),i||(i=t);var o,a=!1,r=null,s=this.db.transaction([this.storeName],this.consts.READ_ONLY);return s.oncomplete=function(){(a?i:n)(r)},s.onabort=n,s.onerror=n,o=s.objectStore(this.storeName).get(c),o.onsuccess=function(e){a=!0,r=e.target.result},o.onerror=n,s},remove:function(c,i,n){n||(n=e),i||(i=t);var o,a=!1,r=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);return s.oncomplete=function(){(a?i:n)(r)},s.onabort=n,s.onerror=n,o=s.objectStore(this.storeName).delete(c),o.onsuccess=function(e){a=!0,r=e.target.result},o.onerror=n,s},batch:function(a,o,s){if(s||(s=e),o||(o=t),"[object Array]"!=Object.prototype.toString.call(a))s(new Error("dataArray argument must be of type Array."));else if(0===a.length)return o(!0);var c,l=a.length,i=!1,r=!1,n=this.db.transaction([this.storeName],this.consts.READ_WRITE);return n.oncomplete=function(){(r?o:s)(r)},n.onabort=s,n.onerror=s,c=function(){0!==--l||i||(i=!0,r=!0)},a.forEach(function(l){var e,r,t=l.type,o=l.key,a=l.value,d=function(e){n.abort(),i||(i=!0,s(e,t,o))};"remove"==t?(r=n.objectStore(this.storeName).delete(o),r.onsuccess=c,r.onerror=d):"put"==t&&(null!==this.keyPath?(this._addIdPropertyIfNeeded(a),e=n.objectStore(this.storeName).put(a)):e=n.objectStore(this.storeName).put(a,o),e.onsuccess=c,e.onerror=d)},this),n},putBatch:function(e,t,n){var s=e.map(function(e){return{type:"put",value:e}});return this.batch(s,t,n)},upsertBatch:function(i,o,a,n){"function"==typeof o&&(n=a=o,o={}),n||(n=e),a||(a=t),o||(o={}),"[object Array]"!=Object.prototype.toString.call(i)&&n(new Error("dataArray argument must be of type Array."));var c,h=o.keyField||this.keyPath,d=i.length,r=!1,l=!1,u=0,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);return s.oncomplete=function(){l?a(i):n(!1)},s.onabort=n,s.onerror=n,c=function(e){i[u++][h]=e.target.result,0!==--d||r||(r=!0,l=!0)},i.forEach(function(e){var t,o=e.key;null!==this.keyPath?(this._addIdPropertyIfNeeded(e),t=s.objectStore(this.storeName).put(e)):t=s.objectStore(this.storeName).put(e,o),t.onsuccess=c,t.onerror=function(e){s.abort(),r||(r=!0,n(e))}},this),s},removeBatch:function(e,t,n){var s=e.map(function(e){return{type:"remove",key:e}});return this.batch(s,t,n)},getBatch:function(o,i,n,a){if(n||(n=e),i||(i=t),a||(a="sparse"),"[object Array]"!=Object.prototype.toString.call(o))n(new Error("keyArray argument must be of type Array."));else if(0===o.length)return i([]);var d,r=[],u=o.length,l=!1,c=null,s=this.db.transaction([this.storeName],this.consts.READ_ONLY);return s.oncomplete=function(){(l?i:n)(c)},s.onabort=n,s.onerror=n,d=function(e){e.target.result||"dense"==a?r.push(e.target.result):"sparse"==a&&r.length++,0===--u&&(!0,l=!0,c=r)},o.forEach(function(t){var e=s.objectStore(this.storeName).get(t);e.onsuccess=d,e.onerror=function(e){!0,c=e,n(e),s.abort()}},this),s},getAll:function(n,s){s||(s=e),n||(n=t);var o=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=o.objectStore(this.storeName);return i.getAll?this._getAllNative(o,i,n,s):this._getAllCursor(o,i,n,s),o},_getAllNative:function(t,i,a,e){var n,s=!1,o=null;t.oncomplete=function(){(s?a:e)(o)},t.onabort=e,t.onerror=e,n=i.getAll(),n.onsuccess=function(e){s=!0,o=e.target.result},n.onerror=e},_getAllCursor:function(t,r,a,e){var n,s=[],o=!1,i=null;t.oncomplete=function(){(o?a:e)(i)},t.onabort=e,t.onerror=e,n=r.openCursor(),n.onsuccess=function(t){var e=t.target.result;e?(s.push(e.value),e.continue()):(o=!0,i=s)},n.onError=e},clear:function(o,n){n||(n=e),o||(o=t);var i,a=!1,r=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);return s.oncomplete=function(){(a?o:n)(r)},s.onabort=n,s.onerror=n,i=s.objectStore(this.storeName).clear(),i.onsuccess=function(e){a=!0,r=e.target.result},i.onerror=n,s},_addIdPropertyIfNeeded:function(e){void 0===e[this.keyPath]&&(e[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(t,e){return["keyPath","unique","multiEntry"].every(function(s){if("multiEntry"==s&&void 0===t[s]&&!1===e[s])return!0;if("keyPath"==s&&"[object Array]"==Object.prototype.toString.call(e[s])){var i,a,o=e.keyPath,n=t.keyPath;if("string"==typeof n)return o.toString()==n;if("function"!=typeof n.contains&&"function"!=typeof n.indexOf)return!1;if(n.length!==o.length)return!1;for(i=0,a=o.length;i<a;i++)if(!(n.contains&&n.contains(o[i])||n.indexOf(-1!==o[i])))return!1;return!0}return e[s]==t[s]})},iterate:function(l,t){o="desc"==(t=i({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:e,limit:1/0,offset:0,allowItemRejection:!1},t||{})).order.toLowerCase()?"PREV":"NEXT",t.filterDuplicates&&(o+="_NO_DUPLICATE");var s,o,c,a=!1,n=this.db.transaction([this.storeName],this.consts[t.writeAccess?"READ_WRITE":"READ_ONLY"]),r=n.objectStore(this.storeName);return t.index&&(r=r.index(t.index)),s=0,n.oncomplete=function(){a?t.onEnd?t.onEnd():l(null):t.onError(null)},n.onabort=t.onError,n.onerror=t.onError,c=r.openCursor(t.keyRange,this.consts[o]),c.onerror=t.onError,c.onsuccess=function(i){var o,e=i.target.result;e?t.offset?(e.advance(t.offset),t.offset=0):(o=l(e.value,e,n),t.allowItemRejection&&!1===o||s++,t.autoContinue&&(s+t.offset<t.limit?e.continue():a=!0)):a=!0},n},query:function(s,e){var t=[],n=0;return(e=e||{}).autoContinue=!0,e.writeAccess=!1,e.allowItemRejection=!!e.filter,e.onEnd=function(){s(t,n)},this.iterate(function(s){n++;var o=!e.filter||e.filter(s);return!1!==o&&t.push(s),o},e)},count:function(l,t){var s,a,o=(t=i({index:null,keyRange:null},t||{})).onError||e,r=!1,c=null,n=this.db.transaction([this.storeName],this.consts.READ_ONLY);return n.oncomplete=function(){(r?l:o)(c)},n.onabort=o,n.onerror=o,s=n.objectStore(this.storeName),t.index&&(s=s.index(t.index)),a=s.count(t.keyRange),a.onsuccess=function(e){r=!0,c=e.target.result},a.onError=o,n},makeKeyRange:function(e){var t,n=void 0!==e.lower,s=void 0!==e.upper;switch(!0){case void 0!==e.only:t=this.keyRange.only(e.only);break;case n&&s:t=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case n:t=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case s:t=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return t}},a={};function i(t,s){var e,n;for(e in s)(n=s[e])!==a[e]&&n!==t[e]&&(t[e]=n);return t}return n.prototype=o,n.version=o.version,n})?e.call(n,o,n,t):e)||(t.exports=s)}()},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(t,e){!function(){return function a(e,t,s){function o(n,d){if(!t[n]){if(!e[n]){var r,c,l="function"==typeof require&&require;if(!d&&l)return l(n,!0);if(i)return i(n,!0);throw c=new Error("Cannot find module '"+n+"'"),c.code="MODULE_NOT_FOUND",c}r=t[n]={exports:{}},e[n][0].call(r.exports,function(t){return o(e[n][1][t]||t)},r,r.exports,a,e,t,s)}return t[n].exports}for(var i="function"==typeof require&&require,n=0;n<s.length;n++)o(s[n]);return o}}()({1:[function(t){e.Buffer=t("buffer").Buffer},{buffer:3}],2:[function(l,d,o){"use strict";o.byteLength=function(n){var e=i(n),s=e[0],t=e[1];return 3*(s+t)/4-t},o.toByteArray=function(n){var t,s,d=i(n),l=d[0],c=d[1],o=new a(function(n,t,e){return 3*(t+e)/4-e}(0,l,c)),r=0,u=c>0?l-4:l;for(t=0;t<u;t+=4)s=e[n.charCodeAt(t)]<<18|e[n.charCodeAt(t+1)]<<12|e[n.charCodeAt(t+2)]<<6|e[n.charCodeAt(t+3)],o[r++]=s>>16&255,o[r++]=s>>8&255,o[r++]=255&s;return 2===c&&(s=e[n.charCodeAt(t)]<<2|e[n.charCodeAt(t+1)]>>4,o[r++]=255&s),1===c&&(s=e[n.charCodeAt(t)]<<10|e[n.charCodeAt(t+1)]<<4|e[n.charCodeAt(t+2)]>>2,o[r++]=s>>8&255,o[r++]=255&s),o},o.fromByteArray=function(n){for(var e,s=n.length,a=s%3,i=[],o=0,r=s-a;o<r;o+=16383)i.push(c(n,o,o+16383>r?r:o+16383));return 1===a?(e=n[s-1],i.push(t[e>>2]+t[e<<4&63]+"==")):2===a&&(e=(n[s-2]<<8)+n[s-1],i.push(t[e>>10]+t[e>>4&63]+t[e<<2&63]+"=")),i.join("")};for(var t=[],e=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,r=s.length;n<r;++n)t[n]=s[n],e[s.charCodeAt(n)]=n;function i(n){var e,t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return e=n.indexOf("="),-1===e&&(e=t),[e,e===t?0:4-e%4]}function c(s,a,r){for(var n,o,i=[],e=a;e<r;e+=3)o=(s[e]<<16&16711680)+(s[e+1]<<8&65280)+(255&s[e+2]),i.push(t[(n=o)>>18&63]+t[n>>12&63]+t[n>>6&63]+t[63&n]);return i.join("")}e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63},{}],3:[function(t,n,e){(function(){(function(){"use strict";var l,g,x,u=t("base64-js"),c=t("ieee754");e.Buffer=n,e.SlowBuffer=function(e){return+e!=e&&(e=0),n.alloc(+e)},e.INSPECT_MAX_BYTES=50,l=2147483647;function i(e){if(e>l)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=n.prototype,t}function n(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return j(e,t,n)}function j(e,t,s){if("string"==typeof e)return function(s,e){if("string"==typeof e&&""!==e||(e="utf8"),!n.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var o=0|w(s,e),t=i(o),a=t.write(s,e);return a!==o&&(t=t.slice(0,a)),t}(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(r(e,ArrayBuffer)||e&&r(e.buffer,ArrayBuffer))return function(t,e,s){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(s||0))throw new RangeError('"length" is outside of buffer bounds');var o=void 0===e&&void 0===s?new Uint8Array(t):void 0===s?new Uint8Array(t,e):new Uint8Array(t,e,s);return o.__proto__=n.prototype,o}(e,t,s);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var a,o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return n.from(o,t,s);if(a=function(e){if(n.isBuffer(e)){var s=0|m(e.length),t=i(s);return 0===t.length?t:(e.copy(t,0,0,s),t)}if(void 0!==e.length)return"number"!=typeof e.length||v(e.length)?i(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e),a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return n.from(e[Symbol.toPrimitive]("string"),t,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function y(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return y(e),i(e<0?0:0|m(e))}function f(t){for(var n=t.length<0?0:0|m(t.length),s=i(n),e=0;e<n;e+=1)s[e]=255&t[e];return s}function m(e){if(e>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|e}function w(e,s){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||r(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var o,t=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===t)return 0;for(o=!1;;)switch(s){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return h(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return _(e).length;default:if(o)return i?-1:h(e).length;s=(""+s).toLowerCase(),o=!0}}function a(e,t,n){var s=e[t];e[t]=e[n],e[n]=s}function A(s,t,e,i,o){if(0===s.length)return-1;if("string"==typeof e?(i=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),v(e=+e)&&(e=o?0:s.length-1),e<0&&(e=s.length+e),e>=s.length){if(o)return-1;e=s.length-1}else if(e<0){if(!o)return-1;e=0}if("string"==typeof t&&(t=n.from(t,i)),n.isBuffer(t))return 0===t.length?-1:b(s,t,e,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(s,t,e):Uint8Array.prototype.lastIndexOf.call(s,t,e):b(s,[t],e,i,o);throw new TypeError("val must be string, number or Buffer")}function b(d,c,i,n,h){var e,t,s,u,a=1,r=d.length,o=c.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(d.length<2||c.length<2)return-1;a=2,r/=2,o/=2,i/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(h){t=-1;for(e=i;e<r;e++)if(l(d,e)===l(c,-1===t?0:e-t)){if(-1===t&&(t=e),e-t+1===o)return t*a}else-1!==t&&(e-=e-t),t=-1}else for(i+o>r&&(i=r-o),e=i;e>=0;e--){for(u=!0,s=0;s<o;s++)if(l(d,e+s)!==l(c,s)){u=!1;break}if(u)return e}return-1}function D(a,r,n,e){n=Number(n)||0;var t,s,i,o=a.length-n;e?(e=Number(e))>o&&(e=o):e=o,i=r.length,e>i/2&&(e=i/2);for(t=0;t<e;++t){if(s=parseInt(r.substr(2*t,2),16),v(s))return t;a[n+t]=s}return t}function R(e,n,t,s){return d(h(n,e.length-t),e,t,s)}function S(e,t,n,s){return d(function(t){for(var n=[],e=0;e<t.length;++e)n.push(255&t.charCodeAt(e));return n}(t),e,n,s)}function H(e,t,n,s){return S(e,t,n,s)}function P(e,t,n,s){return d(_(t),e,n,s)}function I(e,n,t,s){return d(function(i,a){for(var t,s,o,n=[],e=0;e<i.length&&!((a-=2)<0);++e)t=i.charCodeAt(e),s=t>>8,o=t%256,n.push(o),n.push(s);return n}(n,e.length-t),e,t,s)}function L(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function O(s,u,r){r=Math.min(s.length,r);for(c=[],t=u;t<r;){var t,n,i,a,c,d,o=s[t],e=null,l=o>239?4:o>223?3:o>191?2:1;if(t+l<=r)switch(l){case 1:o<128&&(e=o);break;case 2:128==(192&(i=s[t+1]))&&(n=(31&o)<<6|63&i)>127&&(e=n);break;case 3:i=s[t+1],a=s[t+2],128==(192&i)&&128==(192&a)&&(n=(15&o)<<12|(63&i)<<6|63&a)>2047&&(n<55296||n>57343)&&(e=n);break;case 4:i=s[t+1],a=s[t+2],d=s[t+3],128==(192&i)&&128==(192&a)&&128==(192&d)&&(n=(15&o)<<18|(63&i)<<12|(63&a)<<6|63&d)>65535&&n<1114112&&(e=n)}null===e?(e=65533,l=1):e>65535&&(e-=65536,c.push(e>>>10&1023|55296),e=56320|1023&e),c.push(e),t+=l}return function(e){if(t=e.length,t<=g)return String.fromCharCode.apply(String,e);for(var t,s="",n=0;n<t;)s+=String.fromCharCode.apply(String,e.slice(n,n+=g));return s}(c)}e.kMaxLength=l,n.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),n.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(e,t,n){return j(e,t,n)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(e,t,n){return function(e,t,n){return y(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},n.allocUnsafe=function(e){return p(e)},n.allocUnsafeSlow=function(e){return p(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==n.prototype},n.compare=function(e,t){if(r(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),r(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var o=e.length,i=t.length,s=0,a=Math.min(o,i);s<a;++s)if(e[s]!==t[s]){o=e[s],i=t[s];break}return o<i?-1:i<o?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(0===s.length)return n.alloc(0);if(void 0===o)for(o=0,e=0;e<s.length;++e)o+=s[e].length;var e,t,i=n.allocUnsafe(o),a=0;for(e=0;e<s.length;++e){if(t=s[e],r(t,Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,a),a+=t.length}return i},n.byteLength=w,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var e,t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(e=0;e<t;e+=2)a(this,e,e+1);return this},n.prototype.swap32=function(){var e,t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(e=0;e<t;e+=4)a(this,e,e+3),a(this,e+1,e+2);return this},n.prototype.swap64=function(){var e,t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(e=0;e<t;e+=8)a(this,e,e+7),a(this,e+1,e+6),a(this,e+2,e+5),a(this,e+3,e+4);return this},n.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):function(n,e,t){var s=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(e>>>=0))return"";for(n||(n="utf8");;)switch(n){case"hex":return F(this,e,t);case"utf8":case"utf-8":return O(this,e,t);case"ascii":return z(this,e,t);case"latin1":case"binary":return T(this,e,t);case"base64":return L(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),s=!0}}.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},n.prototype.compare=function(e,t,s,o,i){if(r(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),!n.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||s>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=s)return 0;if(o>=i)return-1;if(t>=s)return 1;if(this===e)return 0;for(var c=(i>>>=0)-(o>>>=0),l=(s>>>=0)-(t>>>=0),h=Math.min(c,l),d=this.slice(o,i),u=e.slice(t,s),a=0;a<h;++a)if(d[a]!==u[a]){c=d[a],l=u[a];break}return c<l?-1:l<c?1:0},n.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},n.prototype.indexOf=function(e,t,n){return A(this,e,t,n,!0)},n.prototype.lastIndexOf=function(e,t,n){return A(this,e,t,n,!1)},n.prototype.write=function(s,t,e,n){if(void 0===t)n="utf8",e=this.length,t=0;else if(void 0===e&&"string"==typeof t)n=t,e=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(e)?(e>>>=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var o,i=this.length-t;if((void 0===e||e>i)&&(e=i),s.length>0&&(e<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(o=!1;;)switch(n){case"hex":return D(this,s,t,e);case"utf8":case"utf-8":return R(this,s,t,e);case"ascii":return S(this,s,t,e);case"latin1":case"binary":return H(this,s,t,e);case"base64":return P(this,s,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,s,t,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},g=4096;function z(n,o,t){var e,s="";t=Math.min(n.length,t);for(e=o;e<t;++e)s+=String.fromCharCode(127&n[e]);return s}function T(n,o,t){var e,s="";t=Math.min(n.length,t);for(e=o;e<t;++e)s+=String.fromCharCode(n[e]);return s}function F(o,t,e){n=o.length,(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);for(var n,i="",s=t;s<e;++s)i+=N(o[s]);return i}function M(s,o,i){for(var t=s.slice(o,i),n="",e=0;e<t.length;e+=2)n+=String.fromCharCode(t[e]+256*t[e+1]);return n}function s(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function o(e,t,s,o,i,a){if(!n.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(s+o>e.length)throw new RangeError("Index out of range")}function k(t,s,e,n){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function E(n,t,e,s,o){return t=+t,e>>>=0,o||k(n,0,e,4),c.write(n,t,e,s,23,4),e+4}function C(n,t,e,s,o){return t=+t,e>>>=0,o||k(n,0,e,8),c.write(n,t,e,s,52,8),e+8}n.prototype.slice=function(t,e){var o,s=this.length;return(t=~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),(e=void 0===e?s:~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),e<t&&(e=t),o=this.subarray(t,e),o.__proto__=n.prototype,o},n.prototype.readUIntLE=function(e,t,a){e>>>=0,t>>>=0,a||s(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},n.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||s(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},n.prototype.readUInt8=function(e,t){return e>>>=0,t||s(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return e>>>=0,t||s(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return e>>>=0,t||s(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return e>>>=0,t||s(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return e>>>=0,t||s(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,a){e>>>=0,t>>>=0,a||s(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,a){e>>>=0,t>>>=0,a||s(e,t,this.length);for(var o=t,i=1,n=this[e+--o];o>0&&(i*=256);)n+=this[e+--o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},n.prototype.readInt8=function(e,t){return e>>>=0,t||s(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,n){e>>>=0,n||s(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},n.prototype.readInt16BE=function(e,n){e>>>=0,n||s(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},n.prototype.readInt32LE=function(e,t){return e>>>=0,t||s(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return e>>>=0,t||s(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return e>>>=0,t||s(e,4,this.length),c.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return e>>>=0,t||s(e,4,this.length),c.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return e>>>=0,t||s(e,8,this.length),c.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return e>>>=0,t||s(e,8,this.length),c.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,n,a){e=+e,t>>>=0,n>>>=0,a||o(this,e,t,n,Math.pow(2,8*n)-1,0);var s=1,i=0;for(this[t]=255&e;++i<n&&(s*=256);)this[t+i]=e/s&255;return t+n},n.prototype.writeUIntBE=function(e,t,n,a){e=+e,t>>>=0,n>>>=0,a||o(this,e,t,n,Math.pow(2,8*n)-1,0);var s=n-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+n},n.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,1,255,0),this[t]=255&e,t+1},n.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},n.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeIntLE=function(e,t,n,c){e=+e,t>>>=0,!c&&(s=Math.pow(2,8*n-1),o(this,e,t,n,s-1,-s));var s,i=0,r=1,a=0;for(this[t]=255&e;++i<n&&(r*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/r>>0)-a&255;return t+n},n.prototype.writeIntBE=function(e,t,n,c){e=+e,t>>>=0,!c&&(i=Math.pow(2,8*n-1),o(this,e,t,n,i-1,-i));var i,s=n-1,r=1,a=0;for(this[t+s]=255&e;--s>=0&&(r*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/r>>0)-a&255;return t+n},n.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},n.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||o(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeFloatLE=function(e,t,n){return E(this,e,t,!0,n)},n.prototype.writeFloatBE=function(e,t,n){return E(this,e,t,!1,n)},n.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},n.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},n.prototype.copy=function(o,s,t,e){if(!n.isBuffer(o))throw new TypeError("argument should be a Buffer");if(t||(t=0),e||0===e||(e=this.length),s>=o.length&&(s=o.length),s||(s=0),e>0&&e<t&&(e=t),e===t)return 0;if(0===o.length||0===this.length)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),o.length-s<e-t&&(e=o.length-s+t);var i,a=e-t;if(this===o&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(s,t,e);else if(this===o&&t<s&&s<e)for(i=a-1;i>=0;--i)o[i+s]=this[i+t];else Uint8Array.prototype.set.call(o,this.subarray(t,e),s);return a},n.prototype.fill=function(e,s,t,o){if("string"==typeof e){if("string"==typeof s?(o=s,s=0,t=this.length):"string"==typeof t&&(o=t,t=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!n.isEncoding(o))throw new TypeError("Unknown encoding: "+o);1===e.length&&(a=e.charCodeAt(0),("utf8"===o&&a<128||"latin1"===o)&&(e=a))}else"number"==typeof e&&(e&=255);if(s<0||this.length<s||this.length<t)throw new RangeError("Out of range index");if(t<=s)return this;if(s>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"==typeof e)for(i=s;i<t;++i)this[i]=e;else{var i,a,r=n.isBuffer(e)?e:n.from(e,o),c=r.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<t-s;++i)this[i+s]=r[i%c]}return this},x=/[^+/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function h(a,t){t=t||1/0;for(var e,i=a.length,s=null,n=[],o=0;o<i;++o){if((e=a.charCodeAt(o))>55295&&e<57344){if(!s){if(e>56319){(t-=3)>-1&&n.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=e;continue}if(e<56320){(t-=3)>-1&&n.push(239,191,189),s=e;continue}e=65536+(s-55296<<10|e-56320)}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,e<128){if((t-=1)<0)break;n.push(e)}else if(e<2048){if((t-=2)<0)break;n.push(e>>6|192,63&e|128)}else if(e<65536){if((t-=3)<0)break;n.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return n}function _(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(x,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function d(t,n,s,o){for(var e=0;e<o&&!(e+s>=n.length||e>=t.length);++e)n[e+s]=t[e];return e}function r(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function v(e){return e!=e}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":2,buffer:3,ieee754:4}],4:[function(t,n,e){e.read=function(c,r,h,i,u){var t,s,m=8*u-i-1,d=(1<<m)-1,l=d>>1,e=-7,n=h?u-1:0,a=h?-1:1,o=c[r+n];for(n+=a,t=o&(1<<-e)-1,o>>=-e,e+=m;e>0;t=256*t+c[r+n],n+=a,e-=8);for(s=t&(1<<-e)-1,t>>=-e,e+=i;e>0;s=256*s+c[r+n],n+=a,e-=8);if(0===t)t=1-l;else{if(t===d)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,i),t-=l}return(o?-1:1)*s*Math.pow(2,t-i)},e.write=function(l,t,u,f,n,m){var e,s,i,c=8*m-n-1,r=(1<<c)-1,o=r>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,a=f?0:m-1,d=f?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,e=r):(e=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-e))<1&&(e--,i*=2),(t+=e+o>=1?h/i:h*Math.pow(2,1-o))*i>=2&&(e++,i/=2),e+o>=r?(s=0,e=r):e+o>=1?(s=(t*i-1)*Math.pow(2,n),e+=o):(s=t*Math.pow(2,o-1)*Math.pow(2,n),e=0));n>=8;l[u+a]=255&s,a+=d,s/=256,n-=8);for(e=e<<n|s,c+=n;c>0;l[u+a]=255&e,a+=d,e/=256,c-=8);l[u+a-d]|=128*p}},{}]},{},[1])},function(e,n,t){e.exports=t(77)},function(t,e){e.encode=function(t){var n,e='';for(n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(o){for(var t,n={},s=o.split("&"),e=0,i=s.length;e<i;e++)t=s[e].split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return n}},function(e){e.exports=function(e,n){var t=function(){};t.prototype=n.prototype,e.prototype=new t,e.prototype.constructor=e}},function(n,e,t){(function(s){function o(){var t;try{t=e.storage.debug}catch(e){}return!t&&void 0!==s&&"env"in s&&(t=s.env.DEBUG),t}(e=n.exports=t(389)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){if(n=this.useColors,t[0]=(n?"%c":'')+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;s="color: "+this.color,t.splice(1,0,s,"color: inherit");var n,s,o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),t.splice(i,0,s)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(e){}},e.load=o,e.useColors=function(){return!!("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(o())}).call(this,t(49))},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(i){var e=1e3,t=60*e,n=60*t,s=24*n,a=365.25*s;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}i.exports=function(i,c){c=c||{};var r,l=typeof i;if("string"===l&&i.length>0)return function(i){if((i=String(i)).length>100)return;var o,r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(!r)return;switch(o=parseFloat(r[1]),(r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*a;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*n;case"minutes":case"minute":case"mins":case"min":case"m":return o*t;case"seconds":case"second":case"secs":case"sec":case"s":return o*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(i);if("number"===l&&!1===isNaN(i))return c.long?o(r=i,s,"day")||o(r,n,"hour")||o(r,t,"minute")||o(r,e,"second")||r+" ms":function(o){return o>=s?Math.round(o/s)+"d":o>=n?Math.round(o/n)+"h":o>=t?Math.round(o/t)+"m":o>=e?Math.round(o/e)+"s":o+"ms"}(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}},function(h,e,n){var c,s=n(375)("socket.io-parser"),u=n(50),i=n(377),d=n(147);function r(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=t,c=e.ERROR+'"encode error"';function l(t){var o,n=''+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){if(o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(t.data),!1===o)return c;n+=o}return s("encoded %j as %s",t,n),n}function t(){this.reconstructor=null}function o(e){this.reconPack=e,this.buffers=[]}function a(t){return{type:e.ERROR,data:"parser error: "+t}}r.prototype.encode=function(t,n){s("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?function(e,t){i.removeBlobs(e,function(s){var e=i.deconstructPacket(s),o=l(e.packet),n=e.buffers;n.unshift(o),t(n)})}(t,n):n([l(t)])},u(t.prototype),t.prototype.add=function(n){var t;if("string"==typeof n)t=function(o){var i,r,c,l,t=0,n={type:Number(o.charAt(0))};if(null==e.types[n.type])return a("unknown packet type "+n.type);if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(i='';"-"!==o.charAt(++t)&&(i+=o.charAt(t),t!=o.length););if(i!=Number(i)||"-"!==o.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===o.charAt(t+1)){for(n.nsp='';++t;){if(","===(r=o.charAt(t)))break;if(n.nsp+=r,t===o.length)break}}else n.nsp="/";if(c=o.charAt(t+1),''!==c&&Number(c)==c){for(n.id='';++t;){if(null==(r=o.charAt(t))||Number(r)!=r){--t;break}if(n.id+=o.charAt(t),t===o.length)break}n.id=Number(n.id)}if(o.charAt(++t)){if(l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(o.substr(t)),!1===l||n.type!==e.ERROR&&!Array.isArray(l))return a("invalid payload");n.data=l}return s("decoded %s as %j",o,n),n}(n),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type?(this.reconstructor=new o(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!d(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(n))&&(this.reconstructor=null,this.emit("decoded",t))}},t.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},o.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},o.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,s,t){var n=t(380);e.exports=function(e){var t=e.xdomain,s=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!s&&o)return new XDomainRequest}catch(e){}if(!t)try{return new self[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}},function(n,i,t){var s=t(51),o=t(50);function e(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState='',this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}n.exports=e,o(e.prototype),e.prototype.onError=function(t,n){var e=new Error(t);return e.type="TransportError",e.description=n,this.emit("error",e),this},e.prototype.open=function(){return"closed"!==this.readyState&&''!==this.readyState||(this.readyState="opening",this.doOpen()),this},e.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},e.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},e.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},e.prototype.onData=function(e){var t=s.decodePacket(e,this.socket.binaryType);this.onPacket(t)},e.prototype.onPacket=function(e){this.emit("packet",e)},e.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){(function(n){var s,o,i=[];void 0===(o="function"==typeof(s=function(){'use strict';function i(t,n,s){var e=new XMLHttpRequest;e.open("GET",t),e.responseType="blob",e.onload=function(){o(e.response,n,s)},e.onerror=function(){console.error("could not download file")},e.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(e){}return 200<=e.status&&299>=e.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,o=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype?function(n,o,c){var r=t.URL||t.webkitURL,e=document.createElement("a");o=o||n.name||"download",e.download=o,e.rel="noopener","string"==typeof n?(e.href=n,e.origin===location.origin?s(e):a(e.href)?i(n,o,c):s(e,e.target="_blank")):(e.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(e.href)},4e4),setTimeout(function(){s(e)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,o){if(t=t||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(e,o),t);else if(a(e))i(e,t,o);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){s(n)})}}:function(n,d,u,e){if((e=e||open('',"_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),"string"==typeof n)return i(n,d,u);var s,o,a,c="application/octet-stream"===n.type,l=/constructor/i.test(t.HTMLElement)||t.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);(r||c&&l)&&"object"==typeof FileReader?(s=new FileReader,s.onloadend=function(){var t=s.result,t=r?t:t.replace(/^data:[^;]*;/,"data:attachment/file;");e?e.location.href=t:location=t,e=null},s.readAsDataURL(n)):(a=t.URL||t.webkitURL,o=a.createObjectURL(n),e?e.location=o:location.href=o,e=null,setTimeout(function(){a.revokeObjectURL(o)},4e4))});t.saveAs=o.saveAs=o,e.exports=o})?s.apply(t,i):s)||(e.exports=o)}).call(this,n(31))},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e){(function(t){e.exports=t}).call(this,{})},function(e){var t=/^(?:(?![^:@]+:[^:@/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var r=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var c=t.exec(e||''),s={},a=14;a--;)s[n[a]]=c[a]||'';return-1!=o&&-1!=i&&(s.source=r,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[",'').replace("]",'').replace(/;/g,":"),s.ipv6uri=!0),s}},null,function(e,n,t){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||s&&(e instanceof ArrayBuffer||o(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,s="function"==typeof ArrayBuffer,o=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,t(73).Buffer)},function(h,m,n){var c=n(378),l=n(154),r=n(50),u=n(105),s=n(155),o=n(156),t=n(74)("socket.io-client:manager"),i=n(153),d=n(394),a=Object.prototype.hasOwnProperty;function e(n,t){if(!(this instanceof e))return new e(n,t);n&&"object"==typeof n&&(t=n,n=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=n,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var s=t.parser||u;this.encoder=new s["Encoder"],this.decoder=new s.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}h.exports=e,e.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)a.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},e.prototype.updateSocketIds=function(){for(var e in this.nsps)a.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},e.prototype.generateId=function(e){return("/"===e?'':e+"#")+this.engine.id},r(e.prototype),e.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},e.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},e.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},e.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},e.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},e.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},e.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},e.prototype.open=e.prototype.connect=function(i){if(t("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;t("opening %s",this.uri),this.engine=c(this.uri,this.opts);var n,a,r,l,o=this.engine,e=this;return this.readyState="opening",this.skipReconnect=!1,a=s(o,"open",function(){e.onopen(),i&&i()}),l=s(o,"error",function(n){if(t("connect_error"),e.cleanup(),e.readyState="closed",e.emitAll("connect_error",n),i){var s=new Error("Connection error");s.data=n,i(s)}else e.maybeReconnectOnOpen()}),!1!==this._timeout&&(n=this._timeout,t("connect attempt will timeout after %d",n),r=setTimeout(function(){t("connect attempt timed out after %d",n),a.destroy(),o.close(),o.emit("error","timeout"),e.emitAll("connect_timeout",n)},n),this.subs.push({destroy:function(){clearTimeout(r)}})),this.subs.push(a),this.subs.push(l),this},e.prototype.onopen=function(){t("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",o(this,"ondata"))),this.subs.push(s(e,"ping",o(this,"onping"))),this.subs.push(s(e,"pong",o(this,"onpong"))),this.subs.push(s(e,"error",o(this,"onerror"))),this.subs.push(s(e,"close",o(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",o(this,"ondecoded")))},e.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},e.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},e.prototype.ondata=function(e){this.decoder.add(e)},e.prototype.ondecoded=function(e){this.emit("packet",e)},e.prototype.onerror=function(e){t("error",e),this.emitAll("error",e)},e.prototype.socket=function(t,o){var n,e=this.nsps[t];e||(e=new l(this,t,o),this.nsps[t]=e,n=this,e.on("connecting",s),e.on("connect",function(){e.id=n.generateId(t)}),this.autoConnect&&s());function s(){~i(n.connecting,e)||n.connecting.push(e)}return e},e.prototype.destroy=function(t){var e=i(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},e.prototype.packet=function(e){t("writing packet %j",e);var n=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),n.encoding?n.packetBuffer.push(e):(n.encoding=!0,this.encoder.encode(e,function(s){for(var t=0;t<s.length;t++)n.engine.write(s[t],e.options);n.encoding=!1,n.processPacketQueue()}))},e.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},e.prototype.cleanup=function(){t("cleanup");for(var n=this.subs.length,e=0;e<n;e++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},e.prototype.close=e.prototype.disconnect=function(){t("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},e.prototype.onclose=function(e){t("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},e.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var n,s,e=this;this.backoff.attempts>=this._reconnectionAttempts?(t("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(n=this.backoff.duration(),t("will wait %dms before reconnect attempt",n),this.reconnecting=!0,s=setTimeout(function(){e.skipReconnect||(t("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(n){n?(t("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",n.data)):(t("reconnect success"),e.onreconnect())}))},n),this.subs.push({destroy:function(){clearTimeout(s)}}))},e.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(a,t,e){var s=e(106),o=e(381),i=e(390),n=e(391);t.polling=function(e){var t,n,a=!1,r=!1,c=!1!==e.jsonp;if("undefined"!=typeof location&&(n="https:"===location.protocol,t=location.port,t||(t=n?443:80),a=e.hostname!==location.hostname||t!==e.port,r=e.secure!==n),e.xdomain=a,e.xscheme=r,"open"in new s(e)&&!e.forceJSONP)return new o(e);if(!c)throw new Error("JSONP disabled");return new i(e)},t.websocket=n},function(a,d,n){var i,s=n(107),l=n(75),o=n(51),c=n(76),r=n(152),e=n(77)("engine.io-client:polling");a.exports=t,i=null!=new(n(106))({xdomain:!1}).responseType;function t(e){var t=e&&e.forceBase64;i&&!t||(this.supportsBinary=!1),s.call(this,e)}c(t,s),t.prototype.name="polling",t.prototype.doOpen=function(){this.poll()},t.prototype.pause=function(s){var t,o=this;function n(){e("paused"),o.readyState="paused",s()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(e("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){e("pre-pause polling complete"),--t||n()})),this.writable||(e("we are currently writing - waiting to pause"),t++,this.once("drain",function(){e("pre-pause writing complete"),--t||n()}))):n()},t.prototype.poll=function(){e("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},t.prototype.onData=function(n){var t=this;e("polling got data %s",n),o.decodePayload(n,this.socket.binaryType,function(e){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():e('ignoring poll - transport state "%s"',this.readyState))},t.prototype.doClose=function(){var n=this;function t(){e("writing close packet"),n.write([{type:"close"}])}"open"===this.readyState?(e("transport open - closing"),t()):(e("transport not open - deferring close"),this.once("open",t))},t.prototype.write=function(n){var t,e=this;this.writable=!1,t=function(){e.writable=!0,e.emit("drain")},o.encodePayload(n,this.supportsBinary,function(n){e.doWrite(n,t)})},t.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n='';return!1!==this.timestampRequests&&(e[this.timestampParam]=r()),this.supportsBinary||e.sid||(e.b64=1),e=l.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,n,t){(function(t){var n=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);e.exports=function n(e){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(var a,i=0,r=e.length;i<r;i++)if(n(e[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||s&&e instanceof Blob||o&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return n(e.toJSON(),!0);for(a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&n(e[a]))return!0;return!1}}).call(this,t(73).Buffer)},function(c){'use strict';var a,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(''),t=64,o={},i=0,e=0;function n(e){var n='';do n=r[e%t]+n,e=Math.floor(e/t);while(e>0)return n}function s(){var e=n(+new Date);return e!==a?(i=0,a=e):e+"."+n(i++)}for(;e<t;e++)o[r[e]]=e;s.encode=n,s.decode=function(s){var n=0;for(e=0;e<s.length;e++)n=n*t+o[s.charAt(e)];return n},c.exports=s},function(e){var t=[].indexOf;e.exports=function(n,s){if(t)return n.indexOf(s);for(var e=0;e<n.length;++e)if(n[e]===s)return e;return-1}},function(h,m,s){var o,d,t=s(105),c=s(50),i=s(393),a=s(155),r=s(156),n=s(74)("socket.io-client:socket"),u=s(75),l=s(151);h.exports=e,d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},o=c.prototype.emit;function e(t,n,e){this.io=t,this.nsp=n,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},e&&e.query&&(this.query=e.query),this.io.autoConnect&&this.open()}c(e.prototype),e.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",r(this,"onopen")),a(e,"packet",r(this,"onpacket")),a(e,"close",r(this,"onclose"))]}},e.prototype.open=e.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},e.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},e.prototype.emit=function(a){if(d.hasOwnProperty(a))return o.apply(this,arguments),this;var e=i(arguments),s={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?t.BINARY_EVENT:t.EVENT,data:e,options:{}};return s.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(n("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),s.id=this.ids++),this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this},e.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},e.prototype.onopen=function(){if(n("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?u.encode(this.query):this.query;n("sending connect packet with query %s",e),this.packet({type:t.CONNECT,query:e})}else this.packet({type:t.CONNECT})},e.prototype.onclose=function(e){n("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},e.prototype.onpacket=function(e){var n=e.nsp===this.nsp,s=e.type===t.ERROR&&"/"===e.nsp;if(n||s)switch(e.type){case t.CONNECT:this.onconnect();break;case t.EVENT:case t.BINARY_EVENT:this.onevent(e);break;case t.ACK:case t.BINARY_ACK:this.onack(e);break;case t.DISCONNECT:this.ondisconnect();break;case t.ERROR:this.emit("error",e.data)}},e.prototype.onevent=function(t){var e=t.data||[];n("emitting event %j",e),null!=t.id&&(n("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?o.apply(this,e):this.receiveBuffer.push(e)},e.prototype.ack=function(s){var o=this,e=!1;return function(){if(!e){e=!0;var a=i(arguments);n("sending ack %j",a),o.packet({type:l(a)?t.BINARY_ACK:t.ACK,id:s,data:a})}}},e.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(n("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):n("bad ack %s",e.id)},e.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},e.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)o.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},e.prototype.ondisconnect=function(){n("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},e.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},e.prototype.close=e.prototype.disconnect=function(){return this.connected&&(n("performing disconnect (%s)",this.nsp),this.packet({type:t.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},e.prototype.compress=function(e){return this.flags.compress=e,this},e.prototype.binary=function(e){return this.flags.binary=e,this}},function(e){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(t){var e=[].slice;t.exports=function(n,t){if("string"==typeof t&&(t=n[t]),"function"!=typeof t)throw new Error("bind() requires a function");var s=e.call(arguments,2);return function(){return t.apply(n,s.concat(e.call(arguments)))}}},function(e,n){var t;!function(){'use strict';var o={}.hasOwnProperty;function s(){for(var e,n,i,t=[],a=0;a<arguments.length;a++)if(e=arguments[a],e)if(n=typeof e,"string"===n||"number"===n)t.push(this&&this[e]||e);else if(Array.isArray(e))t.push(s.apply(this,e));else if("object"===n)for(i in e)o.call(e,i)&&e[i]&&t.push(this&&this[i]||i);return t.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(t=function(){return s}.apply(n,[]))||(e.exports=t)}()},function(e){e.exports={'ejs-wrapper':"ejs--de6433374cb30211f10e148b320b2f",ejs:"ejs--7a5f920ceffb2913f6dbda780573cf",'ejs--full-ui':"ejs--f3a002bba9836fe4ebfed357a45521",'controls-tabs':"ejs--008adea3c1ef33a8fc94892a1e97e6",overlay:"ejs--85a95eb6bf74a40ab61b91a91e5bff",'key-setting-popup':"ejs--d169a219343bc32dd4aecc3f6b7f25",'loading-info':"ejs--782e3572812f983b3a150eec177391",p1:"ejs--c426dd1d179aa351e6cec47e1d9438",p2:"ejs--31e7e81db48819ee35ec6f50378a2e",p3:"ejs--20d4eb2646d396f558a645dc0574f1",p4:"ejs--4de05306c8b099bdeb4585571ac095",ejs__contextmenu:"ejs--c7957d8666bb6b8fc7c3e9c021aaf8",ad:"ejs--cbcfe0a1421cadac9a04c81d6431d6",'close-ad':"ejs--f3a1903d935f6cf720d4a0498db62a",'start-game':"ejs--73f9b4e94a7a1fe74e11107d5ab2ef",pulse:"ejs--9bd947b3e6427453595f083d740a7c",ejs__control:"ejs--8732295ca5c4902a060d34706a8146",'ejs__tab-focus':"ejs--a83b6c705e103e81a7762d0ed5e64b",'ejs__control--pressed':"ejs--b1238136ec472a92297159882cf4b8",'icon--pressed':"ejs--ec731619062226d943da67f5d83009",'icon--not-pressed':"ejs--dc7068585e3d84fe0e676864c1439e",'label--pressed':"ejs--0c6561f9155750b0aeeed6da5da7bf",'label--not-pressed':"ejs--13d64e30c1333cc99391af48ddabaa",'ejs--video':"ejs--d5f430a99a1619b3434bf58e34a99c",ejs__controls:"ejs--1acedc5ed6816abe96dd27d910fd74",ejs__progress:"ejs--f1aa376719b564cae0e653157cde14",ejs__time:"ejs--90d2780f99bcc76fdb6b0378a7238e",ejs__menu:"ejs--c7bfb2d1b75a40fdaaf90624bea9e7",ejs__volume:"ejs--36ceeeec0df37a9cf4bbe05fa204ec",'ejs--hide-controls':"ejs--1b8cb7f2294b1eb5de5238daea3513",'ejs--fullscreen-enabled':"ejs--19409fe2057ab935a7e46abb5b4f49",ejs__tooltip:"ejs--74c6d4176d27e37a19d2e9e61de8f4",ejs__menu__container:"ejs--013213afedeeb6878089b1ca1b4e47",'ejs-popup':"ejs--c2532bfe04554193cc42b3be753700",'ejs__control--forward':"ejs--0b4cdb4057d1a4623e60836ccc6275",'ejs__control--back':"ejs--a7ad9de0cb0ca672b6703c50de7db9",ejs__menu__value:"ejs--f91e90fe7cabc875aff9a431bf5389",'ejs__tooltip--visible':"ejs--6ea27aa07e60d1d6e4c9782740028a",'ejs--menu-open':"ejs--da54136ccf8c6b0b16d98e8b8e8b88",'ejs__video-wrapper':"ejs--057800d021995e1347ec07cb748672",portrait:"ejs--64f1256f556fb94454b930cb3ea7f2",'game-started':"ejs--7da7949f602347007818e6d192eb23",ejs__progress__buffer:"ejs--f8d706413436fd119cf01aaf5a9d9d",'ejs--audio':"ejs--bd0222e58d71b0a304d6037dfcffd5",'ejs--loading':"ejs--2521e1257996f264de36e77cc9c5ee",ejs__dialogs:"ejs--d31688f864f56d6426ebbf2217d6ee",ejs__dialog:"ejs--5e71fd80268afbb1d588e40b993508",ejs__cache__container:"ejs--1e0f0672f67d0e96592314c9ed78b0",ejs__loading__container:"ejs--d7e6a6a8f38bfaa256fe5d709a8258",'ejs__load-state__container':"ejs--b183f581b5336c4908ad258d3e1cc7",ejs__screenRecord__container:"ejs--b183f581b5336cashrqd258d3e1cc7",ejs__netplay__container:"ejs--158ea9dd34e3e7af2d837f8b05babb",ejs__gamepad__container:"ejs--3f0897a8158ba363a0ee0afe4da7c5",'dialog-container':"ejs--38cc09882a55e98c76168dbe838aa0",'dialog-title':"ejs--b373c9d5029d49324fb8ac3ece96c1",'dialog-content':"ejs--a5e2629abb9a5bcbc8b2c1307922d2",'dialog-buttons':"ejs--580e3c22e63f8a1eb29694fd0b141b",'btn-cancel':"ejs--ad20569e1449d7b8e99e6465960456",'btn-reset':"ejs--ad20569e1449d7b8e99e6465963825",'btn-clear':"ejs--ad20569e1449d7b8e99e6468571053",tabs:"ejs--8e7922427f460a31935084b7acfb1a",active:"ejs--68d337c212ec6a5bc43125440d422b",'tabs-content':"ejs--31eb28817642bb1bfe0a2c422108bb",'tabs-panel':"ejs--f932566a0af5314da834324c901978",'button-container':"ejs--c233fb69cbef43078bc39e9d1efac8",'btn-submit':"ejs--bdb54e9fc47f9805b506b746e897bf",'btn-create-room':"ejs--67d03ee7480b871ad6507d6319a839",'btn-quit':"ejs--c2d931157456c1d438d40a2f66af2c",set:"ejs--6604c83041a275a78837c452a71dd8",'btn-join-room':"ejs--99150e15f962c63c689cadc81ef40d",'netplay-player-name':"ejs--71527b6509aa48afce3ce1a11c02f0",'netplay-player-name-input':"ejs--7ad35768e3f6b9faf97db01d5b60ae",'netplay-player-name-set':"ejs--9c403e5e107a3e4374ba244b636400",'netplay-roomlist':"ejs--d6a46533fa6e510a571af5c28b440a",'netplay-create-room':"ejs--57ca9b3853cc7de731483cfcc95a59",'netplay-room-name-input':"ejs--0885d5e25e19127b6b516014426a1b",'netplay-room-password-input':"ejs--25023d28756fdb9dfbbfb6dccb8677",'netplay-create-room-set':"ejs--75b3a8d35aacc6424ed7422fdeaaaa",'netplay-room':"ejs--eefdf28d69ed2d20f197308981bb61",'cheats-add':"ejs--9e670880bb57e824400fa00f09aaad",'cheats-list':"ejs--2b4e3c245b7b25dfdac5e09155a68e",'cheat-code-input':"ejs--572b0b3a0345a6b01b01a15a02842c",'cheat-name-input':"ejs--a7d7f80c8999469c991ea452a85dd9",ejs__widgets:"ejs--952c974392296e7f643d51db380157",ejs__widget:"ejs--0d7e216cf12ae73705b5d5bb0452fc",ejs__widget_controls_toggle:"ejs--666d4296310579687cf3cf3d2cf951",ejs__widget_netplay:"ejs--c0a5e71f6613caab66d6ae15a5a00f",'virtual-gamepad':"ejs--2440e3b831017ff8327c939e2a4413",top:"ejs--b8d8b771d0bbb94e2bbd03054f53fd",left:"ejs--c83d70cb63c933edc073c7fe92e32b",buttons:"ejs--6e7015634623fd6a82e6a7d3488c84",center:"ejs--49fa47c86a131e4ca8fb268bfdde89",right:"ejs--7d2b19f77fd0ccabf94dc1ca39ae18",touch:"ejs--d708d9d486f1eca73a593d5c09f8ad",modal:"ejs--eefec939452eb92fad035932d0f47c",modal__overlay:"ejs--f1f43b27384834c8c22c6f81d0c5ae",modal__container:"ejs--c4ee33766a01ed0356c3ec07898e96",modal__header:"ejs--a073f32023da1ced805c5f95a4e81c",modal__footer:"ejs--ed44f59bb8cd49177586b140658c6c",modal__title:"ejs--81470ba5e6a6d68014839ad4d9a977",modal__close:"ejs--c3c85789c2a7f56d8b26dba75b7e1f",modal__content:"ejs--db44f5520e6f4fd0dd34b478bb9ee8",modal__btn:"ejs--319bcec5dee9444e1a2a53d6503b7c",'modal__btn-primary':"ejs--eaf3c1cba25d415d92ac48d7db34dd",modal__errmsg:"ejs--940087708c06b6129ce2bfa45f1d89",'micromodal-slide':"ejs--bef295f3125e9ba83d4f3677264bae",'is-open':"ejs--60c17e0d149099f207b06f27edae6a",mmfadeIn:"ejs--9d7aa2bd5ee276be085e5b2a0bbc2e",mmslideIn:"ejs--8b069266f76099cc6bc220f6ea56cc",mmfadeOut:"ejs--184b7558ffeb569c1790654537477b",mmslideOut:"ejs--379a464ad0e66ea5fc601e5f2fd73e",'ejs-switch':"ejs--4c3e63d4005bd8a0468e9c74a35f62",'ejs-delete-cheat':"ejs--90bcdd71cd0d2307e9ee0dffa916da",'icon--exit-fullscreen':"ejs--2b3dd6e2e26c0f0dc4ac5779dedd5e",'ejs--fullscreen-fallback':"ejs--412041671de21945d3e028b6ae84c9",'ejs--no-transition':"ejs--33643265135cf89e6c0a0d9866d6f1",'ejs__sr-only':"ejs--6f0e996cd15e5fb6be0256918531d7",'ejs-fade-in':"ejs--7cadf43f3d9eb17c7e3c36de84973b"}},function(e,n){var t,s,o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a){"object"==i(n)&&void 0!==e?e.exports=a():(s=[],void 0===(o="function"==typeof(t=a)?t.apply(n,s):t)||(e.exports=o))}(function(){function o(){}function n(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=n.id,n.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function t(n,s){var e=this;return e.nipples=[],e.idles=[],e.actives=[],e.ids=[],e.pressureIntervals={},e.manager=n,e.id=t.id,t.id+=1,e.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1},e.config(s),"static"!==e.options.mode&&"semi"!==e.options.mode||(e.options.multitouch=!1),e.options.multitouch||(e.options.maxNumberOfNipples=1),e.updateBox(),e.prepareNipples(),e.bindings(),e.begin(),e.nipples}function s(s){var n,t=this;return t.ids={},t.index=0,t.collections=[],t.config(s),t.prepareCollections(),e.bindEvt(window,"resize",function(){clearTimeout(n),n=setTimeout(function(){var n,s=e.getScroll();t.collections.forEach(function(e){e.forEach(function(e){n=e.el.getBoundingClientRect(),e.position={x:s.x+n.left,y:s.y+n.top}})})},100)}),t.collections}var e,i,r,u=!!("ontouchstart"in window),l=!!window.PointerEvent,d=!!window.MSPointerEvent,c={start:"mousedown",move:"mousemove",end:"mouseup"},a={};return l?i={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:d?i={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:u?(i={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},a=c):i=c,e={distance:function(e,t){var n=t.x-e.x,s=t.y-e.y;return Math.sqrt(n*n+s*s)},angle:function(t,n){var s=n.x-t.x,o=n.y-t.y;return e.degrees(Math.atan2(o,s))},findCoord:function(s,o,t){var n={x:0,y:0};return t=e.radians(t),n.x=s.x-o*Math.cos(t),n.y=s.y-o*Math.sin(t),n},radians:function(e){return e*(Math.PI/180)},degrees:function(e){return e*(180/Math.PI)},bindEvt:function(e,i,s){for(var t,o=i.split(/[ ,]+/g),n=0;n<o.length;n+=1)t=o[n],e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent&&e.attachEvent(t,s)},unbindEvt:function(e,i,s){for(var t,o=i.split(/[ ,]+/g),n=0;n<o.length;n+=1)t=o[n],e.removeEventListener?e.removeEventListener(t,s):e.detachEvent&&e.detachEvent(t,s)},trigger:function(e,t,n){var s=new CustomEvent(t,n);e.dispatchEvent(s)},prepareEvent:function(e){return e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},getScroll:function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},applyPosition:function(t,e){e.top||e.right||e.bottom||e.left?(t.style.top=e.top,t.style.right=e.right,t.style.bottom=e.bottom,t.style.left=e.left):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getTransitionStyle:function(r,n,i){t=e.configStylePropertyObject(r);for(o in t)if(t.hasOwnProperty(o))if("string"==typeof n)t[o]=n+" "+i;else{for(var t,o,a='',s=0,c=n.length;s<c;s+=1)a+=n[s]+" "+i+", ";t[o]=a.slice(0,-2)}return t},getVendorStyle:function(s,o){var n,t=e.configStylePropertyObject(s);for(n in t)t.hasOwnProperty(n)&&(t[n]=o);return t},configStylePropertyObject:function(e){var t={};return t[e]='',["webkit","Moz","o"].forEach(function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=''}),t},extend:function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},safeExtend:function(t,s){var e,n={};for(e in t)t.hasOwnProperty(e)&&s.hasOwnProperty(e)?n[e]=s[e]:t.hasOwnProperty(e)&&(n[e]=t[e]);return n},map:function(e,n){if(e.length)for(var t=0,s=e.length;t<s;t+=1)n(e[t]);else n(e)}},o.prototype.on=function(o,i){var t,n,e=this,s=o.split(/[ ,]+/g);e._handlers_=e._handlers_||{};for(n=0;n<s.length;n+=1)t=s[n],e._handlers_[t]=e._handlers_[t]||[],e._handlers_[t].push(i);return e},o.prototype.off=function(t,n){var e=this;return e._handlers_=e._handlers_||{},void 0===t?e._handlers_={}:void 0===n?e._handlers_[t]=null:e._handlers_[t]&&e._handlers_[t].indexOf(n)>=0&&e._handlers_[t].splice(e._handlers_[t].indexOf(n),1),e},o.prototype.trigger=function(o,i){var t,n,e=this,s=o.split(/[ ,]+/g);e._handlers_=e._handlers_||{};for(n=0;n<s.length;n+=1)t=s[n],e._handlers_[t]&&e._handlers_[t].length&&e._handlers_[t].forEach(function(n){n.call(e,{type:t,target:e},i)})},o.prototype.config=function(n){var t=this;t.options=t.defaults||{},n&&(t.options=e.safeExtend(t.options,n))},o.prototype.bindEvt=function(s,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]?n["on"+t].apply(n,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},e.bindEvt(s,i[t],n._domHandlers_[t]),a[t]&&e.bindEvt(s,a[t],n._domHandlers_[t]),n},o.prototype.unbindEvt=function(s,t){var n=this;return n._domHandlers_=n._domHandlers_||{},e.unbindEvt(s,i[t],n._domHandlers_[t]),a[t]&&e.unbindEvt(s,a[t],n._domHandlers_[t]),delete n._domHandlers_[t],this},n.prototype=new o,n.constructor=n,n.id=0,n.prototype.buildEl=function(){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},n.prototype.stylize=function(){if(this.options.dataOnly)return this;var s=this.options.fadeTime+"ms",n=e.getVendorStyle("borderRadius","50%"),o=e.getTransitionStyle("transition","opacity",s),t={};return t.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},t.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},t.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},e.extend(t.el,o),e.extend(t.back,n),e.extend(t.front,n),this.applyStyles(t),this},n.prototype.applyStyles=function(t){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var n in t[e])this.ui[e].style[n]=t[e][n];return this},n.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},n.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},n.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},n.prototype.show=function(t){var e=this;return e.options.dataOnly?e:(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),"function"==typeof t&&t.call(this)},e.options.fadeTime),e)},n.prototype.hide=function(t){var e=this;return e.options.dataOnly?e:(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var n="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=n,"function"==typeof t&&t.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.options.restJoystick&&e.restPosition(),e)},n.prototype.restPosition=function(s){t=this,t.frontPosition={x:0,y:0};var t,n,i=t.options.fadeTime+"ms",o={};o.front=e.getTransitionStyle("transition",["top","left"],i),n={front:{}},n.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(o),t.applyStyles(n),t.restTimeout=setTimeout(function(){"function"==typeof s&&s.call(t),t.restCallback()},t.options.fadeTime)},n.prototype.restCallback=function(){var t=this,n={};n.front=e.getTransitionStyle("transition","none",''),t.applyStyles(n),t.trigger("rested",t.instance)},n.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},n.prototype.computeDirection=function(e){var t,s,o,a,r,c,n=e.angle.radian,i=Math.PI/4,l=Math.PI/2;if(n>i&&n<3*i&&!e.lockX?o="up":n>-i&&n<=i&&!e.lockY?o="left":n>3*-i&&n<=-i&&!e.lockX?o="down":e.lockY||(o="right"),e.lockY||(r=n>-l&&n<l?"left":"right"),e.lockX||(c=n>0?"up":"down"),e.force>this.options.threshold){a={};for(s in this.direction)this.direction.hasOwnProperty(s)&&(a[s]=this.direction[s]);t={};for(s in this.direction={x:r,y:c,angle:o},e.direction=this.direction,a)a[s]===this.direction[s]&&(t[s]=!0);if(t.x&&t.y&&t.angle)return e;t.x&&t.y||this.trigger("plain",e),t.x||this.trigger("plain:"+r,e),t.y||this.trigger("plain:"+c,e),t.angle||this.trigger("dir dir:"+o,e)}return e},t.prototype=new o,t.constructor=t,t.id=0,t.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(n){if(void 0===n)return t[0];for(var e=0,s=t.length;e<s;e+=1)if(t[e].identifier===n)return t[e];return!1}},t.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},t.prototype.begin=function(){var t,e=this,n=e.options;"static"===n.mode&&(t=e.createNipple(n.position,e.manager.getIdentifier()),t.add(),e.idles.push(t))},t.prototype.createNipple=function(t,d){var o,i,c,a=this,r=e.getScroll(),l={},s=a.options;return t.x&&t.y?l={x:t.x-(r.x+a.box.left),y:t.y-(r.y+a.box.top)}:(t.top||t.right||t.bottom||t.left)&&(i=document.createElement("DIV"),i.style.display="hidden",i.style.top=t.top,i.style.right=t.right,i.style.bottom=t.bottom,i.style.left=t.left,i.style.position="absolute",s.zone.appendChild(i),c=i.getBoundingClientRect(),s.zone.removeChild(i),l=t,t={x:c.left+r.x,y:c.top+r.y}),o=new n(a,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:d,position:t,zone:s.zone,frontPosition:{x:0,y:0}}),s.dataOnly||(e.applyPosition(o.ui.el,l),e.applyPosition(o.ui.front,o.frontPosition)),a.nipples.push(o),a.trigger("added "+o.identifier+":added",o),a.manager.trigger("added "+o.identifier+":added",o),a.bindNipple(o),o},t.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},t.prototype.bindNipple=function(e){var s,t=this,n=function(e,n){s=e.type+" "+n.id+":"+e.type,t.trigger(s,n)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)},t.prototype.pressureFn=function(t,n,s){var e=this,o=0;clearInterval(e.pressureIntervals[s]),e.pressureIntervals[s]=setInterval(function(){var s=t.force||t.pressure||t.webkitForce||0;s!==o&&(n.trigger("pressure",s),e.trigger("pressure "+n.identifier+":pressure",s),o=s)}.bind(e),100)},t.prototype.onstart=function(n){var t=this,s=t.options;return n=e.prepareEvent(n),t.updateBox(),e.map(n,function(e){t.actives.length<s.maxNumberOfNipples&&t.processOnStart(e)}),t.manager.bindDocument(),!1},t.prototype.processOnStart=function(s){var i,c,t=this,a=t.options,o=t.manager.getIdentifier(s),l=s.force||s.pressure||s.webkitForce||0,r={x:s.pageX,y:s.pageY},n=t.getOrCreate(o,r);if(n.identifier!==o&&t.manager.removeIdentifier(n.identifier),n.identifier=o,i=function(e){e.trigger("start",e),t.trigger("start "+e.id+":start",e),e.show(),l>0&&t.pressureFn(s,e,e.identifier),t.processOnMove(s)},(c=t.idles.indexOf(n))>=0&&t.idles.splice(c,1),t.actives.push(n),t.ids.push(n.identifier),"semi"!==a.mode)i(n);else{if(!(e.distance(r,n.position)<=a.catchDistance))return n.destroy(),void t.processOnStart(s);i(n)}return n},t.prototype.getOrCreate=function(n,s){var t,e=this,o=e.options;return/(semi|static)/.test(o.mode)?(t=e.idles[0])?(e.idles.splice(0,1),t):"semi"===o.mode?e.createNipple(s,n):(console.warn("Coudln't find the needed nipple."),!1):t=e.createNipple(s,n)},t.prototype.processOnMove=function(s){var o=this,i=o.options,l=o.manager.getIdentifier(s),t=o.nipples.get(l);if(!t)return console.error("Found zombie joystick with ID "+l),void o.manager.removeIdentifier(l);t.identifier=l;var c,d,u,h=t.options.size/2,n={x:s.pageX,y:s.pageY},r=e.distance(n,t.position),a=e.angle(n,t.position),m=e.radians(a),f=r/h;r>h&&(r=h,n=e.findCoord(t.position,r,a)),d=n.x-t.position.x,u=n.y-t.position.y,i.lockX&&(u=0),i.lockY&&(d=0),t.frontPosition={x:d,y:u},i.dataOnly||e.applyPosition(t.ui.front,t.frontPosition),c={identifier:t.identifier,position:n,force:f,pressure:s.force||s.pressure||s.webkitForce||0,distance:r,angle:{radian:m,degree:a},instance:t,lockX:i.lockX,lockY:i.lockY},(c=t.computeDirection(c)).angle={radian:e.radians(180-a),degree:180-a},t.trigger("move",c),o.trigger("move "+t.id+":move",c)},t.prototype.processOnEnd=function(o){var t=this,n=t.options,i=t.manager.getIdentifier(o),e=t.nipples.get(i),s=t.manager.removeIdentifier(e.identifier);e&&(n.dataOnly||e.hide(function(){"dynamic"===n.mode&&(e.trigger("removed",e),t.trigger("removed "+e.id+":removed",e),t.manager.trigger("removed "+e.id+":removed",e),e.destroy())}),clearInterval(t.pressureIntervals[e.identifier]),e.resetDirection(),e.trigger("end",e),t.trigger("end "+e.id+":end",e),t.ids.indexOf(e.identifier)>=0&&t.ids.splice(t.ids.indexOf(e.identifier),1),t.actives.indexOf(e)>=0&&t.actives.splice(t.actives.indexOf(e),1),/(semi|static)/.test(n.mode)?t.idles.push(e):t.nipples.indexOf(e)>=0&&t.nipples.splice(t.nipples.indexOf(e),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[s.id]=s.identifier))},t.prototype.onDestroyed=function(n,t){var e=this;e.nipples.indexOf(t)>=0&&e.nipples.splice(e.nipples.indexOf(t),1),e.actives.indexOf(t)>=0&&e.actives.splice(e.actives.indexOf(t),1),e.idles.indexOf(t)>=0&&e.idles.splice(e.idles.indexOf(t),1),e.ids.indexOf(t.identifier)>=0&&e.ids.splice(e.ids.indexOf(t.identifier),1),e.manager.removeIdentifier(t.identifier),e.manager.unbindDocument()},t.prototype.destroy=function(){var t,e=this;for(t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(e){e.destroy()}),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()},s.prototype=new o,s.constructor=s,s.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(n){var t;return e.collections.every(function(e){return!(t=e.get(n))}),t}},s.prototype.create=function(e){return this.createCollection(e)},s.prototype.createCollection=function(s){var e=this,n=new t(e,s);return e.bindCollection(n),e.collections.push(n),n},s.prototype.bindCollection=function(e){var s,t=this,n=function(e,n){s=e.type+" "+n.id+":"+e.type,t.trigger(s,n)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",n),e.on("dir:up dir:right dir:down dir:left",n),e.on("plain:up plain:right plain:down plain:left",n)},s.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},s.prototype.unbindDocument=function(t){var e=this;Object.keys(e.ids).length&&!0!==t||(e.unbindEvt(document,"move").unbindEvt(document,"end"),e.binded=!1)},s.prototype.getIdentifier=function(t){var e;return t?void 0===(e=void 0===t.identifier?t.pointerId:t.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},s.prototype.removeIdentifier=function(n){var e,t={};for(e in this.ids)if(this.ids[e]===n){t.id=e,t.identifier=this.ids[e],delete this.ids[e];break}return t},s.prototype.onmove=function(e){return this.onAny("move",e),!1},s.prototype.onend=function(e){return this.onAny("end",e),!1},s.prototype.oncancel=function(e){return this.onAny("end",e),!1},s.prototype.onAny=function(o,t){var n,i,s=this,a="processOn"+o.charAt(0).toUpperCase()+o.slice(1);return t=e.prepareEvent(t),i=function(e,n,t){t.ids.indexOf(n)>=0&&(t[a](e),e._found_=!0)},e.map(t,function(t){n=s.getIdentifier(t),e.map(s.collections,i.bind(null,t,n)),t._found_||s.removeIdentifier(n)}),!1},s.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(e){e.destroy()}),e.off()},s.prototype.onDestroyed=function(n,t){var e=this;if(e.collections.indexOf(t)<0)return!1;e.collections.splice(e.collections.indexOf(t),1)},r=new s,{create:function(e){return r.create(e)},factory:r}})},function(t,n,e){(function(s,i,n){var o;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){'use strict';var f="input is invalid type",p="object"===("undefined"==typeof window?"undefined":t(window)),d=p?window:{};d.JS_MD5_NO_WINDOW&&(p=!1),y=!p&&"object"===("undefined"==typeof self?"undefined":t(self)),g=!d.JS_MD5_NO_NODE_JS&&"object"===(void 0===s?"undefined":t(s))&&s.versions&&s.versions.node,g?d=i:y&&(d=self);var m,g,v,y,_,w=!d.JS_MD5_NO_COMMON_JS&&"object"===t(n)&&n.exports,E=e(144),u=!d.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(''),C=[128,32768,8388608,-2147483648],l=[0,8,16,24],j=["hex","array","digest","buffer","arrayBuffer","base64"],h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(''),r=[];u&&(v=new ArrayBuffer(68),_=new Uint8Array(v),r=new Uint32Array(v)),!d.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!u||!d.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===t(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var b=function(e){return function(t){return new c(!0).update(t)[e]()}},O=function(){var t,n,e=b("hex");g&&(e=x(e)),e.create=function(){return new c},e.update=function(t){return e.create().update(t)};for(t=0;t<j.length;++t)n=j[t],e[n]=b(n);return e},x=function(n){var e=require("crypto"),t=require("buffer").Buffer,s=function(s){if("string"==typeof s)return e.createHash("md5").update(s,"utf8").digest("hex");if(null==s)throw f;return s.constructor===ArrayBuffer&&(s=new Uint8Array(s)),Array.isArray(s)||ArrayBuffer.isView(s)||s.constructor===t?e.createHash("md5").update(new t(s)).digest("hex"):n(s)};return s};function c(t){if(t)r[0]=r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0,this.blocks=r,this.buffer8=_;else if(u){var e=new ArrayBuffer(68);this.buffer8=new Uint8Array(e),this.blocks=new Uint32Array(e)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}c.prototype.update=function(i){if(!this.finalized){if(c=t(i),"string"!==c){if("object"!==c)throw f;if(null===i)throw f;if(u&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!(Array.isArray(i)||u&&ArrayBuffer.isView(i)))throw f;d=!0}for(var e,n,c,d,o=0,r=i.length,s=this.blocks,a=this.buffer8;o<r;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),d)if(u)for(e=this.start;o<r&&e<64;++o)a[e++]=i[o];else for(e=this.start;o<r&&e<64;++o)s[e>>2]|=i[o]<<l[3&e++];else if(u)for(e=this.start;o<r&&e<64;++o)(n=i.charCodeAt(o))<128?a[e++]=n:n<2048?(a[e++]=192|n>>6,a[e++]=128|63&n):n<55296||n>=57344?(a[e++]=224|n>>12,a[e++]=128|n>>6&63,a[e++]=128|63&n):(n=65536+((1023&n)<<10|1023&i.charCodeAt(++o)),a[e++]=240|n>>18,a[e++]=128|n>>12&63,a[e++]=128|n>>6&63,a[e++]=128|63&n);else for(e=this.start;o<r&&e<64;++o)(n=i.charCodeAt(o))<128?s[e>>2]|=n<<l[3&e++]:n<2048?(s[e>>2]|=(192|n>>6)<<l[3&e++],s[e>>2]|=(128|63&n)<<l[3&e++]):n<55296||n>=57344?(s[e>>2]|=(224|n>>12)<<l[3&e++],s[e>>2]|=(128|n>>6&63)<<l[3&e++],s[e>>2]|=(128|63&n)<<l[3&e++]):(n=65536+((1023&n)<<10|1023&i.charCodeAt(++o)),s[e>>2]|=(240|n>>18)<<l[3&e++],s[e>>2]|=(128|n>>12&63)<<l[3&e++],s[e>>2]|=(128|n>>6&63)<<l[3&e++],s[e>>2]|=(128|63&n)<<l[3&e++]);this.lastByteIndex=e,this.bytes+=e-this.start,e>=64?(this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},c.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=C[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},c.prototype.hash=function(){var e,t,n,s,i,a,o=this.blocks;this.first?e=((e=((t=((t=o[0]-680876937)<<7|t>>>25)-271733879<<0)^(n=((n=(-271733879^(s=((s=(-1732584194^2004318071&t)+o[1]-117830708)<<12|s>>>20)+t<<0)&(-271733879^t))+o[2]-1126478375)<<17|n>>>15)+s<<0)&(s^t))+o[3]-1316259209)<<22|e>>>10)+n<<0:(t=this.h0,e=this.h1,n=this.h2,e=((e+=((t=((t+=((s=this.h3)^e&(n^s))+o[0]-680876936)<<7|t>>>25)+e<<0)^(n=((n+=(e^(s=((s+=(n^t&(e^n))+o[1]-389564586)<<12|s>>>20)+t<<0)&(t^e))+o[2]+606105819)<<17|n>>>15)+s<<0)&(s^t))+o[3]-1044525330)<<22|e>>>10)+n<<0),e=((e+=((t=((t+=(s^e&(n^s))+o[4]-176418897)<<7|t>>>25)+e<<0)^(n=((n+=(e^(s=((s+=(n^t&(e^n))+o[5]+1200080426)<<12|s>>>20)+t<<0)&(t^e))+o[6]-1473231341)<<17|n>>>15)+s<<0)&(s^t))+o[7]-45705983)<<22|e>>>10)+n<<0,e=((e+=((t=((t+=(s^e&(n^s))+o[8]+1770035416)<<7|t>>>25)+e<<0)^(n=((n+=(e^(s=((s+=(n^t&(e^n))+o[9]-1958414417)<<12|s>>>20)+t<<0)&(t^e))+o[10]-42063)<<17|n>>>15)+s<<0)&(s^t))+o[11]-1990404162)<<22|e>>>10)+n<<0,e=((e+=((t=((t+=(s^e&(n^s))+o[12]+1804603682)<<7|t>>>25)+e<<0)^(n=((n+=(e^(s=((s+=(n^t&(e^n))+o[13]-40341101)<<12|s>>>20)+t<<0)&(t^e))+o[14]-1502002290)<<17|n>>>15)+s<<0)&(s^t))+o[15]+1236535329)<<22|e>>>10)+n<<0,e=((e+=((s=((s+=(e^n&((t=((t+=(n^s&(e^n))+o[1]-165796510)<<5|t>>>27)+e<<0)^e))+o[6]-1069501632)<<9|s>>>23)+t<<0)^t&((n=((n+=(t^e&(s^t))+o[11]+643717713)<<14|n>>>18)+s<<0)^s))+o[0]-373897302)<<20|e>>>12)+n<<0,e=((e+=((s=((s+=(e^n&((t=((t+=(n^s&(e^n))+o[5]-701558691)<<5|t>>>27)+e<<0)^e))+o[10]+38016083)<<9|s>>>23)+t<<0)^t&((n=((n+=(t^e&(s^t))+o[15]-660478335)<<14|n>>>18)+s<<0)^s))+o[4]-405537848)<<20|e>>>12)+n<<0,e=((e+=((s=((s+=(e^n&((t=((t+=(n^s&(e^n))+o[9]+568446438)<<5|t>>>27)+e<<0)^e))+o[14]-1019803690)<<9|s>>>23)+t<<0)^t&((n=((n+=(t^e&(s^t))+o[3]-187363961)<<14|n>>>18)+s<<0)^s))+o[8]+1163531501)<<20|e>>>12)+n<<0,e=((e+=((s=((s+=(e^n&((t=((t+=(n^s&(e^n))+o[13]-1444681467)<<5|t>>>27)+e<<0)^e))+o[2]-51403784)<<9|s>>>23)+t<<0)^t&((n=((n+=(t^e&(s^t))+o[7]+1735328473)<<14|n>>>18)+s<<0)^s))+o[12]-1926607734)<<20|e>>>12)+n<<0,e=((e+=((a=(s=((s+=((i=e^n)^(t=((t+=(i^s)+o[5]-378558)<<4|t>>>28)+e<<0))+o[8]-2022574463)<<11|s>>>21)+t<<0)^t)^(n=((n+=(a^e)+o[11]+1839030562)<<16|n>>>16)+s<<0))+o[14]-35309556)<<23|e>>>9)+n<<0,e=((e+=((a=(s=((s+=((i=e^n)^(t=((t+=(i^s)+o[1]-1530992060)<<4|t>>>28)+e<<0))+o[4]+1272893353)<<11|s>>>21)+t<<0)^t)^(n=((n+=(a^e)+o[7]-155497632)<<16|n>>>16)+s<<0))+o[10]-1094730640)<<23|e>>>9)+n<<0,e=((e+=((a=(s=((s+=((i=e^n)^(t=((t+=(i^s)+o[13]+681279174)<<4|t>>>28)+e<<0))+o[0]-358537222)<<11|s>>>21)+t<<0)^t)^(n=((n+=(a^e)+o[3]-722521979)<<16|n>>>16)+s<<0))+o[6]+76029189)<<23|e>>>9)+n<<0,e=((e+=((a=(s=((s+=((i=e^n)^(t=((t+=(i^s)+o[9]-640364487)<<4|t>>>28)+e<<0))+o[12]-421815835)<<11|s>>>21)+t<<0)^t)^(n=((n+=(a^e)+o[15]+530742520)<<16|n>>>16)+s<<0))+o[2]-995338651)<<23|e>>>9)+n<<0,e=((e+=((s=((s+=(e^((t=((t+=(n^(e|~s))+o[0]-198630844)<<6|t>>>26)+e<<0)|~n))+o[7]+1126891415)<<10|s>>>22)+t<<0)^((n=((n+=(t^(s|~e))+o[14]-1416354905)<<15|n>>>17)+s<<0)|~t))+o[5]-57434055)<<21|e>>>11)+n<<0,e=((e+=((s=((s+=(e^((t=((t+=(n^(e|~s))+o[12]+1700485571)<<6|t>>>26)+e<<0)|~n))+o[3]-1894986606)<<10|s>>>22)+t<<0)^((n=((n+=(t^(s|~e))+o[10]-1051523)<<15|n>>>17)+s<<0)|~t))+o[1]-2054922799)<<21|e>>>11)+n<<0,e=((e+=((s=((s+=(e^((t=((t+=(n^(e|~s))+o[8]+1873313359)<<6|t>>>26)+e<<0)|~n))+o[15]-30611744)<<10|s>>>22)+t<<0)^((n=((n+=(t^(s|~e))+o[6]-1560198380)<<15|n>>>17)+s<<0)|~t))+o[13]+1309151649)<<21|e>>>11)+n<<0,e=((e+=((s=((s+=(e^((t=((t+=(n^(e|~s))+o[4]-145523070)<<6|t>>>26)+e<<0)|~n))+o[11]-1120210379)<<10|s>>>22)+t<<0)^((n=((n+=(t^(s|~e))+o[2]+718787259)<<15|n>>>17)+s<<0)|~t))+o[9]-343485551)<<21|e>>>11)+n<<0,this.first?(this.h0=t+1732584193<<0,this.h1=e-271733879<<0,this.h2=n-1732584194<<0,this.h3=s+271733878<<0,this.first=!1):(this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+s<<0)},c.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,s=this.h3;return a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15]+a[t>>4&15]+a[15&t]+a[t>>12&15]+a[t>>8&15]+a[t>>20&15]+a[t>>16&15]+a[t>>28&15]+a[t>>24&15]+a[n>>4&15]+a[15&n]+a[n>>12&15]+a[n>>8&15]+a[n>>20&15]+a[n>>16&15]+a[n>>28&15]+a[n>>24&15]+a[s>>4&15]+a[15&s]+a[s>>12&15]+a[s>>8&15]+a[s>>20&15]+a[s>>16&15]+a[s>>28&15]+a[s>>24&15]},c.prototype.toString=c.prototype.hex,c.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,s=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&s,s>>8&255,s>>16&255,s>>24&255]},c.prototype.array=c.prototype.digest,c.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(16),e=new Uint32Array(t);return e[0]=this.h0,e[1]=this.h1,e[2]=this.h2,e[3]=this.h3,t},c.prototype.buffer=c.prototype.arrayBuffer,c.prototype.base64=function(){for(var e,s,o,i='',n=this.array(),t=0;t<15;)e=n[t++],s=n[t++],o=n[t++],i+=h[e>>>2]+h[63&(e<<4|s>>>4)]+h[63&(s<<2|o>>>6)]+h[63&o];return e=n[t],i+=h[e>>>2]+h[e<<4&63]+"=="},m=O(),w?n.exports=m:(d.md5=m,E&&(o=function(){return m}.call(m,e,m,n),void 0===o||(n.exports=o)))}()}).call(this,e(49),e(31),e(143)(t))},function(n,t,e){'use strict';(function(g,s,o){p=e(52),a=e.n(p);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){var t,e=this,s=new _;e.chunks={},e.users={},e.readAsArrayBuffer=function(t,i,a){var o={file:t,earlyCallback:function(e){i(n(e,{currentPosition:-1}))},extra:a||{userid:0}};t.extra&&Object.keys(t.extra).length&&Object.keys(t.extra).forEach(function(e){o.extra[e]=t.extra[e]}),s.readAsArrayBuffer(e,o)},e.getNextChunk=function(s,a,o){void 0!==s.currentPosition&&(i=s.currentPosition,s=s.uuid);var t,i,r=e.chunks[s];if(r){if(void 0!==o?(e.users[o+'']||(e.users[o+'']={fileUUID:s,userid:o,currentPosition:-1}),void 0!==i&&(e.users[o+''].currentPosition=i),e.users[o+''].currentPosition++,i=e.users[o+''].currentPosition):(void 0!==i&&(e.chunks[s].currentPosition=i),e.chunks[s].currentPosition++,i=e.chunks[s].currentPosition),t=r[i],!t)return delete e.chunks[s],void e.convertToArrayBuffer({chunkMissing:!0,currentPosition:i,uuid:s},a);t=n(t),void 0!==o&&(t.remoteUserId=o+''),t.start&&e.onBegin(t),t.end&&e.onEnd(t),e.onProgress(t),e.convertToArrayBuffer(t,function(e){t.currentPosition!=t.maxChunks?a(e,!1):a(e,!0)})}},t=new b(e);function n(e,t){if(null==e||"object"!=i(e))return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e["constructor"](e);for(var s in t=t||new e["constructor"],e)t[s]=void 0===t[s]?n(e[s],null):t[s];return t}e.addChunk=function(n,s){n&&t.receive(n,function(t){e.convertToArrayBuffer({readyForNextChunk:!0,currentPosition:t.currentPosition,uuid:t.uuid},s)})},e.chunkMissing=function(e){delete t.chunks[e.uuid],delete t.chunksWaiters[e.uuid]},e.onBegin=function(){},e.onEnd=function(){},e.onProgress=function(){},e.convertToObject=d.ConvertToObject,e.convertToArrayBuffer=d.ConvertToArrayBuffer,e.setMultipleUsers=function(){}}function _(){this.readAsArrayBuffer=function(n,e){var t=e.earlyCallback;delete e.earlyCallback,function(r,l){l=l||function(e){postMessage(e)},e=r.file,e.uuid||(e.uuid=(100*Math.random()).toString().replace(/\./g,'')),n=r.chunkSize||15e3,r.extra&&r.extra.chunkSize&&(n=r.extra.chunkSize);var e,t,n,i,a,d,u,o=0,h=n,s=Math.floor(Math.min(1e8,h)/n)*n,c=Math.ceil(e.size/n);e.maxChunks=c,t=0,d=[],l({currentPosition:t,uuid:e.uuid,maxChunks:c,size:e.size,name:e.name,type:e.type,lastModifiedDate:(e.lastModifiedDate||new Date).toString(),start:!0}),a=new FileReader,a.onloadend=function(r){r.target.readyState==FileReader.DONE&&function(r,s,a){u=Math.ceil(s.byteLength/n);for(var i,o=0;o<u;o++)i=o*n,d[t]=s.slice(i,Math.min(i+n,s.byteLength)),l({uuid:e.uuid,buffer:d[t],currentPosition:t,maxChunks:c,size:e.size,name:e.name,lastModifiedDate:(e.lastModifiedDate||new Date).toString(),type:e.type}),t++;t==c&&!0,a()}(e.name,r.target.result,function(){(++o+1)*s<e.size?(i=e.slice(o*s,(o+1)*s),a.readAsArrayBuffer(i)):o*s<e.size?(i=e.slice(o*s,e.size),a.readAsArrayBuffer(i)):(e.url=URL.createObjectURL(e),l({currentPosition:t,uuid:e.uuid,maxChunks:c,size:e.size,name:e.name,lastModifiedDate:(e.lastModifiedDate||new Date).toString(),url:URL.createObjectURL(e),type:e.type,end:!0}))})},t+=1,i=e.slice(o*s,(o+1)*s),a.readAsArrayBuffer(i)}(e,function(s){n.chunks[s.uuid]||(n.chunks[s.uuid]={currentPosition:-1}),e.extra=e.extra||{userid:0},s.userid=e.userid||e.extra.userid||0,s.extra=e.extra,n.chunks[s.uuid][s.currentPosition]=s,s.end&&t&&(t(s.uuid),t=null),s.maxChunks>200&&200==s.currentPosition&&t&&(t(s.uuid),t=null)})}}function x(){var e=this,t=function(){};function n(s,o,i){s=s||function(){};var n=document.createElement("input");n.type="file",o&&(n.multiple=!0),i&&(n.webkitdirectory=!0),n.accept=e.accept,n.onclick=function(){n.clickStarted=!0},document.body.onfocus=function(){setTimeout(function(){n.clickStarted&&(n.clickStarted=!1,n.value||t())},500)},n.onchange=function(){if(o){if(!n.files.length)return void console.error("No file selected.");var e=[];return Array.from(n.files).forEach(function(t){t.url=t.webkitRelativePath,e.push(t)}),void s(e)}n.files[0]?(s(n.files[0]),n.parentNode.removeChild(n)):console.error("No file selected.")},n.style.display="none",(document.body||document.documentElement).appendChild(n),function(e){if("function"==typeof e.click)return void e.click();if("function"==typeof e.change)return void e.change();if(void 0!==document.createEvent("Event")&&"function"==typeof(t=document.createEvent("Event")).initEvent&&"function"==typeof e.dispatchEvent)return t.initEvent("click",!0,!0),void e.dispatchEvent(t);var t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});e.dispatchEvent(t)}(n)}e.selectSingleFile=function(s,e){e&&(t=e),n(s)},e.selectMultipleFiles=function(s,e){e&&(t=e),n(s,!0)},e.selectDirectory=function(s,e){e&&(t=e),n(s,!0,!0)},e.accept="*.*"}function b(t){var e=this;e.chunks={},e.chunksWaiters={},e.receive=function r(n,o){if(n.uuid){if(n.start&&!e.chunks[n.uuid]&&(e.chunks[n.uuid]={},t.onBegin&&t.onBegin(n)),!n.end&&n.buffer&&(e.chunks[n.uuid][n.currentPosition]=n.buffer),n.end){var s,i=e.chunks[n.uuid],a=[];Object.keys(i).forEach(function(e){a.push(i[e])}),s=new Blob(a,{type:n.type}),(s=f(s,n)).url=URL.createObjectURL(s),s.uuid=n.uuid,s.size||console.error("Something went wrong. Blob Size is 0."),t.onEnd&&t.onEnd(s),delete e.chunks[n.uuid],delete e.chunksWaiters[n.uuid]}n.buffer&&t.onProgress&&t.onProgress(n),n.end||(o(n),e.chunksWaiters[n.uuid]=function(){setTimeout(function t(){n.buffer&&e.chunks[n.uuid]&&(n.currentPosition==n.maxChunks||e.chunks[n.uuid][n.currentPosition]||(o(n),setTimeout(t,5e3)))},5e3)},e.chunksWaiters[n.uuid]())}else t.convertToObject(n,function(e){r(e)})}}d={ConvertToArrayBuffer:function(e,t){v.pack(e,function(e){t(e.buffer)})},ConvertToObject:function(e,t){v.unpack(e,t)}};function f(e,t){if(e||(e={}),!t)return e;for(var n in t)try{e[n]=t[n]}catch(e){}return e}var a,d,p,u=Uint8Array.BYTES_PER_ELEMENT,r=Uint16Array.BYTES_PER_ELEMENT,h=Uint32Array.BYTES_PER_ELEMENT,n={NULL:0,UNDEFINED:1,STRING:2,NUMBER:3,BOOLEAN:4,ARRAY:5,OBJECT:6,INT8ARRAY:7,INT16ARRAY:8,INT32ARRAY:9,UINT8ARRAY:10,UINT16ARRAY:11,UINT32ARRAY:12,FLOAT32ARRAY:13,FLOAT64ARRAY:14,ARRAYBUFFER:15,BLOB:16,FILE:16,BUFFER:17},c=[null,null,"Uint16","Float64","Uint8",null,null,"Int8","Int16","Int32","Uint8","Uint16","Uint32","Float32","Float64","Uint8","Uint8","Uint8"],j=function(s){var e=0,o=0,d=0,g=new ArrayBuffer(s[0].byte_length+s[0].header_size),t=new DataView(g);for(o=0;o<s.length;o++){s[o].header_size;var i=s[o].type,f=s[o].length,l=s[o].value,a=s[o].byte_length,m=c[i],p=null===m?0:window[m+"Array"].BYTES_PER_ELEMENT;switch(i===n.BUFFER?t.setUint8(e,n.BLOB,!1):t.setUint8(e,i,!1),e+=u,i!==n.ARRAY&&i!==n.OBJECT||(t.setUint16(e,f,!1),e+=r),t.setUint32(e,a,!1),e+=h,i){case n.NULL:case n.UNDEFINED:break;case n.STRING:for(d=0;d<f;d++,e+=p)t.setUint16(e,l.charCodeAt(d),!1);break;case n.NUMBER:case n.BOOLEAN:0,t["set"+m](e,l,!1),e+=p;break;case n.INT8ARRAY:case n.INT16ARRAY:case n.INT32ARRAY:case n.UINT8ARRAY:case n.UINT16ARRAY:case n.UINT32ARRAY:case n.FLOAT32ARRAY:case n.FLOAT64ARRAY:new Uint8Array(t.buffer,e,a).set(new Uint8Array(l.buffer)),e+=a;break;case n.ARRAYBUFFER:case n.BUFFER:new Uint8Array(t.buffer,e,a).set(new Uint8Array(l)),e+=a;break;case n.BLOB:case n.ARRAY:case n.OBJECT:break;default:throw"TypeError: Unexpected type found."}0}return t},y=function m(t,e){o=0,a=t.getUint8(e,!1),e+=u,a!==n.ARRAY&&a!==n.OBJECT||(d=t.getUint16(e,!1),e+=r),l=t.getUint32(e,!1),e+=h;var s,o,i,a,l,d,v,b,j,y,_,w,p=c[a],f=null===p?0:window[p+"Array"].BYTES_PER_ELEMENT;switch(a){case n.NULL:case n.UNDEFINED:0,s=null;break;case n.STRING:d=l/f,v=[];for(o=0;o<d;o++)w=t.getUint16(e,!1),e+=f,v.push(String.fromCharCode(w));s=v.join('');break;case n.NUMBER:s=t.getFloat64(e,!1),e+=f;break;case n.BOOLEAN:s=1===t.getUint8(e,!1),e+=f;break;case n.INT8ARRAY:case n.INT16ARRAY:case n.INT32ARRAY:case n.UINT8ARRAY:case n.UINT16ARRAY:case n.UINT32ARRAY:case n.FLOAT32ARRAY:case n.FLOAT64ARRAY:case n.ARRAYBUFFER:i=t.buffer.slice(e,e+l),e+=l,s=a===n.ARRAYBUFFER?i:new window[p+"Array"](i);break;case n.BLOB:window.Blob?(b=m(t,e),j=m(t,b.cursor),e=j.cursor,s=new Blob([j.value],{type:b.value})):(i=t.buffer.slice(e,e+l),e+=l,s=new g(i));break;case n.ARRAY:for(s=[],o=0;o<d;o++)e=(i=m(t,e)).cursor,s.push(i.value);break;case n.OBJECT:for(s={},o=0;o<d;o++)y=m(t,e),_=m(t,y.cursor),e=_.cursor,s[y.value]=_.value;break;default:throw"TypeError: Type not supported."}return{value:s,cursor:e}},l=function(e,o){for(var i=e.length,t=[],a=0,s=0,n=0;n<e.length;n++)!function(n){m(e[n],function(e){if(t[n]=e,s+=e[0].header_size+e[0].byte_length,++a===i){for(var r=[],c=0;c<t.length;c++)r=r.concat(t[c]);o(r,s)}})}(n)},m=function(e,a){var t,d,f,p,v,b,m=u+h,s=0,o=0,j=e;switch(t=function(t){if(e=void 0,void 0===t)e=n.UNDEFINED;else if(null===t)e=n.NULL;else{var e,s=t.constructor.name,o=t.constructor.toString().match(/\w+/g)[1];if(void 0!==s&&void 0!==n[s.toUpperCase()])e=n[s.toUpperCase()];else if(void 0!==o&&void 0!==n[o.toUpperCase()])e=n[o.toUpperCase()];else switch(i(t)){case"string":e=n.STRING;break;case"number":e=n.NUMBER;break;case"boolean":e=n.BOOLEAN;break;case"object":t instanceof Array?e=n.ARRAY:t instanceof Int8Array?e=n.INT8ARRAY:t instanceof Int16Array?e=n.INT16ARRAY:t instanceof Int32Array?e=n.INT32ARRAY:t instanceof Uint8Array?e=n.UINT8ARRAY:t instanceof Uint16Array?e=n.UINT16ARRAY:t instanceof Uint32Array?e=n.UINT32ARRAY:t instanceof Float32Array?e=n.FLOAT32ARRAY:t instanceof Float64Array?e=n.FLOAT64ARRAY:t instanceof ArrayBuffer?e=n.ARRAYBUFFER:t instanceof Blob?e=n.BLOB:t instanceof g?e=n.BUFFER:t instanceof Object&&(e=n.OBJECT)}}return e}(e),d=null==c[t]?0:window[c[t]+"Array"].BYTES_PER_ELEMENT,t){case n.UNDEFINED:case n.NULL:break;case n.NUMBER:case n.BOOLEAN:s=d;break;case n.STRING:s+=(o=e.length)*d;break;case n.INT8ARRAY:case n.INT16ARRAY:case n.INT32ARRAY:case n.UINT8ARRAY:case n.UINT16ARRAY:case n.UINT32ARRAY:case n.FLOAT32ARRAY:case n.FLOAT64ARRAY:s+=(o=e.length)*d;break;case n.ARRAY:return void l(e,function(n,s){a([{type:t,length:e.length,header_size:m+r,byte_length:s,value:null}].concat(n))});case n.OBJECT:f=[];for(v in e)e.hasOwnProperty(v)&&(f.push(v),f.push(e[v]),o++);return void l(f,function(e,n){a([{type:t,length:o,header_size:m+r,byte_length:n,value:null}].concat(e))});case n.ARRAYBUFFER:s+=e.byteLength;break;case n.BLOB:return b=e.type,p=new FileReader,p.onload=function(e){l([b,e.target.result],function(e,n){a([{type:t,length:o,header_size:m,byte_length:n,value:null}].concat(e))})},p.onerror=function(e){throw"FileReader Error: "+e},void p.readAsArrayBuffer(e);case n.BUFFER:s+=e.length;break;default:throw'TypeError: Type "'+e.constructor.name+'" not supported.'}a([{type:t,length:o,header_size:m,byte_length:s,value:j}].concat([]))},O=function(e){var t=e instanceof DataView?e:new DataView(e);return y(t,0).value},v={pack:function(e,t){try{0,m(e,function(e){t(j(e))})}catch(e){throw e}},unpack:function(e,t){try{0;var n=O(e);0,t(n)}catch(e){throw e}}};t.a=function(U,C){function y(e,i){function o(e){return!e.audio&&!e.video&&!e.screen&&e.data}var n,s,t='';t+="?userid="+e.userid,t+="&sessionid="+e.sessionid,t+="&msgEvent="+e.socketMessageEvent,t+="&socketCustomEvent="+e.socketCustomEvent,t+="&autoCloseEntireSession="+!!e.autoCloseEntireSession,!0===e.session.broadcast&&(t+="&oneToMany=true"),t+="&maxParticipantsAllowed="+e.maxParticipantsAllowed,e.enableScalableBroadcast&&(t+="&enableScalableBroadcast=true",t+="&maxRelayLimitPerUser="+(e.maxRelayLimitPerUser||2)),t+="&extra="+JSON.stringify(e.extra||{}),e.socketCustomParameters&&(t+=e.socketCustomParameters);try{a.a.sockets={}}catch(e){}if(e.socketURL||(e.socketURL="/"),"/"!=e.socketURL.substr(e.socketURL.length-1,1))throw'"socketURL" MUST end with a slash.';e.enableLogs&&("/"==e.socketURL?console.info("socket.io url is: ",location.origin+"/"):console.info("socket.io url is: ",e.socketURL));try{e.socket=a()(e.socketURL+t)}catch(n){e.socket=a.a.connect(e.socketURL+t,e.socketOptions)}n=e.multiPeersHandler;function r(t,n){e.peersBackup[t]||(e.peersBackup[t]={userid:t,extra:{}}),e.peersBackup[t].extra=n}e.socket.on("extra-data-updated",function(t,n){e.peers[t]&&(e.peers[t].extra=n,e.onExtraDataUpdated({userid:t,extra:n}),r(t,n))}),e.socket.on(e.socketMessageEvent,function l(t){if(t.remoteUserId==e.userid)if(e.peers[t.sender]&&e.peers[t.sender].extra!=t.message.extra&&(e.peers[t.sender].extra=t.extra,e.onExtraDataUpdated({userid:t.sender,extra:t.extra}),r(t.sender,t.extra)),t.message.streamSyncNeeded&&e.peers[t.sender]){var i,a,c,s=e.streamEvents[t.message.streamid];if(!s||!s.stream)return;if(i=t.message.action,"ended"===i||"inactive"===i||"stream-removed"===i)return e.peersBackup[s.userid]&&(s.extra=e.peersBackup[s.userid].extra),void e.onstreamended(s);a="both"!=t.message.type?t.message.type:null,"function"==typeof s.stream[i]&&s.stream[i](a)}else if("dropPeerConnection"!==t.message){if(t.message.allParticipants)return-1===t.message.allParticipants.indexOf(t.sender)&&t.message.allParticipants.push(t.sender),void t.message.allParticipants.forEach(function(t){n[e.peers[t]?"renegotiatePeer":"createNewPeer"](t,{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:o(e.session)})});if(t.message.newParticipant){if(t.message.newParticipant==e.userid)return;if(e.peers[t.message.newParticipant])return;n.createNewPeer(t.message.newParticipant,t.message.userPreferences||{localPeerSdpConstraints:{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:o(e.session)})}else if(t.message.readyForOffer&&(e.attachStreams.length&&(e.waitingForLocalMedia=!1),e.waitingForLocalMedia))setTimeout(function(){l(t)},1);else if(t.message.newParticipationRequest&&t.sender!==e.userid)e.peers[t.sender]&&e.deletePeer(t.sender),c={extra:t.extra||{},localPeerSdpConstraints:t.message.remotePeerSdpConstraints||{OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},remotePeerSdpConstraints:t.message.localPeerSdpConstraints||{OfferToReceiveAudio:e.session.oneway?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.session.oneway?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},isOneWay:void 0!==t.message.isOneWay?t.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,isDataOnly:void 0!==t.message.isDataOnly?t.message.isDataOnly:o(e.session),dontGetRemoteStream:void 0!==t.message.isOneWay?t.message.isOneWay:!!e.session.oneway||"one-way"===e.direction,dontAttachLocalStream:!!t.message.dontGetRemoteStream,connectionDescription:t,successCallback:function(){}},e.onNewParticipant(t.sender,c);else{if(t.message.changedUUID&&e.peers[t.message.oldUUID]&&(e.peers[t.message.newUUID]=e.peers[t.message.oldUUID],delete e.peers[t.message.oldUUID]),t.message.userLeft)return n.onUserLeft(t.sender),void(t.message.autoCloseEntireSession&&e.leave());n.addNegotiatedMessage(t.message,t.sender)}}else e.deletePeer(t.sender)}),s=!1,e.socket.resetProps=function(){s=!1},e.socket.on("connect",function(){s||(s=!0,e.enableLogs&&console.info("socket.io connection is opened."),setTimeout(function(){e.socket.emit("extra-data-updated",e.extra)},1e3),i&&i(e.socket))}),e.socket.on("disconnect",function(){e.enableLogs&&console.warn("socket.io connection is closed"),e.close()}),e.socket.on("user-disconnected",function(t){t!==e.userid&&(e.onUserStatusChanged({userid:t,status:"offline",extra:e.peers[t]&&e.peers[t].extra||{}}),e.deletePeer(t))}),e.socket.on("user-connected",function(t){t!==e.userid&&e.onUserStatusChanged({userid:t,status:"online",extra:e.peers[t]&&e.peers[t].extra||{}})}),e.socket.on("closed-entire-session",function(t,n){e.leave(),e.onEntireSessionClosed({sessionid:t,userid:t,extra:n})}),e.socket.on("userid-already-taken",function(t,n){e.onUserIdAlreadyTaken(t,n)}),e.socket.on("logs",function(t){e.enableLogs&&console.debug("server-logs",t)}),e.socket.on("number-of-broadcast-viewers-updated",function(t){e.onNumberOfBroadcastViewersUpdated(t)}),e.socket.on("set-isInitiator-true",function(t){t==e.sessionid&&(e.isInitiator=!0)})}function G(e){var o,t=this,n=["getAllParticipants","getLength","selectFirst","streams","send","forEach"];function s(){e.fbr=new w,e.fbr.onProgress=function(t){e.onFileProgress(t)},e.fbr.onBegin=function(t){e.onFileStart(t)},e.fbr.onEnd=function(t){e.onFileEnd(t)}}e.peers={getLength:function(){var t,e=0;for(t in this)-1==n.indexOf(t)&&e++;return e},selectFirst:function(){var e,t;for(t in this)-1==n.indexOf(t)&&(e=this[t]);return e},getAllParticipants:function(s){var e,t=[];for(e in this)-1==n.indexOf(e)&&e!=s&&t.push(e);return t},forEach:function(t){this.getAllParticipants().forEach(function(n){t(e.peers[n])})},send:function(n,s){var i,o=this;if(!O(n.size)&&!O(n.type)){if(e.enableFileSharing)return void t.shareFile(n,s);"string"!=typeof n&&(n=JSON.stringify(n))}if("text"===n.type||n instanceof ArrayBuffer||n instanceof DataView){if("text"===n.type&&(n=JSON.stringify(n)),s&&(i=e.peers[s],i))return i.channels.length?void i.channels.forEach(function(e){e.send(n)}):(e.peers[s].createDataChannel(),e.renegotiate(s),void setTimeout(function(){o.send(n,s)},3e3));this.getAllParticipants().forEach(function(t){if(!o[t].channels.length)return e.peers[t].createDataChannel(),e.renegotiate(t),void setTimeout(function(){o[t].channels.forEach(function(e){e.send(n)})},3e3);o[t].channels.forEach(function(e){e.send(n)})})}else Y.send({text:n,channel:this,connection:e,remoteUserId:s})}},this.uuid=e.userid,this.getLocalConfig=function(i,n,o){return o||(o={}),{streamsToShare:o.streamsToShare||{},rtcMultiConnection:e,connectionDescription:o.connectionDescription,userid:n,localPeerSdpConstraints:o.localPeerSdpConstraints,remotePeerSdpConstraints:o.remotePeerSdpConstraints,dontGetRemoteStream:!!o.dontGetRemoteStream,dontAttachLocalStream:!!o.dontAttachLocalStream,renegotiatingPeer:!!o.renegotiatingPeer,peerRef:o.peerRef,channels:o.channels||[],onLocalSdp:function(e){t.onNegotiationNeeded(e,n)},onLocalCandidate:function(s){(s=N.processCandidates(e,s))&&t.onNegotiationNeeded(s,n)},remoteSdp:i,onDataChannelMessage:function(o){if(!e.fbr&&e.enableFileSharing&&s(),"string"!=typeof o&&e.enableFileSharing){var i=this;o instanceof ArrayBuffer||o instanceof DataView?e.fbr.convertToObject(o,function(e){i.onDataChannelMessage(e)}):o.readyForNextChunk?e.fbr.getNextChunk(o,function(t){e.peers[n].channels.forEach(function(e){e.send(t)})},n):o.chunkMissing?e.fbr.chunkMissing(o):e.fbr.addChunk(o,function(t){e.peers[n].peer.channel.send(t)})}else t.onDataChannelMessage(o,n)},onDataChannelError:function(e){t.onDataChannelError(e,n)},onDataChannelOpened:function(e){t.onDataChannelOpened(e,n)},onDataChannelClosed:function(e){t.onDataChannelClosed(e,n)},onRemoteStream:function(s){e.peers[n]&&e.peers[n].streams.push(s),t.onGettingRemoteMedia(s,n)},onRemoteStreamRemoved:function(e){t.onRemovingRemoteMedia(e,n)},onPeerStateChanged:function(e){t.onPeerStateChanged(e),"new"===e.iceConnectionState&&t.onNegotiationStarted(n,e),"connected"===e.iceConnectionState&&t.onNegotiationCompleted(n,e),-1!==e.iceConnectionState.search(/closed|failed/gi)&&(t.onUserLeft(n),t.disconnectWith(n))}}},this.createNewPeer=function(n,t){if(!(e.maxParticipantsAllowed<=e.getAllParticipants().length)){if(t=t||{},e.isInitiator&&e.session.audio&&"two-way"===e.session.audio&&!t.streamsToShare&&(t.isOneWay=!1,t.isDataOnly=!1,t.session=e.session),!t.isOneWay&&!t.isDataOnly)return t.isOneWay=!0,void this.onNegotiationNeeded({enableMedia:!0,userPreferences:t},n);t=e.setUserPreferences(t,n);var s=this.getLocalConfig(null,n,t);e.peers[n]=new S(s)}},this.createAnsweringPeer=function(s,t,n){n=e.setUserPreferences(n||{},t);var o=this.getLocalConfig(s,t,n);e.peers[t]=new S(o)},this.renegotiatePeer=function(t,n,s){if(e.peers[t]){n||(n={}),n.renegotiatingPeer=!0,n.peerRef=e.peers[t].peer,n.channels=e.peers[t].channels;var o=this.getLocalConfig(s,t,n);e.peers[t]=new S(o)}else e.enableLogs&&console.error("Peer ("+t+") does not exist. Renegotiation skipped.")},this.replaceTrack=function(s,t,o){if(!e.peers[t])throw"This peer ("+t+") does not exist.";var n=e.peers[t].peer;n.getSenders&&"function"==typeof n.getSenders&&n.getSenders().length?n.getSenders().forEach(function(n){o&&"video"===n.track.kind&&(e.peers[t].peer.lastVideoTrack=n.track,n.replaceTrack(s)),o||"audio"!==n.track.kind||(e.peers[t].peer.lastAudioTrack=n.track,n.replaceTrack(s))}):(console.warn("RTPSender.replaceTrack is NOT supported."),this.renegotiatePeer(t))},this.onNegotiationNeeded=function(){},this.addNegotiatedMessage=function(n,s){if(n.type&&n.sdp)return"answer"==n.type&&e.peers[s]&&e.peers[s].addRemoteSdp(n),"offer"==n.type&&(n.renegotiatingPeer?this.renegotiatePeer(s,null,n):this.createAnsweringPeer(n,s)),void(e.enableLogs&&console.log("Remote peer's sdp:",n.sdp));if(n.candidate)return e.peers[s]&&e.peers[s].addRemoteCandidate(n),void(e.enableLogs&&console.log("Remote peer's candidate pairs:",n.candidate));if(n.enableMedia){e.session=n.userPreferences.session||e.session,e.session.oneway&&e.attachStreams.length&&(e.attachStreams=[]),n.userPreferences.isDataOnly&&e.attachStreams.length&&(e.attachStreams.length=[]);var o={};e.attachStreams.forEach(function(e){o[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),n.userPreferences.streamsToShare=o,t.onNegotiationNeeded({readyForOffer:!0,userPreferences:n.userPreferences},s)}n.readyForOffer&&e.onReadyForOffer(s,n.userPreferences)},this.onGettingRemoteMedia=function(){},this.onRemovingRemoteMedia=function(){},this.onGettingLocalMedia=function(){},this.onLocalMediaError=function(t,n){e.onMediaError(t,n)},this.shareFile=function(n,t){s(),e.fbr.readAsArrayBuffer(n,function(s){var n=e.getAllParticipants();t&&(n=[t]),n.forEach(function(t){e.fbr.getNextChunk(s,function(n){e.peers[t].channels.forEach(function(e){e.send(n)})},t)})},{userid:e.userid,chunkSize:"Firefox"===DetectRTC.browser.name?15e3:e.chunkSize||0})},o=new q(e),this.onDataChannelMessage=function(n,t){o.receive(JSON.parse(n),t,e.peers[t]?e.peers[t].extra:{})},this.onDataChannelClosed=function(t,n){t.userid=n,t.extra=e.peers[n]?e.peers[n].extra:{},e.onclose(t)},this.onDataChannelError=function(n,t){n.userid=t,event.extra=e.peers[t]?e.peers[t].extra:{},e.onerror(n)},this.onDataChannelOpened=function(n,t){e.peers[t].channels.length?e.peers[t].channels=[n]:(e.peers[t].channels.push(n),e.onopen({userid:t,extra:e.peers[t]?e.peers[t].extra:{},channel:n}))},this.onPeerStateChanged=function(t){e.onPeerStateChanged(t)},this.onNegotiationStarted=function(){},this.onNegotiationCompleted=function(){},this.getRemoteStreams=function(t){return t=t||e.peers.getAllParticipants()[0],e.peers[t]?e.peers[t].streams:[]}}function D(t,n,e){if("undefined"!=typeof CustomEvent){var s=new CustomEvent(n,{arguments:e,__exposedProps__:e});t.dispatchEvent(s)}}function P(t,e){e.stream&&e.stream&&e.stream.addEventListener&&(e.stream.addEventListener("mute",function(n){(n=t.streamEvents[e.streamid]).session={audio:"audio"===n.muteType,video:"video"===n.muteType},t.onmute(n)},!1),e.stream.addEventListener("unmute",function(n){(n=t.streamEvents[e.streamid]).session={audio:"audio"===n.unmuteType,video:"video"===n.unmuteType},t.onunmute(n)},!1))}function b(){if(window.crypto&&window.crypto.getRandomValues&&-1===navigator.userAgent.indexOf("Safari")){for(var t=window.crypto.getRandomValues(new Uint32Array(3)),n='',e=0,s=t.length;e<s;e++)n+=t[e].toString(36);return n}return(Math.random()*(new Date).getTime()).toString(36).replace(/\./g,'')}function H(t,a,s){if(s.autoCreateMediaElement){var e,o,i,l,c=!1;n(t,"video").length||t.isVideo||t.isScreen||(c=!0),"Firefox"===DetectRTC.browser.name&&(s.session.video||s.session.screen)&&(c=!1),e=document.createElement(c?"audio":"video"),e.srcObject=t;try{e.setAttributeNode(document.createAttribute("autoplay")),e.setAttributeNode(document.createAttribute("playsinline")),e.setAttributeNode(document.createAttribute("controls"))}catch(t){e.setAttribute("autoplay",!0),e.setAttribute("playsinline",!0),e.setAttribute("controls",!0)}"Firefox"===DetectRTC.browser.name&&(i="ended","oninactive"in e&&(i="inactive"),e.addEventListener(i,function(){if(currentUserMediaRequest.remove(t.idInstance),"local"===t.type){i="ended","oninactive"in t&&(i="inactive"),r.onSyncNeeded(t.streamid,i),s.attachStreams.forEach(function(e,n){t.streamid===e.streamid&&delete s.attachStreams[n]});var e,n=[];if(s.attachStreams.forEach(function(e){e&&n.push(e)}),s.attachStreams=n,e=s.streamEvents[t.streamid],e)return void s.onstreamended(e);this.parentNode&&this.parentNode.removeChild(this)}},!1)),l=e.play(),void 0!==l?(o=!1,setTimeout(function(){o||(o=!0,a(e))},1e3),l.then(function(){o||(o=!0,a(e))}).catch(function(){o||(o=!0,a(e))})):a(e)}else a({})}function z(e,t){window.removeEventListener(e,t),window.addEventListener(e,t,!1)}function I(t){var e=[];return t.forEach(function(t){t&&e.push(t)}),e}function g(e){return!e.audio&&!e.video&&!e.screen&&e.data}function O(e){return void 0===e}(l=void 0!==s?s:null)&&"undefined"==typeof window&&void 0!==s&&(s.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},s.console||(s.console={}),void 0===s.console.debug&&(s.console.debug=s.console.info=s.console.error=s.console.log=s.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(l.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return''}};return e},document.addEventListener=document.removeEventListener=l.addEventListener=l.removeEventListener=function(){},l.HTMLVideoElement=l.HTMLMediaElement=function(){}),void 0===a.a&&(l.io=function(){return{on:function(t,e){e=e||function(){},"connect"===t&&e()},emit:function(t,n,e){e=e||function(){},"open-room"!==t&&"join-room"!==t||e(!0,n.sessionid,null)}}}),"undefined"==typeof location&&(l.location={protocol:"file:",href:'',hash:'',origin:"self"}),"undefined"==typeof screen&&(l.screen={width:0,height:0}),"undefined"==typeof URL&&(l.URL={createObjectURL:function(){return''},revokeObjectURL:function(){return''}}),l.window=s),function(){F="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",(D="object"===(void 0===o?"undefined":i(o))&&"object"===i(o.versions)&&o.versions.node&&!o.browser)&&(j=o.versions.node.toString().replace("v",''),F="Nodejs/"+j+" (NodeOS) AppleWebKit/"+j+" (KHTML, like Gecko) Nodejs/"+j+" Nodejs/"+j),!function(e){"undefined"==typeof window&&("undefined"==typeof window&&void 0!==s&&(s.navigator={userAgent:F,getUserMedia:function(){}},e.window=s),"undefined"==typeof location&&(e.location={protocol:"file:",href:'',hash:''}),"undefined"==typeof screen&&(e.screen={width:0,height:0}))}(void 0!==s?s:window),n=window.navigator,void 0!==n?(void 0!==n.webkitGetUserMedia&&(n.getUserMedia=n.webkitGetUserMedia),void 0!==n.mozGetUserMedia&&(n.getUserMedia=n.mozGetUserMedia)):n={getUserMedia:function(){},userAgent:F};var t,n,a,r,d,h,m,f,p,b,j,_,x,k,A,S,M,F,T,z,D,N,L,R,P,H,I,$,W,q,X,et=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(n.userAgent||''),U=!(-1===n.userAgent.indexOf("Edge")||!n.msSaveOrOpenBlob&&!n.msSaveBlob),G=!!window.opera||n.userAgent.indexOf(" OPR/")>=0,J=void 0!==window.InstallTrigger,B=/^((?!chrome|android).)*safari/i.test(n.userAgent),V=!!window.chrome&&!G,Z="undefined"!=typeof document&&!!document.documentMode&&!U;function K(s,e){var o=0,t=!1,n=window.setInterval(function(){s()&&(window.clearInterval(n),e(t)),o++>50&&(window.clearInterval(n),e(t=!0))},10)}a={Android:function(){return n.userAgent.match(/Android/i)},BlackBerry:function(){return n.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return n.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return n.userAgent.match(/Opera Mini/i)},Windows:function(){return n.userAgent.match(/IEMobile/i)},any:function(){return a.Android()||a.BlackBerry()||a.iOS()||a.Opera()||a.Windows()},getOsName:function(){var e="Unknown OS";return a.Android()&&(e="Android"),a.BlackBerry()&&(e="BlackBerry"),a.iOS()&&(e="iOS"),a.Opera()&&(e="Opera Mini"),a.Windows()&&(e="Windows"),e}},d="Unknown OS",_="Unknown OS Version",p=function(){for(var e,o,a=n.appVersion,s=n.userAgent,t="-",r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],i=0;o=r[i];i++)if(o.r.test(s)){t=o.s;break}switch(e="-",/Windows/.test(t)&&(/Windows (.*)/.test(t)&&(e=/Windows (.*)/.exec(t)[1]),t="Windows"),t){case"Mac OS X":/Mac OS X (10[._\d]+)/.test(s)&&(e=/Mac OS X (10[._\d]+)/.exec(s)[1]);break;case"Android":/Android ([._\d]+)/.test(s)&&(e=/Android ([._\d]+)/.exec(s)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(s)&&(e=(e=/OS (\d+)_(\d+)_?(\d+)?/.exec(a))[1]+"."+e[2]+"."+(0|e[3]))}return{osName:t,osVersion:e}}(),p&&p.osName&&"-"!=p.osName?(d=p.osName,_=p.osVersion):a.any()&&"Android"==(d=a.getOsName())&&(_=!!(q=(X=(X||n.userAgent).toLowerCase()).match(/android\s([0-9.]*)/))&&q[1]),D="object"===(void 0===o?"undefined":i(o))&&"object"===i(o.versions)&&o.versions.node,"Unknown OS"===d&&D&&(d="Nodejs",_=o.versions.node.toString().replace("v",'')),x=!1,M=!1,["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!x&&e in document.createElement("canvas")&&(x=!0),!M&&e in document.createElement("video")&&(M=!0))});var Y=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,ee=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,en=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/,v=[],l=[],c=[],g=[];n.mediaDevices&&n.mediaDevices.enumerateDevices&&(n.enumerateDevices=function(e){var t=n.mediaDevices.enumerateDevices();t&&t.then?n.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])}),k=!1,void 0!==u&&"getSources"in u?k=!0:n.mediaDevices&&n.mediaDevices.enumerateDevices&&(k=!0);var E=!1,O=!1,C=!1,y=!1,w=!1;function Q(e){if(k)if(!n.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(n.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!n.enumerateDevices&&n.enumerateDevices&&(n.enumerateDevices=n.enumerateDevices.bind(n)),n.enumerateDevices){v=[],l=[],c=[],g=[],E=!1,O=!1,C=!1,y=!1,w=!1;var s={};n.enumerateDevices(function(n){n.forEach(function(n){var o,e={};for(o in n)try{"function"!=typeof n[o]&&(e[o]=n[o])}catch(e){}s[e.deviceId+e.label+e.kind]||("audio"===e.kind&&(e.kind="audioinput"),"video"===e.kind&&(e.kind="videoinput"),e.deviceId||(e.deviceId=e.id),e.id||(e.id=e.deviceId),e.label?("videoinput"!==e.kind||w||(w=!0),"audioinput"!==e.kind||y||(y=!0)):(e.isCustomLabel=!0,"videoinput"===e.kind?e.label="Camera "+(g.length+1):"audioinput"===e.kind?e.label="Microphone "+(l.length+1):"audiooutput"===e.kind?e.label="Speaker "+(c.length+1):e.label="Please invoke getUserMedia once.",void 0!==t&&t.browser.isChrome&&t.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||'')&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(e.label="HTTPs is required to get label of this "+e.kind+" device.")),"audioinput"===e.kind&&(E=!0,-1===l.indexOf(e)&&l.push(e)),"audiooutput"===e.kind&&(O=!0,-1===c.indexOf(e)&&c.push(e)),"videoinput"===e.kind&&(C=!0,-1===g.indexOf(e)&&g.push(e)),v.push(e),s[e.deviceId+e.label+e.kind]=e)}),void 0!==t&&(t.MediaDevices=v,t.hasMicrophone=E,t.hasSpeakers=O,t.hasWebcam=C,t.isWebsiteHasWebcamPermissions=w,t.isWebsiteHasMicrophonePermissions=y,t.audioInputDevices=l,t.audioOutputDevices=c,t.videoInputDevices=g),e&&e()})}else e&&e();else e&&e()}t=window.DetectRTC||{},t.browser=function(){n.appVersion;var s,a,r,e=n.userAgent,o=n.appName,t=''+parseFloat(n.appVersion),i=parseInt(n.appVersion,10);if(B&&!V&&-1!==e.indexOf("CriOS")&&(B=!1,V=!0),G){o="Opera";try{i=(t=n.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){t="0.0.0.0",i=0}}else Z?((s=e.indexOf("rv:"))>0?t=e.substring(s+3):(s=e.indexOf("MSIE"),t=e.substring(s+5)),o="IE"):V?(s=e.indexOf("Chrome"),o="Chrome",t=e.substring(s+7)):B?(s=e.indexOf("Safari"),o="Safari",t=e.substring(s+7),-1!==(s=e.indexOf("Version"))&&(t=e.substring(s+8)),-1!==n.userAgent.indexOf("Version/")&&(t=n.userAgent.split("Version/")[1].split(" ")[0])):J?(s=e.indexOf("Firefox"),o="Firefox",t=e.substring(s+8)):(r=e.lastIndexOf(" ")+1)<(s=e.lastIndexOf("/"))&&(o=e.substring(r,s),t=e.substring(s+1),o.toLowerCase()===o.toUpperCase()&&(o=n.appName));return U&&(o="Edge",t=n.userAgent.split("Edge/")[1]),-1!==(a=t.search(/[; )]/))&&(t=t.substring(0,a)),i=parseInt(''+t,10),isNaN(i)&&(t=''+parseFloat(n.appVersion),i=parseInt(n.appVersion,10)),{fullVersion:t,version:i,name:o,isPrivateBrowsing:!1}}(),function(n){var e,t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){e=!1},function(){e=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){try{(t=window.indexedDB.open("test")).onerror=function(){return!0}}catch(t){e=!0}void 0===e&&K(function(){return"done"===t.readyState},function(n){n||(e=!t.result)})}else if(function(n){var t,e=n.toLowerCase();return(0!==e.indexOf("msie")||0!==e.indexOf("trident"))&&(t=/(?:msie|rv:)\s?([\d.]+)/.exec(e),!!(t&&parseInt(t[1],10)>=10))}(window.navigator.userAgent)){e=!1;try{window.indexedDB||(e=!0)}catch(t){e=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(t){e=!0}void 0===e&&(e=!1,window.localStorage.removeItem("test"))}}catch(t){e=!1}K(function(){return void 0!==e},function(){n(e)})}(function(e){t.browser.isPrivateBrowsing=!!e}),t.browser["is"+t.browser.name]=!0,t.osName=d,t.osVersion=_,"object"===(void 0===o?"undefined":i(o))&&"object"===i(o.versions)&&o.versions["node-webkit"],A=!1,["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){A||e in window&&(A=!0)}),t.isWebRTCSupported=A,t.isORTCSupported="undefined"!=typeof RTCIceGatherer,r=!1,(t.browser.isChrome&&t.browser.version>=35?r=!0:t.browser.isFirefox&&t.browser.version>=34?r=!0:t.browser.isEdge&&t.browser.version>=17?r=!0:"Android"===t.osName&&t.browser.isChrome&&(r=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||''))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(t.browser.isChrome||t.browser.isEdge||t.browser.isOpera)?r=!1:t.browser.isFirefox&&(r=!1)),t.isScreenCapturingSupported=r,m={isSupported:!1,isCreateMediaStreamSourceSupported:!1},["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){m.isSupported||e in window&&(m.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(m.isCreateMediaStreamSourceSupported=!0))}),t.isAudioContextSupported=m.isSupported,t.isCreateMediaStreamSourceSupported=m.isCreateMediaStreamSourceSupported,$=!1,t.browser.isChrome&&t.browser.version>31&&($=!0),t.isRtpDataChannelsSupported=$,b=!1,t.browser.isFirefox&&t.browser.version>28?b=!0:t.browser.isChrome&&t.browser.version>25?b=!0:t.browser.isOpera&&t.browser.version>=11&&(b=!0),t.isSctpDataChannelsSupported=b,t.isMobileDevice=et,h=!1,n.getUserMedia?h=!0:n.mediaDevices&&n.mediaDevices.getUserMedia&&(h=!0),t.browser.isChrome&&t.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||'')&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(h="Requires HTTPs"),"Nodejs"===t.osName&&(h=!1),t.isGetUserMediaSupported=h,R='',screen.width&&(R+=(screen.width?screen.width:'')+" x "+(screen.height?screen.height:'')),t.displayResolution=R,t.displayAspectRatio=(I=screen.width,H=screen.height,P=function n(t,e){return 0==e?t:n(e,t%e)}(I,H),I/P/(H/P)).toFixed(2),t.isCanvasSupportsStreamCapturing=x,t.isVideoSupportsStreamCapturing=M,"Chrome"==t.browser.name&&t.browser.version>=53&&(t.isCanvasSupportsStreamCapturing||(t.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),t.isVideoSupportsStreamCapturing||(t.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),t.DetectLocalIPAddress=function(e,o){if(t.isWebRTCSupported){var n=!0,s=!0;!function(d,n){if("undefined"==typeof document||"function"!=typeof document.getElementById)return;var e,o,i,a,r={},s=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!s){if(a=document.getElementById("iframe"),!a)return;o=a.contentWindow,s=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection}if(!s)return;i=null,"Chrome"===t.browser&&t.browser.version<58&&(i={optional:[{RtpDataChannels:!0}]}),e=new s({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},i),n&&(e.addStream?e.addStream(n):e.addTrack&&n.getTracks()[0]&&e.addTrack(n.getTracks()[0],n));function c(n){if(e=ee.exec(n),e){var e,t=e[1],s=n.match(Y);void 0===r[t]&&d(t,s,!0),r[t]=!0}}if(e.onicecandidate=function(e){e.candidate&&c(e.candidate.candidate)},!n)try{e.createDataChannel("sctp",{})}catch(e){}t.isPromisesSupported?e.createOffer().then(function(t){e.setLocalDescription(t).then(l)}):e.createOffer(function(t){e.setLocalDescription(t,l,function(){})},function(){});function l(){e.localDescription.sdp.split("\n").forEach(function(e){0===e.indexOf("a=candidate:")&&c(e)})}}(function(t){t.match(Y)?e("Local: "+t,n=!1,s):t.match(en)?e("Public: "+t,n,s=!1):e("Public: "+t,n,s)},o)}},t.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,t.isWebSocketsBlocked=!t.isWebSocketsSupported,"Nodejs"===t.osName&&(t.isWebSocketsSupported=!0,t.isWebSocketsBlocked=!1),t.checkWebSocketsSupport=function(n){n=n||function(){};try{var s,e=new WebSocket("wss://echo.websocket.org:443/");e.onopen=function(){t.isWebSocketsBlocked=!1,s=(new Date).getTime(),e.send("ping")},e.onmessage=function(){t.WebsocketLatency=(new Date).getTime()-s+"ms",n(),e.close(),e=null},e.onerror=function(){t.isWebSocketsBlocked=!0,n()}}catch(e){t.isWebSocketsBlocked=!0,n()}},t.load=function(e){Q(e=e||function(){})},t.MediaDevices=void 0!==v?v:[],t.hasMicrophone=E,t.hasSpeakers=O,t.hasWebcam=C,t.isWebsiteHasWebcamPermissions=w,t.isWebsiteHasMicrophonePermissions=y,t.audioInputDevices=l,t.audioOutputDevices=c,t.videoInputDevices=g,W=!1,"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(W=!0),t.isSetSinkIdSupported=W,S=!1,t.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(S=!0):t.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(S=!0),t.isRTPSenderReplaceTracksSupported=S,L=!1,t.browser.isFirefox&&t.browser.version>38&&(L=!0),t.isRemoteStreamProcessingSupported=L,N=!1,void 0!==u&&"applyConstraints"in u.prototype&&(N=!0),t.isApplyConstraintsSupported=N,z=!1,t.browser.isFirefox&&t.browser.version>=43&&(z=!0),t.isMultiMonitorScreenCapturingSupported=z,t.isPromisesSupported=!!("Promise"in window),t.version="1.3.7",void 0===t&&(window.DetectRTC={}),f=window.MediaStream,void 0===f&&"undefined"!=typeof webkitMediaStream&&(f=webkitMediaStream),t.MediaStream=void 0!==f&&"function"==typeof f&&Object.keys(f.prototype),t.MediaStreamTrack=void 0!==u&&Object.keys(u.prototype),T=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,t.RTCPeerConnection=void 0!==T&&Object.keys(T.prototype),window.DetectRTC=t,"function"==typeof define&&e(144)&&define("DetectRTC",[],function(){return t})}(),"undefined"!=typeof cordova&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Crosswalk")&&(DetectRTC.isMobileDevice=!0,DetectRTC.browser.name="Chrome"),window.addEventListener||(window.addEventListener=function(e,t,n){e.attachEvent&&e.attachEvent("on"+t,n)}),window.attachEventListener=function(e,t,n,s){e.addEventListener(t,n,s)},m=window.MediaStream;function t(e,t){return(!e.session.audio||"two-way"!==e.session.audio)&&("Firefox"===DetectRTC.browser.name&&!1!==t||!("Chrome"!==DetectRTC.browser.name||DetectRTC.browser.version<50)&&(!0===typeof t||!(void 0!==t||!e.session.audio||!e.session.screen||e.session.video)&&(t=!0,!0)))}function k(e){return"Firefox"===DetectRTC.browser.name||"Chrome"===DetectRTC.browser.name&&{mandatory:{chromeMediaSource:e.mandatory.chromeMediaSource,chromeMediaSourceId:e.mandatory.chromeMediaSourceId}}}function n(e,t){return e&&e.getTracks?e.getTracks().filter(function(e){return e.kind===(t||"audio")}):[]}function W(){var t,e=!1;try{if("undefined"==typeof RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;t=new c;try{t.addTransceiver("audio"),e=!0}catch(e){}t.close()}catch(t){e=!1}return e&&function(){var t,n,e=!1;try{n=new c({sdpSemantics:"unified-plan"});try{t=n.getConfiguration(),e="unified-plan"==t.sdpSemantics||(t.sdpSemantics,!1)}catch(t){e=!1}}catch(t){e=!1}return e}()}function R(){if("undefined"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc){var e=cordova.plugins.iosrtc;window.webkitRTCPeerConnection=e.RTCPeerConnection,window.RTCSessionDescription=e.RTCSessionDescription,window.RTCIceCandidate=e.RTCIceCandidate,window.MediaStream=e.MediaStream,window.MediaStreamTrack=e.MediaStreamTrack,navigator.getUserMedia=navigator.webkitGetUserMedia=e.getUserMedia,e.debug.enable("iosrtc*"),"function"==typeof e.selectAudioOutput&&e.selectAudioOutput(window.iOSDefaultAudioOutputDevice||"speaker"),e.registerGlobals()}}void 0===m&&"undefined"!=typeof webkitMediaStream&&(m=webkitMediaStream),void 0!==m&&("stop"in m.prototype||(m.prototype.stop=function(){this.getTracks().forEach(function(e){e.stop()})})),window.iOSDefaultAudioOutputDevice=window.iOSDefaultAudioOutputDevice||"speaker",document.addEventListener("deviceready",R,!1),R(),j={};function E(e){return{OfferToReceiveAudio:!!e.OfferToReceiveAudio,OfferToReceiveVideo:!!e.OfferToReceiveVideo}}void 0!==window.RTCPeerConnection?c=window.RTCPeerConnection:"undefined"!=typeof mozRTCPeerConnection?c=mozRTCPeerConnection:"undefined"!=typeof webkitRTCPeerConnection&&(c=webkitRTCPeerConnection);var r,c,l,d,h,m,p,v,j,_,N,L,X,F=window.RTCSessionDescription||window.mozRTCSessionDescription,M=window.RTCIceCandidate||window.mozRTCIceCandidate,u=window.MediaStreamTrack;function S(t){if(void 0!==window.RTCPeerConnection?c=window.RTCPeerConnection:"undefined"!=typeof mozRTCPeerConnection?c=mozRTCPeerConnection:"undefined"!=typeof webkitRTCPeerConnection&&(c=webkitRTCPeerConnection),F=window.RTCSessionDescription||window.mozRTCSessionDescription,M=window.RTCIceCandidate||window.mozRTCIceCandidate,u=window.MediaStreamTrack,!c)throw"WebRTC 1.0 (RTCPeerConnection) API are NOT available in this browser.";var e,o,i,a,r,l,d,h,f,p,g,s=t.rtcMultiConnection;if(this.extra=t.remoteSdp?t.remoteSdp.extra:s.extra,this.userid=t.userid,this.streams=[],this.channels=t.channels||[],this.connectionDescription=t.connectionDescription,this.addStream=function(e){s.addStream(e,o.userid)},this.removeStream=function(e){s.removeStream(e,o.userid)},o=this,t.remoteSdp&&(this.connectionDescription=t.remoteSdp.connectionDescription),l={},j.sdpConstraints=E({OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}),d=!!t.renegotiatingPeer,t.remoteSdp&&(d=!!t.remoteSdp.renegotiatingPeer),a=[],s.attachStreams.forEach(function(e){e&&a.push(e)}),d)e=t.peerRef;else{p="all",(s.candidates.turn||s.candidates.relay)&&(s.candidates.stun||s.candidates.reflexive||s.candidates.host||(p="relay"));try{i={iceServers:s.iceServers,iceTransportPolicy:s.iceTransportPolicy||p},void 0!==s.iceCandidatePoolSize&&(i.iceCandidatePoolSize=s.iceCandidatePoolSize),void 0!==s.bundlePolicy&&(i.bundlePolicy=s.bundlePolicy),void 0!==s.rtcpMuxPolicy&&(i.rtcpMuxPolicy=s.rtcpMuxPolicy),"Chrome"===DetectRTC.browser.name&&(i.sdpSemantics=s.sdpSemantics||"unified-plan"),s.iceServers&&s.iceServers.length||(i=null,s.optionalArgument=null),e=new c(i,s.optionalArgument)}catch(t){try{i={iceServers:s.iceServers},e=new c(i)}catch(t){e=new c}}}!e.getRemoteStreams&&e.getReceivers&&(e.getRemoteStreams=function(){var t=new m;return e.getReceivers().forEach(function(e){t.addTrack(e.track)}),[t]}),!e.getLocalStreams&&e.getSenders&&(e.getLocalStreams=function(){var t=new m;return e.getSenders().forEach(function(e){t.addTrack(e.track)}),[t]}),e.onicecandidate=function(n){if(n.candidate)s.trickleIce&&t.onLocalCandidate({candidate:n.candidate.candidate,sdpMid:n.candidate.sdpMid,sdpMLineIndex:n.candidate.sdpMLineIndex});else if(!s.trickleIce){var i=e.localDescription;t.onLocalSdp({type:i.type,sdp:i.sdp,remotePeerSdpConstraints:t.remotePeerSdpConstraints||!1,renegotiatingPeer:!!t.renegotiatingPeer||!1,connectionDescription:o.connectionDescription,dontGetRemoteStream:!!t.dontGetRemoteStream,extra:s?s.extra:{},streamsToShare:f})}},a.forEach(function(n){t.remoteSdp&&t.remoteSdp.remotePeerSdpConstraints&&t.remoteSdp.remotePeerSdpConstraints.dontGetRemoteStream||t.dontAttachLocalStream||(n=s.beforeAddingStream(n,o))&&(e.getLocalStreams().forEach(function(e){n&&e.id==n.id&&(n=null)}),n&&n.getTracks&&n.getTracks().forEach(function(t){try{e.addTrack(t,n)}catch(e){}}))}),e.oniceconnectionstatechange=e.onsignalingstatechange=function(){var n=o.extra;s.peers[o.userid]&&(n=s.peers[o.userid].extra||n),e&&(t.onPeerStateChanged({iceConnectionState:e.iceConnectionState,iceGatheringState:e.iceGatheringState,signalingState:e.signalingState,extra:n,userid:o.userid}),e&&e.iceConnectionState&&-1!==e.iceConnectionState.search(/closed|failed/gi)&&o.streams instanceof Array&&o.streams.forEach(function(e){var t=s.streamEvents[e.id]||{streamid:e.id,stream:e,type:"remote"};s.onstreamended(t)}))},r={OfferToReceiveAudio:!!a.length,OfferToReceiveVideo:!!a.length},t.localPeerSdpConstraints&&(r=t.localPeerSdpConstraints),j.sdpConstraints=E(r),g={},e.ontrack=function(s){if(s&&"track"===s.type)if(s.stream=s.streams[s.streams.length-1],s.stream.id||(s.stream.id=s.track.id),g[s.stream.id]&&"Safari"!==DetectRTC.browser.name)s.track&&(s.track.onended=function(){e.onremovestream(s)});else{g[s.stream.id]=s.stream.id;var o,i={};t.remoteSdp&&t.remoteSdp.streamsToShare?i=t.remoteSdp.streamsToShare:t.streamsToShare&&(i=t.streamsToShare),o=i[s.stream.id],o?(s.stream.isAudio=o.isAudio,s.stream.isVideo=o.isVideo,s.stream.isScreen=o.isScreen):(s.stream.isVideo=!!n(s.stream,"video").length,s.stream.isAudio=!s.stream.isVideo,s.stream.isScreen=!1),s.stream.streamid=s.stream.id,l[s.stream.id]=s.stream,t.onRemoteStream(s.stream),s.stream.getTracks().forEach(function(t){t.onended=function(){e.onremovestream(s)}}),s.stream.onremovetrack=function(){e.onremovestream(s)}}},e.onremovestream=function(e){e.stream.streamid=e.stream.id,l[e.stream.id]&&delete l[e.stream.id],t.onRemoteStreamRemoved(e.stream)},"function"!=typeof e.removeStream&&(e.removeStream=function(t){t.getTracks().forEach(function(n){e.removeTrack(n,t)})}),this.addRemoteCandidate=function(t){e.addIceCandidate(new M(t))},this.addRemoteSdp=function(t,n){n=n||function(){},"Safari"!==DetectRTC.browser.name&&(t.sdp=s.processSdp(t.sdp)),e.setRemoteDescription(new F(t)).then(n,function(e){s.enableLogs&&console.error("setRemoteDescription failed","\n",e,"\n",t.sdp),n()}).catch(function(e){s.enableLogs&&console.error("setRemoteDescription failed","\n",e,"\n",t.sdp),n()})},h=!0;function v(n){n.binaryType="arraybuffer",n.onmessage=function(e){t.onDataChannelMessage(e.data)},n.onopen=function(){t.onDataChannelOpened(n)},n.onerror=function(e){t.onDataChannelError(e)},n.onclose=function(e){t.onDataChannelClosed(e)},n.internalSend=n.send,n.send=function(e){"open"===n.readyState&&n.internalSend(e)},e.channel=n}t.remoteSdp&&(h=!1),this.createDataChannel=function(){v(e.createDataChannel("sctp",{}))},!0!==s.session.data||d||(h?this.createDataChannel():e.ondatachannel=function(e){v(e.channel)}),this.enableDisableVideoEncoding=function(s){if(e.getSenders().forEach(function(e){t||"video"!==e.track.kind||(t=e)}),t&&t.getParameters){var t,n=t.getParameters();n.encodings[1]&&(n.encodings[1].active=!!s),n.encodings[2]&&(n.encodings[2].active=!!s),t.setParameters(n)}},t.remoteSdp&&(t.remoteSdp.remotePeerSdpConstraints&&(r=t.remoteSdp.remotePeerSdpConstraints),j.sdpConstraints=E(r),this.addRemoteSdp(t.remoteSdp,function(){b("createAnswer")})),"two-way"!=s.session.audio&&"two-way"!=s.session.video&&"two-way"!=s.session.screen||(j.sdpConstraints=E({OfferToReceiveAudio:"two-way"==s.session.audio||t.remoteSdp&&t.remoteSdp.remotePeerSdpConstraints&&t.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio,OfferToReceiveVideo:"two-way"==s.session.video||"two-way"==s.session.screen||t.remoteSdp&&t.remoteSdp.remotePeerSdpConstraints&&t.remoteSdp.remotePeerSdpConstraints.OfferToReceiveAudio})),f={};function b(n){e[n](j.sdpConstraints).then(function(n){"Safari"!==DetectRTC.browser.name&&(n.sdp=s.processSdp(n.sdp)),e.setLocalDescription(n).then(function(){s.trickleIce&&(t.onLocalSdp({type:n.type,sdp:n.sdp,remotePeerSdpConstraints:t.remotePeerSdpConstraints||!1,renegotiatingPeer:!!t.renegotiatingPeer||!1,connectionDescription:o.connectionDescription,dontGetRemoteStream:!!t.dontGetRemoteStream,extra:s?s.extra:{},streamsToShare:f}),s.onSettingLocalDescription(o))},function(e){s.enableLogs&&console.error("setLocalDescription error",e)})},function(e){s.enableLogs&&console.error("sdp-error",e)})}e.getLocalStreams().forEach(function(e){f[e.streamid]={isAudio:!!e.isAudio,isVideo:!!e.isVideo,isScreen:!!e.isScreen}}),h&&b("createOffer"),e.nativeClose=e.close,e.close=function(){if(e){try{e.nativeClose!==e.close&&e.nativeClose()}catch(e){}e=null,o.peer=null}},this.peer=e}d=function(){function s(n,s){var e=o(n);return e.videoCodecNumbers?"vp8"===s&&e.vp8LineNumber===e.videoCodecNumbers[0]?n:"vp9"===s&&e.vp9LineNumber===e.videoCodecNumbers[0]?n:"h264"===s&&e.h264LineNumber===e.videoCodecNumbers[0]?n:n=t(n,s,e):n}function t(n,s,e,a){if(t='',"vp8"===s){if(!e.vp8LineNumber)return n;t=e.vp8LineNumber}if("vp9"===s){if(!e.vp9LineNumber)return n;t=e.vp9LineNumber}if("h264"===s){if(!e.h264LineNumber)return n;t=e.h264LineNumber}var t,i=e.videoCodecNumbersOriginal.split("SAVPF")[0]+"SAVPF ",o=[t];return a&&(o=[]),e.videoCodecNumbers.forEach(function(e){e!==t&&o.push(e)}),i+=o.join(" "),n=n.replace(e.videoCodecNumbersOriginal,i)}function o(t){var e={};return t.split("\n").forEach(function(t){0===t.indexOf("m=video")&&(e.videoCodecNumbers=[],t.split("SAVPF")[1].split(" ").forEach(function(n){(n=n.trim())&&n.length&&(e.videoCodecNumbers.push(n),e.videoCodecNumbersOriginal=t)})),-1===t.indexOf("VP8/90000")||e.vp8LineNumber||(e.vp8LineNumber=t.replace("a=rtpmap:",'').split(" ")[0]),-1===t.indexOf("VP9/90000")||e.vp9LineNumber||(e.vp9LineNumber=t.replace("a=rtpmap:",'').split(" ")[0]),-1===t.indexOf("H264/90000")||e.h264LineNumber||(e.h264LineNumber=t.replace("a=rtpmap:",'').split(" ")[0])}),e}function e(e,t,n){return function(t,o,n,i,s){for(var a=-1!==n?n:t.length,e=o;e<a;++e)if(0===t[e].indexOf(i)&&(!s||-1!==t[e].toLowerCase().indexOf(s.toLowerCase())))return e;return null}(e,0,-1,t,n)}function n(t){var n=new RegExp("a=rtpmap:(d+) w+/d+"),e=t.match(n);return e&&2===e.length?e[1]:null}return{removeVPX:function(e){var n=o(e);return e=t(e,"vp9",n,!0),e=t(e,"vp8",n,!0)},disableNACK:function(e){if(!e||"string"!=typeof e)throw"Invalid arguments.";return e=(e=(e=(e=e.replace("a=rtcp-fb:126 nack\r\n",'')).replace("a=rtcp-fb:126 nack pli\r\n","a=rtcp-fb:126 pli\r\n")).replace("a=rtcp-fb:97 nack\r\n",'')).replace("a=rtcp-fb:97 nack pli\r\n","a=rtcp-fb:97 pli\r\n")},prioritize:function(t,e){if(e&&e.getSenders&&e.getSenders().length){if(!t||"string"!=typeof t)throw"Invalid arguments.";e.getSenders().forEach(function(s){for(var e=s.getParameters(),n=0;n<e.codecs.length;n++)if(e.codecs[n].mimeType==t){e.codecs.unshift(e.codecs.splice(n,1));break}s.setParameters(e)})}},removeNonG722:function(e){return e.replace(/m=audio ([0-9]+) RTP\/SAVPF ([0-9 ]*)/g,"m=audio $1 RTP/SAVPF 9")},setApplicationSpecificBandwidth:function(e,t,n){return function(e,t,n){return t?void 0!==_&&_?e:(n&&(t.screen?t.screen<300&&console.warn("It seems that you are using wrong bandwidth value for screen. Screen sharing is expected to fail."):console.warn("It seems that you are not using bandwidth for screen. Screen sharing is expected to fail.")),t.screen&&n&&(e=(e=e.replace(/b=AS([^\r\n]+\r\n)/g,'')).replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n")),(t.audio||t.video)&&(e=e.replace(/b=AS([^\r\n]+\r\n)/g,'')),t.audio&&(e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:"+t.audio+"\r\n")),t.screen?e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.screen+"\r\n"):t.video&&(e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:"+t.video+"\r\n")),e):e}(e,t,n)},setVideoBitrates:function(t,s){return function(s,a){var o,i,r,c,d,u=(a=a||{}).min,h=a.max,t=s.split("\r\n"),l=e(t,"a=rtpmap","VP8/90000");return l&&(c=n(t[l])),c?(o=e(t,"a=rtpmap","rtx/90000"),o&&(d=n(t[o])),o?(i=e(t,"a=fmtp:"+d.toString()),null!==i&&(r="\r\n",r+="a=fmtp:"+c+" x-google-min-bitrate="+(u||"228")+"; x-google-max-bitrate="+(h||"228"),t[i]=t[i].concat(r),s=t.join("\r\n")),s):s):s}(t,s)},setOpusAttributes:function(t,s){return function(a,t){t=t||{};var s,i,r,o=a.split("\r\n"),c=e(o,"a=rtpmap","opus/48000");return c&&(r=n(o[c])),r?(i=e(o,"a=fmtp:"+r.toString()),null===i?a:(s='',s+="; stereo="+(void 0!==t.stereo?t.stereo:"1"),s+="; sprop-stereo="+(void 0!==t["sprop-stereo"]?t["sprop-stereo"]:"1"),void 0!==t.maxaveragebitrate&&(s+="; maxaveragebitrate="+(t.maxaveragebitrate||1048576)),void 0!==t.maxplaybackrate&&(s+="; maxplaybackrate="+(t.maxplaybackrate||1048576)),void 0!==t.cbr&&(s+="; cbr="+(void 0!==t.cbr?t.cbr:"1")),void 0!==t.useinbandfec&&(s+="; useinbandfec="+t.useinbandfec),void 0!==t.usedtx&&(s+="; usedtx="+t.usedtx),void 0!==t.maxptime&&(s+="\r\na=maxptime:"+t.maxptime),o[i]=o[i].concat(s),a=o.join("\r\n"))):a}(t,s)},preferVP9:function(e){return s(e,"vp9")},preferCodec:s,forceStereoAudio:function(s){for(var o,t=s.split("\r\n"),n=null,e=0;e<t.length;e++)if(-1!==t[e].search("opus/48000")){o=extractSdp(t[e],/:(\d+) opus\/48000/i);break}for(e=0;e<t.length;e++)if(-1!==t[e].search("a=fmtp")&&extractSdp(t[e],/a=fmtp:(\d+)/)===o){n=e;break}return null===n?s:(t[n]=t[n].concat("; stereo=1; sprop-stereo=1"),s=t.join("\r\n"))}}}(),window.BandwidthHandler=d,N={processCandidates:function(n,s){var o,e=s.candidate,t=n.candidates,i=t.stun,a=t.turn;if(O(t.reflexive)||(i=t.reflexive),O(t.relay)||(a=t.relay),(t.host||!e.match(/typ host/g))&&(a||!e.match(/typ relay/g))&&(i||!e.match(/typ srflx/g))&&(o=n.iceProtocols,(o.udp||!e.match(/ udp /g))&&(o.tcp||!e.match(/ tcp /g))))return n.enableLogs&&console.debug("Your candidate pairs:",e),{candidate:e,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex}}},L={getIceServers:function(){return[{urls:["stun:webrtcweb.com:7788"],username:"muazkh",credential:"muazkh"},{urls:["turn:webrtcweb.com:7788","turn:webrtcweb.com:8877","turn:webrtcweb.com:4455"],username:"muazkh",credential:"muazkh"},{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun.l.google.com:19302?transport=udp"]}]}};function A(e){if(!0!==currentUserMediaRequest.mutex){currentUserMediaRequest.mutex=!0;var n,s,o,t=JSON.stringify(e.localMediaConstraints);if(currentUserMediaRequest.streams[t])i(currentUserMediaRequest.streams[t].stream,!0);else{if(!!/BB10|BlackBerry/i.test(navigator.userAgent||'')||void 0===navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getUserMedia)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,void navigator.getUserMedia(e.localMediaConstraints,function(e){e.streamid=e.streamid||e.id||b(),e.idInstance=t,i(e)},function(t){e.onLocalMediaError(t,e.localMediaConstraints)});void 0===navigator.mediaDevices&&(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,o=function(){},navigator.mediaDevices={getUserMedia:function(e){return navigator.getUserMedia(e,function(e){e(stream),n=stream},function(e){o(e),s=e}),{then:function(e){if(!n)return e,{then:function(e){s?e(s):o=e}};e(n)}}}}),navigator.mediaDevices.getUserMedia(e.localMediaConstraints).then(function(e){e.streamid=e.streamid||e.id||b(),e.idInstance=t,i(e)}).catch(function(t){e.onLocalMediaError(t,e.localMediaConstraints)})}}else currentUserMediaRequest.queueRequests.push(e);function i(n,o){!function(e,t){e.mandatory&&e.mandatory.chromeMediaSource?t.isScreen=!0:e.mozMediaSource||e.mediaSource?t.isScreen=!0:e.video?t.isVideo=!0:e.audio&&(t.isAudio=!0)}(e.localMediaConstraints,n);var s="ended";"oninactive"in n&&(s="inactive"),n.addEventListener(s,function(){delete currentUserMediaRequest.streams[t],currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.indexOf(e)&&(delete currentUserMediaRequest.queueRequests[currentUserMediaRequest.queueRequests.indexOf(e)],currentUserMediaRequest.queueRequests=I(currentUserMediaRequest.queueRequests))},!1),currentUserMediaRequest.streams[t]={stream:n},currentUserMediaRequest.mutex=!1,currentUserMediaRequest.queueRequests.length&&A(currentUserMediaRequest.queueRequests.shift()),e.onGettingLocalMedia(n,o)}}window.currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[],remove:function(e){this.mutex=!1;var n,t=this.streams[e];t&&(n=(t=t.stream).currentUserMediaRequestOptions,this.queueRequests.indexOf(n)&&(delete this.queueRequests[this.queueRequests.indexOf(n)],this.queueRequests=I(this.queueRequests)),this.streams[e].stream=null,delete this.streams[e])}},r=function(){function e(e){if(e)return"string"==typeof e||void 0===e?e:e.audio&&e.video?null:e.audio?"audio":e.video?"video":void 0}return{setHandlers:function(t,s,o){if(t&&t.addEventListener){if(void 0===s||1==s){var i="ended";"oninactive"in t&&(i="inactive"),t.addEventListener(i,function(){r.onSyncNeeded(this.streamid,i)},!1)}t.mute=function(i,a){i=e(i),void 0!==a&&(s=a),void 0!==i&&"audio"!=i||n(t,"audio").forEach(function(e){e.enabled=!1,o.streamEvents[t.streamid].isAudioMuted=!0}),void 0!==i&&"video"!=i||n(t,"video").forEach(function(e){e.enabled=!1}),void 0!==s&&1!=s||r.onSyncNeeded(t.streamid,"mute",i),o.streamEvents[t.streamid].muteType=i||"both",D(t,"mute",i)},t.unmute=function(i,a){i=e(i),void 0!==a&&(s=a),function(){if(!o.streamEvents[t.streamid].mediaElement)return;var e=o.streamEvents[t.streamid].mediaElement;e.volume=0,function o(t,n,s,e){if(e=(e||0)+1,e>=n)return;setTimeout(function(){s(),o(t,n,s,e)},t)}(200,5,function(){try{e.volume+=.2}catch(t){e.volume=1}})}(),void 0!==i&&"audio"!=i||n(t,"audio").forEach(function(e){e.enabled=!0,o.streamEvents[t.streamid].isAudioMuted=!1}),void 0!==i&&"video"!=i||(n(t,"video").forEach(function(e){e.enabled=!0}),void 0!==i&&"video"==i&&o.streamEvents[t.streamid].isAudioMuted&&function n(e){e||(e=0),++e<100&&o.streamEvents[t.streamid].isAudioMuted&&(t.mute("audio"),setTimeout(function(){n(e)},50))}()),void 0!==s&&1!=s||r.onSyncNeeded(t.streamid,"unmute",i),o.streamEvents[t.streamid].unmuteType=i||"both",D(t,"unmute",i)}}},onSyncNeeded:function(){}}}(),window.addEventListener("message",function(e){e.origin==window.location.origin&&function(e){if("PermissionDeniedError"==e){if(h="PermissionDeniedError",v)return v("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==e&&(h="desktop"),e.sourceId&&v&&v(p=e.sourceId,!0===e.canRequestAudioTrack)}(e.data)}),h="screen";function $(e){if(e){if("desktop"==h)return e(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e("screen"!=h)},2e3)}}_=void 0!==window.InstallTrigger,X=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,window.chrome;function V(t,e){if(_)return e("not-chrome");2!=arguments.length&&(e=t,t="ajhifddimkapgcifgcodmmfdlknahffk");var n=document.createElement("img");n.src="chrome-extension://"+t+"/icon.png",n.onload=function(){h="screen",window.postMessage("are-you-there","*"),setTimeout(function(){e("screen"==h?"installed-disabled":"installed-enabled")},2e3)},n.onerror=function(){e("not-installed")}}function K(t,n){if(_)return t(null,{mozMediaSource:"window",mediaSource:"window"});var e={mandatory:{chromeMediaSource:h,maxWidth:screen.width>1920?screen.width:1920,maxHeight:screen.height>1080?screen.height:1080},optional:[]};"desktop"!=h||p?("desktop"==h&&(e.mandatory.chromeMediaSourceId=p),t(null,e)):n?function(e){if(!e)throw'"callback" parameter is mandatory.';if(p)return e(p);v=e,window.postMessage("audio-plus-tab","*")}(function(n,s){e.mandatory.chromeMediaSourceId=n,s&&(e.canRequestAudioTrack=!0),t("PermissionDeniedError"==n?n:null,e)}):function(e){if(!e)throw'"callback" parameter is mandatory.';if(p)return e(p);v=e,window.postMessage("get-sourceId","*")}(function(n){e.mandatory.chromeMediaSourceId=n,t("PermissionDeniedError"==n?n:null,e)})}function q(t){var e={};return{receive:function(s,a,r){var n,i,o=s.uuid;e[o]||(e[o]=[]),e[o].push(s.message),s.last&&(i=e[o].join(''),s.isobject&&(i=JSON.parse(i)),n={data:i,userid:a,extra:r,latency:(new Date).getTime()-s.sendingTime},t.autoTranslateText?(n.original=n.data,t.Translator.TranslateText(n.data,function(e){n.data=e,t.onmessage(n)})):t.onmessage(n),delete e[o])}}}var Y={send:function(e){var i,a,o=e.connection,c=e.channel,l=e.remoteUserId,t=e.text,n=o.chunkSize||1e3,s='',r=!1;"string"!=typeof t&&(r=!0,t=JSON.stringify(t)),i=b(),a=(new Date).getTime(),!function u(d,t){var e={type:"text",uuid:i,sendingTime:a};d&&(t=d,e.packets=parseInt(t.length/n)),t.length>n?e.message=t.slice(0,n):(e.message=t,e.last=!0,e.isobject=r),c.send(e,l),s=t.slice(e.message.length),s.length&&setTimeout(function(){u(null,s)},o.chunkInterval||100)}(t)}},T={handle:function(t){var e={};t.onFileStart=function(n){var s=document.createElement("div");if(s.title=n.name,s.innerHTML="<label>0%</label> <progress></progress>",n.remoteUserId&&(s.innerHTML+=" (Sharing with:"+n.remoteUserId+")"),t.filesContainer||(t.filesContainer=document.body||document.documentElement),t.filesContainer.insertBefore(s,t.filesContainer.firstChild),!n.remoteUserId)return e[n.uuid]={div:s,progress:s.querySelector("progress"),label:s.querySelector("label")},void(e[n.uuid].progress.max=n.maxChunks);e[n.uuid]||(e[n.uuid]={}),e[n.uuid][n.remoteUserId]={div:s,progress:s.querySelector("progress"),label:s.querySelector("label")},e[n.uuid][n.remoteUserId].progress.max=n.maxChunks},t.onFileProgress=function(t){var n=e[t.uuid];n&&(t.remoteUserId&&!(n=e[t.uuid][t.remoteUserId])||(n.progress.value=t.currentPosition||t.maxChunks||n.progress.max,function(e,t){if(-1!==e.position){var n=+e.position.toFixed(2).split(".")[1]||100;t.innerHTML=n+"%"}}(n.progress,n.label)))},t.onFileEnd=function(t){var s,n=e[t.uuid];n?(!t.remoteUserId||(n=e[t.uuid][t.remoteUserId]))&&(s=n.div,-1!=t.type.indexOf("image")?s.innerHTML='<a href="'+t.url+'" download="'+t.name+'">Download <strong style="color:red;">'+t.name+'</strong> </a><br /><img src="'+t.url+'" title="'+t.name+'" style="max-width: 80%;">':s.innerHTML='<a href="'+t.url+'" download="'+t.name+'">Download <strong style="color:red;">'+t.name+'</strong> </a><br /><iframe src="'+t.url+'" title="'+t.name+'" style="width: 80%;border: 0;height: inherit;margin-top:1em;"></iframe>'):console.error("No such progress-helper element exist.",t)}}},B={handle:function(e){e.autoTranslateText=!1,e.language="en",e.googKey="AIzaSyCgB5hmFY74WYB-EoWkhr9cAGr6TiTHrEE",e.Translator={TranslateText:function(i,n){t=document.createElement("script"),t.type="text/javascript";var t,o,a=encodeURIComponent(i),s="method"+e.token();window[s]=function(e){e.data&&e.data.translations[0]&&n?n(e.data.translations[0].translatedText):e.error&&"Daily Limit Exceeded"===e.error.message?console.error('Text translation failed. Error message: "Daily Limit Exceeded."'):e.error?console.error(e.error.message):console.error(e)},o="https://www.googleapis.com/language/translate/v2?key="+e.googKey+"&target="+(e.language||"en-US")+"&callback=window."+s+"&q="+a,t.src=o,document.getElementsByTagName("head")[0].appendChild(t)},getListOfLanguages:function(s){var n,t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==XMLHttpRequest.DONE){var e=JSON.parse(t.responseText);if(e&&e.data&&e.data.languages)return void s(e.data.languages);if(e.error&&"Daily Limit Exceeded"===e.error.message)return void console.error('Text translation failed. Error message: "Daily Limit Exceeded."');if(e.error)return void console.error(e.error.message);console.error(e)}},n="https://www.googleapis.com/language/translate/v2/languages?key="+e.googKey+"&target=en",t.open("GET",n,!0),t.send(null)}}}};!function(e){C=C||{useDefaultDevices:!0},e.channel=e.sessionid=(U||location.href.replace(/\/|:|#|\?|\$|\^|%|\.|`|~|!|\+|@|\[|\||]|\|*. /g,'').split("\n").join('').split("\r").join(''))+'';var o,S,s=new G(e),j={};function l(t){if(e.socketAutoReConnect=!0,e.socket)t&&t(e.socket);else{if(void 0===y)if("undefined"!=typeof FirebaseConnection)window.SocketConnection=FirebaseConnection;else{if("undefined"==typeof PubNubConnection)throw"SocketConnection.js seems missed.";window.SocketConnection=PubNubConnection}new y(e,function(){t&&t(e.socket)})}}function _(t,n){e.socket.emit("join-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:w(),extra:e.extra,password:void 0!==e.password&&"object"!==i(e.password)?e.password:''},function(o,i){if(!0===o){if(e.enableLogs&&console.log("isRoomJoined: ",o," roomid: ",e.sessionid),e.peers[e.sessionid])return;s.onNegotiationNeeded(t)}!1===o&&e.enableLogs&&console.warn("isRoomJoined: ",i," roomid: ",e.sessionid),n(o,e.sessionid,i)})}function h(t){e.enableLogs&&console.log("Sending open-room signal to socket.io"),e.waitingForLocalMedia=!1,e.socket.emit("open-room",{sessionid:e.sessionid,session:e.session,mediaConstraints:e.mediaConstraints,sdpConstraints:e.sdpConstraints,streams:w(),extra:e.extra,identifier:e.publicRoomIdentifier,password:void 0!==e.password&&"object"!==i(e.password)?e.password:''},function(n,s){!0===n&&(e.enableLogs&&console.log("isRoomOpened: ",n," roomid: ",e.sessionid),t(n,e.sessionid)),!1===n&&(e.enableLogs&&console.warn("isRoomOpened: ",s," roomid: ",e.sessionid),t(n,e.sessionid,s))})}function w(){try{return e.streamEvents.selectAll("local").map(function(e){return{streamid:e.streamid,tracks:e.stream.getTracks().length}})}catch(e){return[]}}function O(i,o){if(e.dontCaptureUserMedia||i.isDataOnly)o();else{var n,a={};i.localPeerSdpConstraints.OfferToReceiveAudio&&(a.audio=e.mediaConstraints.audio),i.localPeerSdpConstraints.OfferToReceiveVideo&&(a.video=e.mediaConstraints.video),n=i.session||e.session,n.oneway&&"two-way"!==n.audio&&"two-way"!==n.video&&"two-way"!==n.screen?o():(n.oneway&&n.audio&&"two-way"===n.audio&&(n={audio:!0}),(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:t(e)}).then(function(i){i.isScreen=!0,s.onGettingLocalMedia(i),!n.audio&&!n.video||t(e)?o(i):e.invokeGetUserMedia(null,o)},function(){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(i,s){e.invokeGetUserMedia({audio:!!t(e)&&k(s),video:s,isScreen:!0},!n.audio&&!n.video||t(e)?o:e.invokeGetUserMedia(null,o))}):(n.audio||n.video)&&e.invokeGetUserMedia(null,o,n)))}}function E(s,t){s?(t.audio&&n(s,"audio").forEach(function(e){e.applyConstraints(t.audio)}),t.video&&n(s,"video").forEach(function(e){e.applyConstraints(t.video)})):e.enableLogs&&console.error("No stream to applyConstraints.")}function v(t,n,o){n?s.replaceTrack(t,n,o):e.peers.getAllParticipants().forEach(function(e){s.replaceTrack(t,e,o)})}s.onGettingLocalMedia=function(t,s){if(s=s||function(){},j[t.streamid])s();else{j[t.streamid]=!0;try{t.type="local"}catch(e){}e.setStreamEndHandler(t),H(t,function(o){o.id=t.streamid,o.muted=!0,o.volume=0,-1===e.attachStreams.indexOf(t)&&e.attachStreams.push(t),void 0!==r&&r.setHandlers(t,!0,e),e.streamEvents[t.streamid]={stream:t,type:"local",mediaElement:o,userid:e.userid,extra:e.extra,streamid:t.streamid,isAudioMuted:!0};try{!function(e,t){if(t.stream&&n(t.stream,"audio").length){if(!e||!t)throw"Both arguments are required.";if(e.onspeaking&&e.onsilence){if("undefined"==typeof hark)throw"hark.js not found.";hark(t.stream,{onspeaking:function(){e.onspeaking(t)},onsilence:function(){e.onsilence(t)},onvolumechange:function(n,s){e.onvolumechange&&e.onvolumechange(f({volume:n,threshold:s},t))}})}}}(e,e.streamEvents[t.streamid]),P(e,e.streamEvents[t.streamid]),e.onstream(e.streamEvents[t.streamid])}catch(e){}s()},e)}},s.onGettingRemoteMedia=function(t,n){try{t.type="remote"}catch(e){}e.setStreamEndHandler(t,"remote-stream"),H(t,function(s){s.id=t.streamid,void 0!==r&&r.setHandlers(t,!1,e),e.streamEvents[t.streamid]={stream:t,type:"remote",userid:n,extra:e.peers[n]?e.peers[n].extra:{},mediaElement:s,streamid:t.streamid},P(e,e.streamEvents[t.streamid]),e.onstream(e.streamEvents[t.streamid])},e)},s.onRemovingRemoteMedia=function(t,s){var n=e.streamEvents[t.streamid];n||(n={stream:t,type:"remote",userid:s,extra:e.peers[s]?e.peers[s].extra:{},streamid:t.streamid,mediaElement:e.streamEvents[t.streamid]?e.streamEvents[t.streamid].mediaElement:null}),e.peersBackup[n.userid]&&(n.extra=e.peersBackup[n.userid].extra),e.onstreamended(n),delete e.streamEvents[t.streamid]},s.onNegotiationNeeded=function(t,s,n){n=n||function(){};var o={remoteUserId:s=s||t.remoteUserId,message:t=t||'',sender:e.userid};t.remoteUserId&&t.message&&t.sender&&(o=t),l(function(){e.socket.emit(e.socketMessageEvent,o,n)})},s.onUserLeft=function(t){e.deletePeer(t)},s.disconnectWith=function(t,n){e.socket&&e.socket.emit("disconnect-with",t,n||function(){}),e.deletePeer(t)},e.socketOptions={transport:"polling"},e.openOrJoin=function(n,t){t=t||function(){},e.checkPresence(n,function(c,o){if(c){e.sessionid=o;var n=!!e.session.oneway,r=g(e.session),a={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},i={OfferToReceiveAudio:n?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:n?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo},s={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:n,isDataOnly:r,localPeerSdpConstraints:i,remotePeerSdpConstraints:a},sender:e.userid};O(s.message,function(){_(s,t)})}else e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=o||e.sessionid,g(e.session)?h(t):e.captureUserMedia(function(){h(t)})})},e.waitingForLocalMedia=!1,e.open=function(n,t){t=t||function(){},e.waitingForLocalMedia=!0,e.isInitiator=!0,e.sessionid=n||e.sessionid,l(function(){g(e.session)?h(t):e.captureUserMedia(function(){h(t)})})},e.peersBackup={},e.deletePeer=function(t){if(t&&e.peers[t]){var s,n={userid:t,extra:e.peers[t]?e.peers[t].extra:{}};if(e.peersBackup[n.userid]&&(n.extra=e.peersBackup[n.userid].extra),e.onleave(n),e.peers[t]){if(e.peers[t].streams.forEach(function(e){e.stop()}),s=e.peers[t].peer,s&&"closed"!==s.iceConnectionState)try{s.close()}catch(e){}e.peers[t]&&(e.peers[t].peer=null,delete e.peers[t])}}},e.rejoin=function(t){if(!e.isInitiator&&t&&Object.keys(t).length){var n={};e.peers[t.remoteUserId]&&(n=e.peers[t.remoteUserId].extra,e.deletePeer(t.remoteUserId)),t&&t.remoteUserId&&(e.join(t.remoteUserId),e.onReConnecting({userid:t.remoteUserId,extra:n}))}},e.join=function(n,t){e.sessionid=!!n&&(n.sessionid||n.remoteUserId||n)||e.sessionid,e.sessionid+='';var o,r,c,d=!1,i=!1,s=!1,a=!1;return(n&&n.session||!n||"string"==typeof n)&&(r=n&&n.session||e.session,s=!!r.oneway,a=g(r),i={OfferToReceiveAudio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:e.sdpConstraints.mandatory.OfferToReceiveVideo},d={OfferToReceiveAudio:s?!!e.session.audio:e.sdpConstraints.mandatory.OfferToReceiveAudio,OfferToReceiveVideo:s?!!e.session.video||!!e.session.screen:e.sdpConstraints.mandatory.OfferToReceiveVideo}),c=function(){},"function"==typeof(t=t||{})&&(c=t,t={}),void 0!==t.localPeerSdpConstraints&&(d=t.localPeerSdpConstraints),void 0!==t.remotePeerSdpConstraints&&(i=t.remotePeerSdpConstraints),void 0!==t.isOneWay&&(s=t.isOneWay),void 0!==t.isDataOnly&&(a=t.isDataOnly),o={remoteUserId:e.sessionid,message:{newParticipationRequest:!0,isOneWay:s,isDataOnly:a,localPeerSdpConstraints:d,remotePeerSdpConstraints:i},sender:e.userid},O(o.message,function(){l(function(){_(o,c)})}),o},e.publicRoomIdentifier='',e.getUserMedia=e.captureUserMedia=function(o,i){o=o||function(){};var n=i||e.session;e.dontCaptureUserMedia||g(n)?o():(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:t(e)}).then(function(a){if(a.isScreen=!0,s.onGettingLocalMedia(a),!n.audio&&!n.video||t(e))o(a);else{var r,c={};for(r in n)"screen"!==r&&(c[r]=n[r]);e.invokeGetUserMedia(i,o,c)}},function(){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(s,a){if(s)throw s;e.invokeGetUserMedia({audio:!!t(e)&&k(a),video:a,isScreen:!0},function(r){if(!n.audio&&!n.video||t(e))o(r);else{var s,a={};for(s in n)"screen"!==s&&(a[s]=n[s]);e.invokeGetUserMedia(i,o,a)}})}):(n.audio||n.video)&&e.invokeGetUserMedia(i,o,n))},e.onbeforeunload=function(n,t){e.closeBeforeUnload&&(e.peers.getAllParticipants().forEach(function(t){s.onNegotiationNeeded({userLeft:!0},t),e.peers[t]&&e.peers[t].peer&&e.peers[t].peer.close(),delete e.peers[t]}),t||e.closeSocket(),e.isInitiator=!1)},window.ignoreBeforeUnload?e.closeBeforeUnload=!1:(e.closeBeforeUnload=!0,window.addEventListener("beforeunload",e.onbeforeunload,!1)),e.userid=b(),e.changeUserId=function(n,t){t=t||function(){},e.userid=n||b(),e.socket.emit("changed-uuid",e.userid,t)},e.extra={},e.attachStreams=[],e.session={audio:!0,video:!0},e.enableFileSharing=!1,e.bandwidth={screen:!1,audio:!1,video:!1},e.codecs={audio:"opus",video:"VP9"},e.processSdp=function(t){return W()?t:"Safari"===DetectRTC.browser.name?t:("VP8"===e.codecs.video.toUpperCase()&&(t=d.preferCodec(t,"vp8")),"VP9"===e.codecs.video.toUpperCase()&&(t=d.preferCodec(t,"vp9")),"H264"===e.codecs.video.toUpperCase()&&(t=d.preferCodec(t,"h264")),"G722"===e.codecs.audio&&(t=d.removeNonG722(t)),"Firefox"===DetectRTC.browser.name?t:((e.bandwidth.video||e.bandwidth.screen)&&(t=d.setApplicationSpecificBandwidth(t,e.bandwidth,!!e.session.screen)),e.bandwidth.video&&(t=d.setVideoBitrates(t,{min:8*e.bandwidth.video*1024,max:8*e.bandwidth.video*1024})),e.bandwidth.audio&&(t=d.setOpusAttributes(t,{maxaveragebitrate:8*e.bandwidth.audio*1024,maxplaybackrate:8*e.bandwidth.audio*1024,stereo:1,maxptime:3})),t))},void 0!==d&&(e.BandwidthHandler=e.CodecsHandler=d),e.mediaConstraints={audio:{mandatory:{},optional:e.bandwidth.audio?[{bandwidth:8*e.bandwidth.audio*1024||1048576}]:[]},video:{mandatory:{},optional:e.bandwidth.video?[{bandwidth:8*e.bandwidth.video*1024||1048576},{facingMode:"user"}]:[{facingMode:"user"}]}},"Firefox"===DetectRTC.browser.name&&(e.mediaConstraints={audio:!0,video:!0}),C.useDefaultDevices||DetectRTC.isMobileDevice||DetectRTC.load(function(){if(DetectRTC.MediaDevices.forEach(function(s){"audioinput"===s.kind&&!1!==e.mediaConstraints.audio&&(t=s),"videoinput"===s.kind&&!1!==e.mediaConstraints.video&&(n=s)}),t){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.audio?e.mediaConstraints.audio.deviceId=t.id:e.mediaConstraints.audio={deviceId:t.id});1==e.mediaConstraints.audio&&(e.mediaConstraints.audio={mandatory:{},optional:[]}),e.mediaConstraints.audio.optional||(e.mediaConstraints.audio.optional=[]);var t,n,s=[{sourceId:t.id}];e.mediaConstraints.audio.optional=s.concat(e.mediaConstraints.audio.optional)}if(n){if("Firefox"===DetectRTC.browser.name)return void(!0!==e.mediaConstraints.video?e.mediaConstraints.video.deviceId=n.id:e.mediaConstraints.video={deviceId:n.id});1==e.mediaConstraints.video&&(e.mediaConstraints.video={mandatory:{},optional:[]}),e.mediaConstraints.video.optional||(e.mediaConstraints.video.optional=[]),s=[{sourceId:n.id}],e.mediaConstraints.video.optional=s.concat(e.mediaConstraints.video.optional)}}),e.sdpConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},optional:[{VoiceActivityDetection:!1}]},e.sdpSemantics=null,e.iceCandidatePoolSize=null,e.bundlePolicy=null,e.rtcpMuxPolicy=null,e.iceTransportPolicy=null,e.optionalArgument={optional:[{DtlsSrtpKeyAgreement:!0},{googImprovedWifiBwe:!0},{googScreencastMinBitrate:300},{googIPv6:!0},{googDscp:!0},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:85},{googSuspendBelowMinBitrate:!0},{googCpuOveruseDetection:!0}],mandatory:{}},e.iceServers=L.getIceServers(e),e.candidates={host:!0,stun:!0,turn:!0},e.iceProtocols={tcp:!0,udp:!0},e.onopen=function(t){e.enableLogs&&console.info("Data connection has been opened between you & ",t.userid)},e.onclose=function(t){e.enableLogs&&console.warn("Data connection has been closed between you & ",t.userid)},e.onerror=function(t){e.enableLogs&&console.error(t.userid,"data-error",t)},e.onmessage=function(t){e.enableLogs&&console.debug("data-message",t.userid,t.data)},e.send=function(t,n){e.peers.send(t,n)},e.close=e.disconnect=e.leave=function(){e.onbeforeunload(!1,!0)},e.closeEntireSession=function(t){t=t||function(){},e.socket.emit("close-entire-session",function n(){e.getAllParticipants().length?setTimeout(n,100):(e.onEntireSessionClosed({sessionid:e.sessionid,userid:e.userid,extra:e.extra}),e.changeUserId(null,function(){e.close(),t()}))})},e.onEntireSessionClosed=function(t){e.enableLogs&&console.info("Entire session is closed: ",t.sessionid,t.extra)},e.onstream=function(t){var n,s=e.videosContainer;s.insertBefore(t.mediaElement,s.firstChild),n=t.mediaElement.play(),void 0===n?setTimeout(function(){t.mediaElement.play()},2e3):n.catch(function(){}).then(function(){setTimeout(function(){t.mediaElement.play()},2e3)})},e.onstreamended=function(e){e.mediaElement||(e.mediaElement=document.getElementById(e.streamid)),e.mediaElement&&e.mediaElement.parentNode&&e.mediaElement.parentNode.removeChild(e.mediaElement)},e.direction="many-to-many",e.removeStream=function(n,s){var t;e.attachStreams.forEach(function(e){e.id===n&&(t=e)}),t?(e.peers.getAllParticipants().forEach(function(n){if(!s||n===s){var o=e.peers[n];try{o.peer.removeStream(t)}catch(e){}}}),e.renegotiate()):console.warn("No such stream exist.",n)},e.addStream=function(n,i){if(n.getTracks)return-1===e.attachStreams.indexOf(n)&&(n.streamid||(n.streamid=n.id),e.attachStreams.push(n)),void e.renegotiate(i);function o(t){n.streamCallback&&n.streamCallback(t),e.renegotiate(i)}g(n)?e.renegotiate(i):(n.audio||n.video||n.screen)&&(n.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:t(e)}).then(function(i){i.isScreen=!0,s.onGettingLocalMedia(i),!n.audio&&!n.video||t(e)?o(i):e.invokeGetUserMedia(null,function(e){o(e)})},function(){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(s,i){if(s)return"PermissionDeniedError"===s?(n.streamCallback&&n.streamCallback(null),void(e.enableLogs&&console.error("User rejected to share his screen."))):alert(s);e.invokeGetUserMedia({audio:!!t(e)&&k(i),video:i,isScreen:!0},function(s){!n.audio&&!n.video||t(e)?o(s):e.invokeGetUserMedia(null,function(e){o(e)})})}):(n.audio||n.video)&&e.invokeGetUserMedia(null,o))},e.invokeGetUserMedia=function(t,i,o){o||(o=e.session),t||(t=e.mediaConstraints),A({onGettingLocalMedia:function(e){var o=t.video;o&&(o.mediaSource||o.mozMediaSource?e.isScreen=!0:o.mandatory&&o.mandatory.chromeMediaSource&&(e.isScreen=!0)),e.isScreen||(e.isVideo=!!n(e,"video").length,e.isAudio=!e.isVideo&&n(e,"audio").length),s.onGettingLocalMedia(e,function(){"function"==typeof i&&i(e)})},onLocalMediaError:function(e,t){s.onLocalMediaError(e,t)},localMediaConstraints:t||{audio:!!o.audio&&t.audio,video:!!o.video&&t.video}})},e.applyConstraints=function(n,t){if(u&&u.prototype.applyConstraints){var s;if(t)return e.streamEvents[t]&&(s=e.streamEvents[t].stream),void E(s,n);e.attachStreams.forEach(function(e){E(e,n)})}else alert("track.applyConstraints is NOT supported in your browser.")},e.replaceTrack=function(o,a,r){if(o=o||{},c.prototype.getSenders)if(o instanceof u)v(o,a,r);else{if(o instanceof m)return n(o,"video").length&&v(n(o,"video")[0],a,!0),void(n(o,"audio").length&&v(n(o,"audio")[0],a,!1));if(g(o))throw"connection.replaceTrack requires audio and/or video and/or screen.";(o.audio||o.video||o.screen)&&(o.screen?"Edge"===DetectRTC.browser.name?navigator.getDisplayMedia({video:!0,audio:t(e)}).then(function(n){n.isScreen=!0,s.onGettingLocalMedia(n),!o.audio&&!o.video||t(e)?i(n):e.invokeGetUserMedia(null,i)},function(){console.error("Unable to capture screen on Edge. HTTPs and version 17+ is required.")}):e.getScreenConstraints(function(n,s){if(n)return alert(n);e.invokeGetUserMedia({audio:!!t(e)&&k(s),video:s,isScreen:!0},!o.audio&&!o.video||t(e)?i:e.invokeGetUserMedia(null,i))}):(o.audio||o.video)&&e.invokeGetUserMedia(null,i))}else e.addStream(o);function i(t){e.replaceTrack(t,a,r||o.video||o.screen)}},e.resetTrack=function(t,n){t||(t=e.getAllParticipants()),"string"==typeof t&&(t=[t]),t.forEach(function(s){var t=e.peers[s].peer;void 0!==n&&!0!==n||!t.lastVideoTrack||e.replaceTrack(t.lastVideoTrack,s,!0),void 0!==n&&!1!==n||!t.lastAudioTrack||e.replaceTrack(t.lastAudioTrack,s,!1)})},e.renegotiate=function(t){t?s.renegotiatePeer(t):e.peers.getAllParticipants().forEach(function(e){s.renegotiatePeer(e)})},e.setStreamEndHandler=function(t,n){if(t&&t.addEventListener&&(n=!!n,!t.alreadySetEndHandler)){t.alreadySetEndHandler=!0;var s="ended";"oninactive"in t&&(s="inactive"),t.addEventListener(s,function(){if(t.idInstance&&currentUserMediaRequest.remove(t.idInstance),!n){var s,i,o=[];e.attachStreams.forEach(function(e){e.id!=t.id&&o.push(e)}),e.attachStreams=o}s=e.streamEvents[t.streamid],(s||(s={stream:t,streamid:t.streamid,type:n?"remote":"local",userid:e.userid,extra:e.extra,mediaElement:e.streamEvents[t.streamid]?e.streamEvents[t.streamid].mediaElement:null}),n&&e.peers[s.userid])&&(i=e.peers[s.userid].peer,o=[],i.getRemoteStreams().forEach(function(e){e.id!=t.id&&o.push(e)}),e.peers[s.userid].streams=o),s.userid===e.userid&&"remote"===s.type||(e.peersBackup[s.userid]&&(s.extra=e.peersBackup[s.userid].extra),e.onstreamended(s),delete e.streamEvents[t.streamid])},!1)}},e.onMediaError=function(t,n){e.enableLogs&&console.error(t,n)},e.autoCloseEntireSession=!1,e.filesContainer=e.videosContainer=document.body||document.documentElement,e.isInitiator=!1,e.shareFile=s.shareFile,void 0!==T&&T.handle(e),void 0!==B&&B.handle(e),e.token=b,e.onNewParticipant=function(t,n){e.acceptParticipationRequest(t,n)},e.acceptParticipationRequest=function(t,e){e.successCallback&&(e.successCallback(),delete e.successCallback),s.createNewPeer(t,e)},void 0!==r&&(e.StreamsHandler=r),e.onleave=function(){},e.invokeSelectFileDialog=function(t){var e=new x;e.accept="*.*",e.selectSingleFile(t)},e.onmute=function(e){if(e&&e.mediaElement)if("both"===e.muteType||"video"===e.muteType){e.mediaElement.src=null;var t=e.mediaElement.pause();void 0!==t?t.then(function(){e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}):e.mediaElement.poster=e.snapshot||"https://cdn.webrtc-experiment.com/images/muted.png"}else"audio"===e.muteType&&(e.mediaElement.muted=!0)},e.onunmute=function(e){e&&e.mediaElement&&e.stream&&("both"===e.unmuteType||"video"===e.unmuteType?(e.mediaElement.poster=null,e.mediaElement.srcObject=e.stream,e.mediaElement.play()):"audio"===e.unmuteType&&(e.mediaElement.muted=!1))},e.onExtraDataUpdated=function(t){t.status="online",e.onUserStatusChanged(t,!0)},e.getAllParticipants=function(t){return e.peers.getAllParticipants(t)},void 0!==r&&(r.onSyncNeeded=function(t,n,o){e.peers.getAllParticipants().forEach(function(e){s.onNegotiationNeeded({streamid:t,action:n,streamSyncNeeded:!0,type:o||"both"},e)})}),e.connectSocket=function(e){l(e)},e.closeSocket=function(){try{a.a.sockets={}}catch(e){}e.socket&&("function"==typeof e.socket.disconnect&&e.socket.disconnect(),"function"==typeof e.socket.resetProps&&e.socket.resetProps(),e.socket=null)},e.getSocket=function(t){return!t&&e.enableLogs&&console.warn("getSocket.callback paramter is required."),t=t||function(){},e.socket?t(e.socket):l(function(){t(e.socket)}),e.socket},e.getRemoteStreams=s.getRemoteStreams,S=["selectFirst","selectAll","forEach"],(e.streamEvents={selectFirst:function(t){return e.streamEvents.selectAll(t)[0]},selectAll:function(t){t||(t={local:!0,remote:!0,isScreen:!0,isAudio:!0,isVideo:!0}),"local"==t&&(t={local:!0}),"remote"==t&&(t={remote:!0}),"screen"==t&&(t={isScreen:!0}),"audio"==t&&(t={isAudio:!0}),"video"==t&&(t={isVideo:!0});var n=[];return Object.keys(e.streamEvents).forEach(function(i){var s,o=e.streamEvents[i];-1===S.indexOf(i)&&(s=!0,t.local&&"local"===o.type&&(s=!1),t.remote&&"remote"===o.type&&(s=!1),t.isScreen&&o.stream.isScreen&&(s=!1),t.isVideo&&o.stream.isVideo&&(s=!1),t.isAudio&&o.stream.isAudio&&(s=!1),t.userid&&o.userid===t.userid&&(s=!1),!1===s&&n.push(o))}),n}},e.socketURL="/",e.socketMessageEvent="RTCMultiConnection-Message",e.socketCustomEvent="RTCMultiConnection-Custom-Message",e.DetectRTC=DetectRTC,e.setCustomSocketEvent=function(t){t&&(e.socketCustomEvent=t),e.socket&&e.socket.emit("set-custom-socket-event-listener",e.socketCustomEvent)},e.getNumberOfBroadcastViewers=function(t,n){e.socket&&t&&n&&e.socket.emit("get-number-of-users-in-specific-broadcast",t,n)},e.onNumberOfBroadcastViewersUpdated=function(t){e.enableLogs&&e.isInitiator&&console.info("Number of broadcast (",t.broadcastId,") viewers",t.numberOfBroadcastViewers)},e.onUserStatusChanged=function(t,n){e.enableLogs&&!n&&console.info(t.userid,t.status)},e.getUserMediaHandler=A,e.multiPeersHandler=s,e.enableLogs=!0,e.setCustomSocketHandler=function(e){void 0!==y&&(y=e)},e.chunkSize=4e4,e.maxParticipantsAllowed=1e3,e.disconnectWith=s.disconnectWith,e.checkPresence=function(t,n){t=t||e.sessionid,"SSEConnection"!==y.name?e.socket?e.socket.emit("check-presence",t+'',function(t,s,o){e.enableLogs&&console.log("checkPresence.isRoomExist: ",t," roomid: ",s),n(t,s,o)}):e.connectSocket(function(){e.checkPresence(t,n)}):SSEConnection.checkPresence(t,function(t,s,o){if(!e.socket)return t||(e.userid=s),void e.connectSocket(function(){n(t,s,o)});n(t,s)})},e.onReadyForOffer=function(t,n){e.multiPeersHandler.createNewPeer(t,n)},e.setUserPreferences=function(t){return e.dontAttachStream&&(t.dontAttachLocalStream=!0),e.dontGetRemoteStream&&(t.dontGetRemoteStream=!0),t},e.updateExtraData=function(){e.socket.emit("extra-data-updated",e.extra)},e.enableScalableBroadcast=!1,e.maxRelayLimitPerUser=3,e.dontCaptureUserMedia=!1,e.dontAttachStream=!1,e.dontGetRemoteStream=!1,e.onReConnecting=function(t){e.enableLogs&&console.info("ReConnecting with",t.userid,"...")},e.beforeAddingStream=function(e){return e},e.beforeRemovingStream=function(e){return e},e.checkIfChromeExtensionAvailable=$,"undefined"!=typeof isFirefoxExtensionAvailable&&(e.checkIfChromeExtensionAvailable=isFirefoxExtensionAvailable),e.getChromeExtensionStatus=V,e.getScreenConstraints=function(s,n){t(e,n)&&(n=!0),K(function(n,t){n||(t=e.modifyScreenConstraints(t),s(n,t))},n)},e.modifyScreenConstraints=function(e){return e},e.onPeerStateChanged=function(t){e.enableLogs&&-1!==t.iceConnectionState.search(/closed|failed/gi)&&console.error("Peer connection is closed between you & ",t.userid,t.extra,"state:",t.iceConnectionState)},e.isOnline=!0,z("online",function(){e.isOnline=!0}),z("offline",function(){e.isOnline=!1}),e.isLowBandwidth=!1,navigator&&navigator.connection&&navigator.connection.type&&(e.isLowBandwidth=-1!==navigator.connection.type.toString().toLowerCase().search(/wifi|cell/g),e.isLowBandwidth))&&((e.bandwidth={audio:!1,video:!1,screen:!1},e.mediaConstraints.audio&&e.mediaConstraints.audio.optional&&e.mediaConstraints.audio.optional.length)&&(o=[],e.mediaConstraints.audio.optional.forEach(function(e){void 0===e.bandwidth&&o.push(e)}),e.mediaConstraints.audio.optional=o),e.mediaConstraints.video&&e.mediaConstraints.video.optional&&e.mediaConstraints.video.optional.length&&(o=[],e.mediaConstraints.video.optional.forEach(function(e){void 0===e.bandwidth&&o.push(e)}),e.mediaConstraints.video.optional=o)),e.getExtraData=function(t,n){if(!t)throw"remoteUserId is required.";if(!n)return e.peers[t]?e.peers[t].extra:e.peersBackup[t]?e.peersBackup[t].extra:{};e.socket.emit("get-remote-user-extra-data",t,function(e,t,s){n(e,t,s)})},C.autoOpenOrJoin&&e.openOrJoin(e.sessionid),e.onUserIdAlreadyTaken=function(t){e.close(),e.closeSocket(),e.isInitiator=!1,e.userid=e.token(),e.join(e.sessionid),e.enableLogs&&console.warn("Userid already taken.",t,"Your new userid:",e.userid)},e.trickleIce=!0,e.version="3.6.5",e.onSettingLocalDescription=function(t){e.enableLogs&&console.info("Set local description for remote user",t.userid)},e.resetScreen=function(){p=null,DetectRTC&&DetectRTC.screen&&delete DetectRTC.screen.sourceId,currentUserMediaRequest={streams:[],mutex:!1,queueRequests:[]}},e.autoCreateMediaElement=!0,e.password=null,e.setPassword=function(n,t){t=t||function(){},e.socket?e.socket.emit("set-password",n,t):(e.password=n,t(!0,e.sessionid,null))},e.errors={ROOM_NOT_AVAILABLE:"Room not available",INVALID_PASSWORD:"Invalid password",USERID_NOT_AVAILABLE:"User ID does not exist",ROOM_PERMISSION_DENIED:"Room permission denied",ROOM_FULL:"Room full",DID_NOT_JOIN_ANY_ROOM:"Did not join any room yet",INVALID_SOCKET:"Invalid socket",PUBLIC_IDENTIFIER_MISSING:"publicRoomIdentifier is required",INVALID_ADMIN_CREDENTIAL:"Invalid username or password attempted"}}(this)}}).call(this,e(73).Buffer,e(31),e(49))},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(e){e.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(n,a){var s,o,i,t=n[1]||'',e=n[3];return e?a&&"function"==typeof btoa?(s=(i=e,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),o=e.sources.map(function(t){return"/*# sourceURL="+e.sourceRoot+t+" */"}),[t].concat(o).concat([s]).join("\n")):[t].join("\n"):t}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join('')},e.i=function(s,o){"string"==typeof s&&(s=[[null,s,'']]);for(var t,i,a={},n=0;n<this.length;n++)i=this[n][0],"number"==typeof i&&(a[i]=!0);for(n=0;n<s.length;n++)t=s[n],"number"==typeof t[0]&&a[t[0]]||(o&&!t[2]?t[2]=o:o&&(t[2]="("+t[2]+") and ("+o+")"),e.push(t))},e}},null,function(e){e.exports=function(t){if(e="undefined"!=typeof window&&window.location,!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var e,n=e.protocol+"//"+e.host,s=n+e.pathname.replace(/\/[^/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(o,i){var t,e=i.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(e)?o:(t=0===e.indexOf("//")?e:0===e.indexOf("/")?n+e:s+e.replace(/^\.\//,''),"url("+JSON.stringify(t)+")")})}},function(l,o){'use strict';o.byteLength=function(n){var e=i(n),s=e[0],t=e[1];return 3*(s+t)/4-t},o.toByteArray=function(n){var t,s,d=i(n),l=d[0],c=d[1],o=new r(function(n,t,e){return 3*(t+e)/4-e}(0,l,c)),a=0,u=c>0?l-4:l;for(t=0;t<u;t+=4)s=e[n.charCodeAt(t)]<<18|e[n.charCodeAt(t+1)]<<12|e[n.charCodeAt(t+2)]<<6|e[n.charCodeAt(t+3)],o[a++]=s>>16&255,o[a++]=s>>8&255,o[a++]=255&s;return 2===c&&(s=e[n.charCodeAt(t)]<<2|e[n.charCodeAt(t+1)]>>4,o[a++]=255&s),1===c&&(s=e[n.charCodeAt(t)]<<10|e[n.charCodeAt(t+1)]<<4|e[n.charCodeAt(t+2)]>>2,o[a++]=s>>8&255,o[a++]=255&s),o},o.fromByteArray=function(n){for(var e,s=n.length,a=s%3,i=[],o=0,r=s-a;o<r;o+=16383)i.push(c(n,o,o+16383>r?r:o+16383));return 1===a?(e=n[s-1],i.push(t[e>>2]+t[e<<4&63]+"==")):2===a&&(e=(n[s-2]<<8)+n[s-1],i.push(t[e>>10]+t[e>>4&63]+t[e<<2&63]+"=")),i.join('')};for(var t=[],e=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,a=s.length;n<a;++n)t[n]=s[n],e[s.charCodeAt(n)]=n;function i(n){var e,t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return e=n.indexOf("="),-1===e&&(e=t),[e,e===t?0:4-e%4]}function c(s,a,r){for(var n,o,i=[],e=a;e<r;e+=3)o=(s[e]<<16&16711680)+(s[e+1]<<8&65280)+(255&s[e+2]),i.push(t[(n=o)>>18&63]+t[n>>12&63]+t[n>>6&63]+t[63&n]);return i.join('')}e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63},function(t,e){e.read=function(c,r,h,i,u){var t,s,m=8*u-i-1,d=(1<<m)-1,l=d>>1,e=-7,n=h?u-1:0,a=h?-1:1,o=c[r+n];for(n+=a,t=o&(1<<-e)-1,o>>=-e,e+=m;e>0;t=256*t+c[r+n],n+=a,e-=8);for(s=t&(1<<-e)-1,t>>=-e,e+=i;e>0;s=256*s+c[r+n],n+=a,e-=8);if(0===t)t=1-l;else{if(t===d)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,i),t-=l}return(o?-1:1)*s*Math.pow(2,t-i)},e.write=function(l,t,u,f,n,m){var e,s,i,c=8*m-n-1,r=(1<<c)-1,o=r>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,a=f?0:m-1,d=f?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,e=r):(e=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-e))<1&&(e--,i*=2),(t+=e+o>=1?h/i:h*Math.pow(2,1-o))*i>=2&&(e++,i/=2),e+o>=r?(s=0,e=r):e+o>=1?(s=(t*i-1)*Math.pow(2,n),e+=o):(s=t*Math.pow(2,o-1)*Math.pow(2,n),e=0));n>=8;l[u+a]=255&s,a+=d,s/=256,n-=8);for(e=e<<n|s,c+=n;c>0;l[u+a]=255&e,a+=d,e/=256,c-=8);l[u+a-d]|=128*p}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(n,o,e){var s=e(145),t=e(74)("socket.io-client:url");n.exports=function(n,o){var i,e=n;return o=o||"undefined"!=typeof location&&location,null==n&&(n=o.protocol+"//"+o.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?o.protocol+n:o.host+n),/^(https?|wss?):\/\//.test(n)||(t("protocol-less url %s",n),n=void 0!==o?o.protocol+"//"+n:"https://"+n),t("parse %s",n),e=s(n)),e.port||(/^(http|ws)$/.test(e.protocol)?e.port="80":/^(http|ws)s$/.test(e.protocol)&&(e.port="443")),e.path=e.path||"/",i=-1!==e.host.indexOf(":")?"["+e.host+"]":e.host,e.id=e.protocol+"://"+i+":"+e.port,e.href=e.protocol+"://"+i+(o&&o.port===e.port?'':":"+e.port),e}},function(n,e,s){function t(n){var s;function t(){if(t.enabled){var n,i,a,o=t,r=+new Date,c=r-(s||r);o.diff=c,o.prev=s,o.curr=r,s=r;for(n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];n[0]=e.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O"),a=0,n[0]=n[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;a++;var i,s=e.formatters[r];return"function"==typeof s&&(i=n[a],t=s.call(o,i),n.splice(a,1),a--),t}),e.formatArgs.call(o,n),(t.log||e.log||console.log.bind(console)).apply(o,n)}}return t.namespace=n,t.enabled=e.enabled(n),t.useColors=e.useColors(),t.color=function(n){var s,t=0;for(s in n)t=(t<<5)-t+n.charCodeAt(s),t|=0;return e.colors[Math.abs(t)%e.colors.length]}(n),t.destroy=o,"function"==typeof e.init&&e.init(t),e.instances.push(t),t}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=n.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},e.disable=function(){e.enable('')},e.enable=function(n){e.save(n),e.names=[],e.skips=[];var t,o,s=("string"==typeof n?n:'').split(/[\s,]+/),i=s.length;for(t=0;t<i;t++)s[t]&&("-"===(n=s[t].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+n.substr(1)+"$")):e.names.push(new RegExp("^"+n+"$")));for(t=0;t<e.instances.length;t++)o=e.instances[t],o.enabled=e.enabled(o.namespace)},e.enabled=function(n){if("*"===n[n.length-1])return!0;var t,s;for(t=0,s=e.skips.length;t<s;t++)if(e.skips[t].test(n))return!1;for(t=0,s=e.names.length;t<s;t++)if(e.names[t].test(n))return!0;return!1},e.humanize=s(104),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(e,n,t){e.exports=t(77)},function(n,e,s){function t(n){var s;function t(){if(t.enabled){var n,i,a,o=t,r=+new Date,c=r-(s||r);o.diff=c,o.prev=s,o.curr=r,s=r;for(n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];n[0]=e.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O"),a=0,n[0]=n[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;a++;var i,s=e.formatters[r];return"function"==typeof s&&(i=n[a],t=s.call(o,i),n.splice(a,1),a--),t}),e.formatArgs.call(o,n),(t.log||e.log||console.log.bind(console)).apply(o,n)}}return t.namespace=n,t.enabled=e.enabled(n),t.useColors=e.useColors(),t.color=function(n){var s,t=0;for(s in n)t=(t<<5)-t+n.charCodeAt(s),t|=0;return e.colors[Math.abs(t)%e.colors.length]}(n),t.destroy=o,"function"==typeof e.init&&e.init(t),e.instances.push(t),t}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=n.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},e.disable=function(){e.enable('')},e.enable=function(n){e.save(n),e.names=[],e.skips=[];var t,o,s=("string"==typeof n?n:'').split(/[\s,]+/),i=s.length;for(t=0;t<i;t++)s[t]&&("-"===(n=s[t].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+n.substr(1)+"$")):e.names.push(new RegExp("^"+n+"$")));for(t=0;t<e.instances.length;t++)o=e.instances[t],o.enabled=e.enabled(o.namespace)},e.enabled=function(n){if("*"===n[n.length-1])return!0;var t,s;for(t=0,s=e.skips.length;t<s;t++)if(e.skips[t].test(n))return!1;for(t=0,s=e.names.length;t<s;t++)if(e.names[t].test(n))return!0;return!1},e.humanize=s(104),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(a,e,o){var t=o(147),n=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);e.deconstructPacket=function(s){var e=[],o=s.data,n=s;return n.data=function i(e,s){if(!e)return e;if(t(e))return a={_placeholder:!0,num:s.length},s.push(e),a;if(Array.isArray(e)){for(var a,r,n=new Array(e.length),o=0;o<e.length;o++)n[o]=i(e[o],s);return n}if("object"==typeof e&&!(e instanceof Date)){n={};for(r in e)n[r]=i(e[r],s);return n}return e}(o,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(e,t){return e.data=function s(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(Array.isArray(e))for(var o,t=0;t<e.length;t++)e[t]=s(e[t],n);else if("object"==typeof e)for(o in e)e[o]=s(e[o],n);return e}(e.data,t),e.attachments=void 0,e},e.removeBlobs=function(a,o){var n=0,e=a;!function c(a,h,l){if(!a)return a;if(i&&a instanceof Blob||s&&a instanceof File){n++;var r,u,d=new FileReader;d.onload=function(){l?l[h]=this.result:e=this.result,--n||o(e)},d.readAsArrayBuffer(a)}else if(Array.isArray(a))for(r=0;r<a.length;r++)c(a[r],r,a);else if("object"==typeof a&&!t(a))for(u in a)c(a[u],u,a)}(e),n||o(e)}},function(e,n,t){e.exports=t(379),e.exports.parser=t(51)},function(o,d,n){var a=n(149),l=n(50),t=n(77)("engine.io-client:socket"),r=n(153),i=n(51),s=n(145),c=n(75);function e(n,t){if(!(this instanceof e))return new e(n,t);t=t||{},n&&"object"==typeof n&&(t=n,n=null),n?(n=s(n),t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,'')+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState='',this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}o.exports=e,e.priorWebsocketSuccess=!1,l(e.prototype),e.protocol=i.protocol,e.Socket=e,e.Transport=n(107),e.transports=n(149),e.parser=n(51),e.prototype.createTransport=function(n){t('creating transport "%s"',n);var e,s=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(this.query);return s.EIO=4,s.transport=n,e=this.transportOptions[n]||{},this.id&&(s.sid=this.id),new a[n]({query:s,socket:this,agent:e.agent||this.agent,hostname:e.hostname||this.hostname,port:e.port||this.port,secure:e.secure||this.secure,path:e.path||this.path,forceJSONP:e.forceJSONP||this.forceJSONP,jsonp:e.jsonp||this.jsonp,forceBase64:e.forceBase64||this.forceBase64,enablesXDR:e.enablesXDR||this.enablesXDR,timestampRequests:e.timestampRequests||this.timestampRequests,timestampParam:e.timestampParam||this.timestampParam,policyPort:e.policyPort||this.policyPort,pfx:e.pfx||this.pfx,key:e.key||this.key,passphrase:e.passphrase||this.passphrase,cert:e.cert||this.cert,ca:e.ca||this.ca,ciphers:e.ciphers||this.ciphers,rejectUnauthorized:e.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:e.perMessageDeflate||this.perMessageDeflate,extraHeaders:e.extraHeaders||this.extraHeaders,forceNode:e.forceNode||this.forceNode,localAddress:e.localAddress||this.localAddress,requestTimeout:e.requestTimeout||this.requestTimeout,protocols:e.protocols||void 0,isReactNative:this.isReactNative})},e.prototype.open=function(){if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var t,n=this;return void setTimeout(function(){n.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(e){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},e.prototype.setTransport=function(n){t("setting transport %s",n.name);var e=this;this.transport&&(t("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=n,n.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},e.prototype.probe=function(i){t('probing transport "%s"',i);var n=this.createTransport(i,{probe:1}),o=!1,s=this;function r(){if(s.onlyBinaryUpgrades){var a=!this.supportsBinary&&s.transport.supportsBinary;o=o||a}o||(t('probe transport "%s" opened',i),n.send([{type:"ping",data:"probe"}]),n.once("packet",function(a){if(!o)if("pong"===a.type&&"probe"===a.data){if(t('probe transport "%s" pong',i),s.upgrading=!0,s.emit("upgrading",n),!n)return;e.priorWebsocketSuccess="websocket"===n.name,t('pausing current transport "%s"',s.transport.name),s.transport.pause(function(){o||"closed"!==s.readyState&&(t("changing transport and sending upgrade packet"),h(),s.setTransport(n),n.send([{type:"upgrade"}]),s.emit("upgrade",n),n=null,s.upgrading=!1,s.flush())})}else{t('probe transport "%s" failed',i);var r=new Error("probe error");r.transport=n.name,s.emit("upgradeError",r)}}))}function c(){o||(o=!0,h(),n.close(),n=null)}function a(e){var o=new Error("probe error: "+e);o.transport=n.name,c(),t('probe transport "%s" failed because of error: %s',i,e),s.emit("upgradeError",o)}function l(){a("transport closed")}function d(){a("socket closed")}function u(e){n&&e.name!==n.name&&(t('"%s" works - aborting "%s"',e.name,n.name),c())}function h(){n.removeListener("open",r),n.removeListener("error",a),n.removeListener("close",l),s.removeListener("close",d),s.removeListener("upgrading",u)}e.priorWebsocketSuccess=!1,n.once("open",r),n.once("error",a),n.once("close",l),this.once("close",d),this.once("upgrading",u),n.open()},e.prototype.onOpen=function(){if(t("socket open"),this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){t("starting upgrade probes");for(var n=0,s=this.upgrades.length;n<s;n++)this.probe(this.upgrades[n])}},e.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(t('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else t('packet received with socket readyState "%s"',this.readyState)},e.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},e.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){t("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},e.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},e.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},e.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},e.prototype.sendPacket=function(o,t,e,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=null),"closing"!==this.readyState&&"closed"!==this.readyState){(e=e||{}).compress=!1!==e.compress;var s={type:o,data:t,options:e};this.emit("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}},e.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?o():s()}):this.upgrading?o():s()}function s(){e.onClose("forced close"),t("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),s()}function o(){e.once("upgrade",n),e.once("upgradeError",n)}return this},e.prototype.onError=function(n){t("socket error %j",n),e.priorWebsocketSuccess=!1,this.emit("error",n),this.onClose("transport error",n)},e.prototype.onClose=function(e,n){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(t('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)},e.prototype.filterUpgrades=function(t){for(var n=[],e=0,s=t.length;e<s;e++)~r(this.transports,t[e])&&n.push(t[e]);return n}},function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(a,h,n){var r,d=n(106),i=n(150),l=n(50),u=n(76),s=n(77)("engine.io-client:polling-xhr");function c(){}function t(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var n="https:"===location.protocol,t=location.port;t||(t=n?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||t!==e.port,this.xs=e.secure!==n}}function e(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}a.exports=t,a.exports.Request=e,u(t,i),t.prototype.supportsBinary=!0,t.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new e(t)},t.prototype.doWrite=function(e,n){var s="string"!=typeof e&&void 0!==e,t=this.request({method:"POST",data:e,isBinary:s}),o=this;t.on("success",n),t.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=t},t.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(e.prototype),e.prototype.create=function(){n={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized;var n,i,t=this.xhr=new d(n),o=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){o.onLoad()},t.onerror=function(){o.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");o.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?o.onLoad():setTimeout(function(){o.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){o.onError(e)},0)}"undefined"!=typeof document&&(this.index=e.requestsCount++,e.requests[this.index]=this)},e.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},e.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},e.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},e.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete e.requests[this.index],this.xhr=null}},e.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},e.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},e.prototype.abort=function(){this.cleanup()},e.requestsCount=0,e.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",o):"function"==typeof addEventListener&&(r="onpagehide"in self?"pagehide":"unload",addEventListener(r,o,!1)));function o(){for(var t in e.requests)e.requests.hasOwnProperty(t)&&e.requests[t].abort()}},function(e){e.exports=Object.keys||function(e){var n,t=[],s=Object.prototype.hasOwnProperty;for(n in e)s.call(e,n)&&t.push(n);return t}},function(){},function(e){e.exports=function(s,t,e){if(n=s.byteLength,t=t||0,e=e||n,s.slice)return s.slice(t,e);if(t<0&&(t+=n),e<0&&(e+=n),e>n&&(e=n),t>=n||t>=e||0===n)return new ArrayBuffer(0);for(var n,r=new Uint8Array(s),i=new Uint8Array(e-t),o=t,a=0;o<e;o++,a++)i[a]=r[o];return i.buffer}},function(e){function t(){}e.exports=function(o,n,s){var i=!1;return s=s||t,e.count=o,0===o?n():e;function e(t,o){if(e.count<=0)throw new Error("after called too many times");--e.count,t?(i=!0,n(t),n=s):0!==e.count||i||n(null,o)}}},function(c){var e,s,o,t=String.fromCharCode;function a(s){for(var e,o,n=[],t=0,i=s.length;t<i;)(e=s.charCodeAt(t++))>=55296&&e<=56319&&t<i?56320==(64512&(o=s.charCodeAt(t++)))?n.push(((1023&e)<<10)+(1023&o)+65536):(n.push(e),t--):n.push(e);return n}function r(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(e,n){return t(e>>n&63|128)}function l(e,s){if(0==(4294967168&e))return t(e);var n='';return 0==(4294965248&e)?n=t(e>>6&31|192):0==(4294901760&e)?(r(e,s)||(e=65533),n=t(e>>12&15|224),n+=i(e,6)):0==(4292870144&e)&&(n=t(e>>18&7|240),n+=i(e,12),n+=i(e,6)),n+=t(63&e|128)}function n(){if(e>=o)throw Error("Invalid byte index");var t=255&s[e];if(e++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function d(a){var t,i;if(e>o)throw Error("Invalid byte index");if(e==o)return!1;if(t=255&s[e],e++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|n())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|n()<<6|n())>=2048)return r(i,a)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|n()<<12|n()<<6|n())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}c.exports={version:"2.1.2",encode:function(r,t){for(var o=!1!==(t=t||{}).strict,n=a(r),i=n.length,s=-1,e='';++s<i;)e+=l(n[s],o);return e},decode:function(c,i){var n,r,l=!1!==(i=i||{}).strict;s=a(c),o=s.length,e=0;for(n=[];!1!==(r=d(l));)n.push(r);return function(s){for(var e,i=s.length,o=-1,n='';++o<i;)(e=s[o])>65535&&(n+=t((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+=t(e);return n}(n)}}},function(t,e){!function(){'use strict';for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),s=0;s<t.length;s++)n[t.charCodeAt(s)]=s;e.encode=function(i){var n,s=new Uint8Array(i),o=s.length,e='';for(n=0;n<o;n+=3)e+=t[s[n]>>2],e+=t[(3&s[n])<<4|s[n+1]>>4],e+=t[(15&s[n+1])<<2|s[n+2]>>6],e+=t[63&s[n+2]];return o%3==2?e=e.substring(0,e.length-1)+"=":o%3==1&&(e=e.substring(0,e.length-2)+"=="),e},e.decode=function(e){var t,s,i,r,c,l,d,a=.75*e.length,u=e.length,o=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--),r=new ArrayBuffer(a),s=new Uint8Array(r);for(t=0;t<u;t+=4)d=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],c=n[e.charCodeAt(t+2)],l=n[e.charCodeAt(t+3)],s[o++]=d<<2|i>>4,s[o++]=(15&i)<<4|c>>2,s[o++]=(3&c)<<6|63&l;return r}}()},function(r){var e=void 0!==e?e:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=e&&e.prototype.append&&e.prototype.getBlob;function t(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var n,t=e.buffer;return e.byteLength!==t.byteLength&&(n=new Uint8Array(e.byteLength),n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer),t}return e})}function n(o,n){n=n||{};var s=new e;return t(o).forEach(function(e){s.append(e)}),n.type?s.getBlob(n.type):s.getBlob()}function o(e,n){return new Blob(t(e),n||{})}"undefined"!=typeof Blob&&(n.prototype=Blob.prototype,o.prototype=Blob.prototype),r.exports=s?i?Blob:o:a?n:void 0},function(n,e,s){function t(n){var s;function t(){if(t.enabled){var n,i,a,o=t,r=+new Date,c=r-(s||r);o.diff=c,o.prev=s,o.curr=r,s=r;for(n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];n[0]=e.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O"),a=0,n[0]=n[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;a++;var i,s=e.formatters[r];return"function"==typeof s&&(i=n[a],t=s.call(o,i),n.splice(a,1),a--),t}),e.formatArgs.call(o,n),(t.log||e.log||console.log.bind(console)).apply(o,n)}}return t.namespace=n,t.enabled=e.enabled(n),t.useColors=e.useColors(),t.color=function(n){var s,t=0;for(s in n)t=(t<<5)-t+n.charCodeAt(s),t|=0;return e.colors[Math.abs(t)%e.colors.length]}(n),t.destroy=o,"function"==typeof e.init&&e.init(t),e.instances.push(t),t}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=n.exports=t.debug=t.default=t).coerce=function(e){return e instanceof Error?e.stack||e.message:e},e.disable=function(){e.enable('')},e.enable=function(n){e.save(n),e.names=[],e.skips=[];var t,o,s=("string"==typeof n?n:'').split(/[\s,]+/),i=s.length;for(t=0;t<i;t++)s[t]&&("-"===(n=s[t].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+n.substr(1)+"$")):e.names.push(new RegExp("^"+n+"$")));for(t=0;t<e.instances.length;t++)o=e.instances[t],o.enabled=e.enabled(o.namespace)},e.enabled=function(n){if("*"===n[n.length-1])return!0;var t,s;for(t=0,s=e.skips.length;t<s;t++)if(e.skips[t].test(n))return!1;for(t=0,s=e.names.length;t<s;t++)if(e.names[t].test(n))return!0;return!1},e.humanize=s(104),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,n,e){(function(i){var s,a,r,o=e(150),d=e(76);t.exports=n,a=/\n/g,r=/\\n/g;function c(){}function l(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:{}}function n(n){if(o.call(this,n),this.query=this.query||{},!s){var e,t=l();s=t.___eio=t.___eio||[]}this.index=s.length,e=this,s.push(function(t){e.onData(t)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){e.script&&(e.script.onerror=c)},!1)}d(n,o),n.prototype.supportsBinary=!1,n.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},n.prototype.doPoll=function(){var t,n=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){n.onError("jsonp poll error",e)},t=document.getElementsByTagName("script")[0],t?t.parentNode.insertBefore(e,t):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},n.prototype.doWrite=function(s,d){if(e=this,!this.form){var e,n,t=document.createElement("form"),o=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;t.className="socketio",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.target=l,t.method="POST",t.setAttribute("accept-charset","utf-8"),o.name="d",t.appendChild(o),document.body.appendChild(t),this.form=t,this.area=o}function i(){c(),d()}function c(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(t){e.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+e.iframeId+'">';n=document.createElement(t)}catch(t){(n=document.createElement("iframe")).name=e.iframeId,n.src="javascript:0"}n.id=e.iframeId,e.form.appendChild(n),e.iframe=n}this.form.action=this.uri(),c(),s=s.replace(r,"\\\n"),this.area.value=s.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&i()}:this.iframe.onload=i}}).call(this,e(31))},function(t,n,e){(function(r){var s,o,i,a=e(107),h=e(51),c=e(75),l=e(76),d=e(152),u=e(77)("engine.io-client:websocket");if("undefined"!=typeof WebSocket)o=WebSocket;else if("undefined"!=typeof self)o=self.WebSocket||self.MozWebSocket;else try{i=e(392)}catch(e){}s=o||i;function n(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=o&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(s=i),a.call(this,e)}t.exports=n,l(n,a),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),n=this.protocols,e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?n?new s(t,n):new s(t):new s(t,n,e)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},n.prototype.write=function(n){e=this,this.writable=!1;for(var e,s=n.length,t=0,o=s;t<o;t++)!function(t){h.encodePacket(t,e.supportsBinary,function(n){if(!e.usingBrowserWebSocket){var o={};t.options&&(o.compress=t.options.compress),e.perMessageDeflate&&("string"==typeof n?r.byteLength(n):n.length)<e.perMessageDeflate.threshold&&(o.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(n):e.ws.send(n,o)}catch(e){u("websocket closed before onclose event")}--s||i()})}(n[t]);function i(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}},n.prototype.onClose=function(){a.prototype.onClose.call(this)},n.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n='';return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=d()),this.supportsBinary||(e.b64=1),(e=c.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},n.prototype.check=function(){return!(!s||"__initialize"in s&&this.name===n.prototype.name)}}).call(this,e(73).Buffer)},null,function(e){e.exports=function(n,t){for(var s=[],e=(t=t||0)||0;e<n.length;e++)s[e-t]=n[e];return s}},function(t){function e(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){if(e=this.ms*Math.pow(this.factor,this.attempts++),this.jitter){var e,t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(e){this.ms=e},e.prototype.setMax=function(e){this.max=e},e.prototype.setJitter=function(e){this.jitter=e}},null,window.EJS_main]).default